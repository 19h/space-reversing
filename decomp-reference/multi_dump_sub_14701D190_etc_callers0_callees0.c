// Decompiled code dump generated by Code Dumper (Callers/Callees/Refs)
// Start Functions:
//   - 0x14701D190 (sub_14701D190)
//   - 0x147021670 (sub_147021670)
//   - 0x14702B4B0 (sub_14702B4B0)
//   - 0x14702CF80 (sub_14702CF80)
//   - 0x14702D720 (sub_14702D720)
//   - 0x14702FB10 (sub_14702FB10)
//   - 0x14702FE10 (sub_14702FE10)
//   - 0x147030080 (sub_147030080)
//   - 0x1470300A0 (sub_1470300A0)
//   - 0x147035F40 (sub_147035F40)
//   - 0x147035F60 (sub_147035F60)
//   - 0x147036020 (sub_147036020)
//   - 0x14703D3E0 (sub_14703D3E0)
//   - 0x14703D830 (sub_14703D830)
//   - 0x147042980 (sub_147042980)
//   - 0x147043980 (sub_147043980)
//   - 0x147043BA0 (sub_147043BA0)
//   - 0x147043CA0 (sub_147043CA0)
//   - 0x147047A90 (sub_147047A90)
//   - 0x147047E00 (sub_147047E00)
//   - 0x147048010 (sub_147048010)
//   - 0x147049170 (sub_147049170)
//   - 0x1470492A0 (sub_1470492A0)
//   - 0x1470492C0 (sub_1470492C0)
//   - 0x14704FCB0 (sub_14704FCB0)
//   - 0x14704FF90 (sub_14704FF90)
//   - 0x147051200 (sub_147051200)
//   - 0x147051350 (sub_147051350)
//   - 0x14705A8C0 (sub_14705A8C0)
//   - 0x14705A8F0 (sub_14705A8F0)
//   - 0x14705B210 (sub_14705B210)
//   - 0x14705EA90 (sub_14705EA90)
//   - 0x14705F920 (sub_14705F920)
//   - 0x147060000 (sub_147060000)
//   - 0x147060810 (sub_147060810)
//   - 0x147060E20 (sub_147060E20)
//   - 0x147063060 (sub_147063060)
//   - 0x1470632F0 (sub_1470632F0)
//   - 0x1470639B0 (sub_1470639B0)
//   - 0x1470639E0 (sub_1470639E0)
//   - 0x147063E80 (sub_147063E80)
//   - 0x147063EB0 (sub_147063EB0)
//   - 0x147064A10 (sub_147064A10)
//   - 0x147065000 (sub_147065000)
//   - 0x1470656A0 (sub_1470656A0)
//   - 0x1470657C0 (sub_1470657C0)
//   - 0x147065930 (sub_147065930)
//   - 0x147065A90 (sub_147065A90)
//   - 0x147065C30 (sub_147065C30)
//   - 0x147066550 (sub_147066550)
//   - 0x1470666A0 (sub_1470666A0)
//   - 0x1470672C0 (sub_1470672C0)
//   - 0x14706C590 (sub_14706C590)
//   - 0x1470765D0 (sub_1470765D0)
//   - 0x14707A870 (sub_14707A870)
//   - 0x14707AB00 (sub_14707AB00)
//   - 0x14707B0C0 (sub_14707B0C0)
//   - 0x14707E2C0 (sub_14707E2C0)
//   - 0x14707E720 (sub_14707E720)
//   - 0x14707E860 (sub_14707E860)
//   - 0x147081A80 (sub_147081A80)
//   - 0x147081B10 (sub_147081B10)
//   - 0x147081CB0 (sub_147081CB0)
//   - 0x147081DC0 (sub_147081DC0)
//   - 0x147081F60 (sub_147081F60)
//   - 0x147082070 (sub_147082070)
//   - 0x147082540 (sub_147082540)
//   - 0x147082610 (sub_147082610)
//   - 0x1470826E0 (sub_1470826E0)
//   - 0x1470828D0 (sub_1470828D0)
//   - 0x14708B1B0 (sub_14708B1B0)
//   - 0x147090440 (sub_147090440)
//   - 0x147090D90 (sub_147090D90)
//   - 0x147093D70 (sub_147093D70)
//   - 0x147094EE0 (sub_147094EE0)
//   - 0x147096120 (sub_147096120)
//   - 0x147096E80 (sub_147096E80)
//   - 0x147097070 (sub_147097070)
//   - 0x14709EBB0 (sub_14709EBB0)
//   - 0x14709EDB0 (sub_14709EDB0)
//   - 0x1470A1280 (sub_1470A1280)
//   - 0x1470A5130 (sub_1470A5130)
//   - 0x1470A5DC0 (sub_1470A5DC0)
//   - 0x1470A6690 (sub_1470A6690)
//   - 0x1470A8F80 (sub_1470A8F80)
//   - 0x1470A9480 (sub_1470A9480)
//   - 0x1470AA070 (sub_1470AA070)
//   - 0x1470AA6C0 (sub_1470AA6C0)
//   - 0x1470AD2C0 (sub_1470AD2C0)
//   - 0x1470AE000 (sub_1470AE000)
//   - 0x1470AE770 (sub_1470AE770)
//   - 0x1470AEE90 (sub_1470AEE90)
//   - 0x1470AF6A0 (sub_1470AF6A0)
//   - 0x1470B1210 (sub_1470B1210)
//   - 0x1470B1390 (sub_1470B1390)
//   - 0x1470B3CA0 (sub_1470B3CA0)
//   - 0x1470B50C0 (sub_1470B50C0)
//   - 0x1470B55F0 (sub_1470B55F0)
//   - 0x1470B7660 (sub_1470B7660)
// Caller Depth: 0
// Callee/Ref Depth: 0
// Total Functions Found: 99
// ------------------------------------------------------------

// --- Function: sub_14701D190 (0x14701D190) ---
__int64 __fastcall sub_14701D190(__int64 a1)
{
  _QWORD *v1; // r9
  __int64 n5; // r14
  __int64 n5_1; // r10
  unsigned __int64 n0x20000; // r8
  unsigned int v6; // edx
  __int64 v7; // rax
  _DWORD *v8; // rsi
  void **v9; // rdi
  __int64 n1024; // rbp
  float v11; // xmm0_4
  unsigned __int64 v12; // rcx
  _WORD *v13; // r9
  __int64 v14; // r10
  __int16 n64; // r8
  unsigned __int16 v16; // r11
  __int16 v17; // ax
  __int16 n64_1; // cx
  __int16 v19; // r8
  __int16 v20; // dx
  __int16 v21; // cx
  __int64 v22; // rbx
  __int64 v23; // rdi
  __int64 v24; // rax
  __int64 v27; // rax
  _QWORD *v28; // rdx
  int v29; // esi
  signed __int64 v30; // rax
  int v31; // eax
  signed __int64 n0x200000; // rax
  __int64 result; // rax
  const char *p_AUDIOOBJECT_Pool; // [rsp+50h] [rbp-A8h] BYREF
  const char *p_ENTITY_Pool; // [rsp+58h] [rbp-A0h] BYREF
  const char *p_RENDERNODE_Pool; // [rsp+60h] [rbp-98h] BYREF
  const char *p_IMPOSTER_Pool; // [rsp+68h] [rbp-90h] BYREF
  const sockaddr *p_p_p_p_p_p_p_p_p_p_p_p_p_Source; // [rsp+70h] [rbp-88h] BYREF
  __int128 v39; // [rsp+78h] [rbp-80h] BYREF
  double v40; // [rsp+88h] [rbp-70h]
  double v41; // [rsp+90h] [rbp-68h]
  double v43; // [rsp+A8h] [rbp-50h]
  __int64 v44; // [rsp+100h] [rbp+8h] BYREF
  int v45; // [rsp+108h] [rbp+10h]
  int v46; // [rsp+110h] [rbp+18h]
  const char *p_AIOBJECT_Pool; // [rsp+118h] [rbp+20h] BYREF

  v44 = a1;
  *(_DWORD *)(a1 + 16) = -1;
  *(_QWORD *)a1 = off_148B9F550;
  v1 = (_QWORD *)(a1 + 176);
  n5 = 5;
  *(_QWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 20) = 0;
  *(_QWORD *)(a1 + 24) = 0;
  n5_1 = 5;
  *(_QWORD *)(a1 + 32) = 0;
  *(_QWORD *)(a1 + 40) = 0;
  *(_QWORD *)(a1 + 48) = 0;
  *(_QWORD *)(a1 + 56) = 0;
  *(_QWORD *)(a1 + 64) = 0;
  *(_DWORD *)(a1 + 72) = -1;
  *(_DWORD *)(a1 + 76) = 0;
  *(_QWORD *)(a1 + 80) = 0;
  *(_DWORD *)(a1 + 88) = -1;
  *(_QWORD *)(a1 + 92) = 0;
  *(_DWORD *)(a1 + 100) = -1;
  *(_QWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 112) = -1;
  *(_QWORD *)(a1 + 116) = 0;
  *(_DWORD *)(a1 + 124) = -1;
  *(_QWORD *)(a1 + 128) = 0;
  *(_DWORD *)(a1 + 136) = -1;
  *(_QWORD *)(a1 + 140) = 0;
  *(_DWORD *)(a1 + 148) = -1;
  *(_DWORD *)(a1 + 152) = 0;
  *(_OWORD *)(a1 + 156) = 0;
  *(_DWORD *)(a1 + 172) = 0;
  do
  {
    --n5_1;
    *v1 = 0;
    n0x20000 = 0;
    do
    {
      v6 = n0x20000 - 0x20000;
      v7 = (unsigned int)(16 * n0x20000++);
      v6 >>= 17;
      *(_DWORD *)((char *)v1 + v7 + 8) = v6;
      *(_DWORD *)((char *)v1 + v7 + 12) = v6;
    }
    while ( n0x20000 < 0x20000 );
    v1 += 262145;
  }
  while ( n5_1 );
  v8 = (_DWORD *)(a1 + 10486160);
  *(_OWORD *)(a1 + 10485976) = 0;
  *(_DWORD *)(a1 + 10485992) = 0;
  v9 = (void **)(a1 + 10486184);
  *(_BYTE *)(a1 + 10485996) = 0;
  *(_QWORD *)(a1 + 10486000) = 0;
  n1024 = 1024;
  *(_DWORD *)(a1 + 10486008) = -1;
  *(_DWORD *)(a1 + 10486012) = 0;
  *(_QWORD *)(a1 + 10486016) = 0;
  *(_QWORD *)(a1 + 10486024) = 0;
  *(_QWORD *)(a1 + 10486032) = 0;
  *(_QWORD *)(a1 + 10486040) = 0;
  *(_QWORD *)(a1 + 10486048) = 0;
  *(_QWORD *)(a1 + 10486056) = 0;
  *(_QWORD *)(a1 + 10486064) = 0;
  *(_QWORD *)(a1 + 10486072) = 0;
  *(_QWORD *)(a1 + 10486080) = 0;
  *(_BYTE *)(a1 + 10486096) = 0;
  *(_DWORD *)(a1 + 10486100) = 0;
  *(_QWORD *)(a1 + 10486112) = 0;
  *(_QWORD *)(a1 + 10486120) = 0;
  *(_QWORD *)(a1 + 10486128) = 0;
  *(_QWORD *)(a1 + 10486136) = 0;
  *(_QWORD *)(a1 + 10486144) = 0;
  *(_QWORD *)(a1 + 10486152) = 0;
  do
  {
    *v8 = -1;
    CreateStringObjectFromString(v9 - 2, (const char *)&p_p_p_p_p_p_p_p_p_p_p_p_Source, n0x20000, v1);
    v9[2] = (void *)0x3FF0000000000000LL;
    v8 += 18;
    *(v9 - 1) = 0;
    *v9 = 0;
    v9[1] = 0;
    v9[3] = 0;
    v9[4] = 0;
    v9[5] = 0;
    v9 += 9;
    --n1024;
  }
  while ( n1024 );
  p_AIOBJECT_Pool = "AIOBJECT Pool";
  sub_140360610(a1 + 10559896, 0x40000000, &p_AIOBJECT_Pool, -1);
  p_AUDIOOBJECT_Pool = "AUDIOOBJECT Pool";
  sub_140360610(a1 + 10559968, 0x4000000, &p_AUDIOOBJECT_Pool, -1);
  p_ENTITY_Pool = "ENTITY Pool";
  sub_140360610(a1 + 10560040, 0x40000000, &p_ENTITY_Pool, -1);
  p_RENDERNODE_Pool = "RENDERNODE Pool";
  sub_140360610(a1 + 10560112, 0x100000000LL, &p_RENDERNODE_Pool, -1);
  p_IMPOSTER_Pool = "IMPOSTER Pool";
  sub_140360610(a1 + 10560184, 301989888, &p_IMPOSTER_Pool, -1);
  *(_QWORD *)(a1 + 10560256) = 0;
  *(_QWORD *)(a1 + 10560264) = 0;
  *(_QWORD *)(a1 + 10560272) = 0;
  *(_QWORD *)(a1 + 10560280) = 0;
  *(_QWORD *)(a1 + 10560288) = 0;
  *(_QWORD *)(a1 + 10560296) = 0;
  *(_QWORD *)(a1 + 10560304) = 0;
  *(_QWORD *)(a1 + 10560312) = 0;
  *(_QWORD *)(a1 + 10560320) = 0;
  *(_QWORD *)(a1 + 10560328) = 0;
  *(_QWORD *)(a1 + 10560464) = 0;
  *(_QWORD *)(a1 + 10560472) = 0;
  p_p_p_p_p_p_p_p_p_p_p_p_p_Source = &p_p_p_p_p_p_p_p_p_p_p_p_Source;
  sub_140360610(a1 + 10560480, 0x1000000, &p_p_p_p_p_p_p_p_p_p_p_p_p_Source, -1);
  *(_DWORD *)(a1 + 10560552) = 0;
  *(_DWORD *)(a1 + 10560556) = -1;
  *(_DWORD *)(a1 + 10560560) = 0;
  *(_QWORD *)(a1 + 10560568) = 0;
  *(_QWORD *)(a1 + 10560576) = 0;
  *(_QWORD *)(a1 + 10560584) = 0;
  sub_140362F50(a1 + 10560592);
  v11 = log2f(*(float *)(qword_1514AE1F8 + 1568));
  v12 = 0;
  if ( v11 >= 9.223372e18 )
  {
    v11 = v11 - 9.223372e18;
    if ( v11 < 9.223372e18 )
      v12 = 0x8000000000000000uLL;
  }
  n16 = 16;
  qword_15146BB00 = 8 * (v12 + (unsigned int)(int)v11);
  p_sub_1470C1B00 = (__int64)sub_1470C1B00;
  p_sub_1470BC600 = (__int64)sub_1470BC600;
  p_sub_1470C9730 = (__int64)sub_1470C9730;
  p_sub_1470BC830 = (__int64)sub_1470BC830;
  p_sub_1470C9890 = (__int64)sub_1470C9890;
  p_sub_1470BC070 = (__int64)sub_1470BC070;
  p_sub_1470C9060 = (__int64)sub_1470C9060;
  p_sub_1470BC750 = (__int64)sub_1470BC750;
  p_sub_1470C9800 = (__int64)sub_1470C9800;
  p_sub_1470BC670 = (__int64)sub_1470BC670;
  p_sub_1470C9750 = (__int64)sub_1470C9750;
  p_sub_1470BC0D0 = (__int64)sub_1470BC0D0;
  p_sub_1470C90A0 = (__int64)sub_1470C90A0;
  p_sub_1470BC110 = (__int64)sub_1470BC110;
  p_sub_1470C90C0 = (__int64)sub_1470C90C0;
  p_sub_1470BBCF0 = (__int64)sub_1470BBCF0;
  p_sub_1470C8AC0 = (__int64)sub_1470C8AC0;
  p_sub_1470BBA80 = (__int64)sub_1470BBA80;
  p_sub_1470BC250 = (__int64)sub_1470BC250;
  p_sub_1470C9120 = (__int64)sub_1470C9120;
  p_sub_1470BBB60 = (__int64)sub_1470BBB60;
  p_sub_1470BBEE0 = (__int64)sub_1470BBEE0;
  p_sub_1470C8FD0 = (__int64)sub_1470C8FD0;
  p_sub_1470BC890 = (__int64)sub_1470BC890;
  p_sub_1470C98D0 = (__int64)sub_1470C98D0;
  p_sub_1470BC170 = (__int64)sub_1470BC170;
  p_sub_1470C9100 = (__int64)sub_1470C9100;
  p_sub_1470BBF90 = (__int64)sub_1470BBF90;
  p_sub_1470C9040 = (__int64)sub_1470C9040;
  p_sub_1470B8130 = (__int64)sub_1470B8130;
  p_sub_1470BC640 = (__int64)sub_1470BC640;
  p_sub_1470B8300 = (__int64)sub_1470B8300;
  p_sub_1470BD9C0 = (__int64)sub_1470BD9C0;
  p_sub_1470BDDE0 = (__int64)sub_1470BDDE0;
  p_sub_1470BE200 = (__int64)sub_1470BE200;
  p_sub_1470BCB40 = (__int64)sub_1470BCB40;
  p_sub_1470BCF90 = (__int64)sub_1470BCF90;
  p_sub_1470BD3E0 = (__int64)sub_1470BD3E0;
  v45 = -1;
  p_sub_1470B91D0 = (__int64)sub_1470B91D0;
  v46 = 0;
  p_sub_1470BE680 = (__int64)sub_1470BE680;
  v13 = (_WORD *)(a1 + 10560336);
  p_sub_1470B8270 = (__int64)sub_1470B8270;
  v14 = a1 + 10560350;
  p_sub_1470C0D40 = (__int64)sub_1470C0D40;
  p_sub_1470BE620 = (__int64)sub_1470BE620;
  do
  {
    *(_QWORD *)(v14 - 4) = -1;
    *(_QWORD *)(v14 + 4) = -1;
    *(_DWORD *)(v14 + 12) = -1;
    *(_WORD *)(v14 + 16) = -1;
    *v13 = 48;
    n64 = 0;
    v16 = *(_WORD *)((char *)&qword_1499B6AD0 + (_QWORD)v13 - a1 - 10560336);
    v17 = v16 >> 4;
    if ( (v16 & 0x10) != 0 )
    {
      *v13 = 112;
      n64 = 64;
      *(_WORD *)(v14 - 4) = 0;
    }
    if ( (v17 & 2) != 0 )
    {
      *v13 += 48;
      *(_WORD *)(v14 - 2) = n64;
      n64 += 48;
    }
    if ( (v17 & 4) != 0 )
    {
      *v13 += 4;
      *(_WORD *)v14 = n64;
      n64 += 4;
    }
    if ( (v17 & 8) != 0 )
    {
      *v13 += 4;
      *(_WORD *)(v14 + 2) = n64;
      n64 += 4;
    }
    if ( (v16 & 0x100) != 0 )
    {
      *v13 += 4;
      *(_WORD *)(v14 + 4) = n64;
      n64 += 4;
    }
    if ( (v16 & 0x200) != 0 )
    {
      n64_1 = n64;
      v19 = (n64 + 7) & 0xFFF8;
      *v13 += v19 - n64_1 + 8;
      *(_WORD *)(v14 + 6) = v19;
      n64 = v19 + 8;
    }
    if ( (v16 & 0x400) != 0 )
    {
      *v13 += 4;
      *(_WORD *)(v14 + 8) = n64;
      n64 += 4;
    }
    if ( (v16 & 0x800) != 0 )
    {
      *v13 += 4;
      *(_WORD *)(v14 + 10) = n64;
      n64 += 4;
    }
    if ( (v16 & 0x2000) != 0 )
    {
      v20 = (n64 + 7) & 0xFFF8;
      *v13 += v20 - n64 + 24;
      *(_WORD *)(v14 + 12) = v20;
      n64 = v20 + 28;
      *v13 += 4;
      *(_WORD *)(v14 + 14) = v20 + 24;
    }
    if ( (v16 & 0x4000) != 0 )
    {
      v21 = (n64 + 7) & 0xFFF8;
      *v13 += v21 - n64 + 72;
      *(_WORD *)(v14 + 16) = v21;
    }
    v14 += 22;
    *v13 = (*v13 + 15) & 0xFFF0;
    ++v13;
    --n5;
  }
  while ( n5 );
  v22 = v44;
  qword_15146BC68 = v44;
  v23 = sub_1402A63D0(332752);
  if ( v23 )
  {
    v24 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)qword_149A0A290 + 168LL))(qword_149A0A290);
    v44 = v24;
    if ( v24 )
      sub_1405242F0(v24);
    v41 = 1.0;
    _XMM1 = 0;
    _XMM0 = 0;
    v40 = 0.0;
    v43 = 0.0;
    __asm
    {
      vmovupd [rsp+0F8h+var_80], xmm1
      vmovupd [rsp+0F8h+var_60], xmm0
    }
    v27 = sub_14701BF40(v23, 0, "Root", 0, 0, &v39, 0, &v44, 0);
  }
  else
  {
    v27 = 0;
  }
  *(_QWORD *)(v22 + 10486088) = v27;
  v28 = *(_QWORD **)(v22 + 10486024);
  if ( v28 == *(_QWORD **)(v22 + 10486032) )
  {
    sub_140C4B610(v22 + 10486016);
  }
  else
  {
    *v28 = 0;
    *(_QWORD *)(v22 + 10486024) += 8LL;
  }
  **(_QWORD **)(v22 + 10486016) = *(_QWORD *)(v22 + 10486088)
                                ^ (**(_QWORD **)(v22 + 10486016)
                                 ^ *(_QWORD *)(v22 + 10486088))
                                & 0xFFFF000000000000uLL;
  v29 = *(_DWORD *)(sub_1402C8360() + 24);
  if ( *(_DWORD *)(v22 + 16) == v29 )
  {
    ++*(_DWORD *)(v22 + 20);
  }
  else
  {
    v30 = _InterlockedCompareExchange64((volatile signed __int64 *)(v22 + 8), 0x200000, 0);
    if ( v30 )
      sub_1403DE750(v22 + 8, v30, 0, (unsigned int)"CZoneSystem::CZoneSystem", (__int64)"m_GlobalStateLock", 1);
    *(_DWORD *)(v22 + 16) = v29;
  }
  sub_1470915A0(v22, *(_QWORD *)(v22 + 10486088));
  if ( v22 != -8 )
  {
    v31 = *(_DWORD *)(v22 + 20);
    if ( v31 )
    {
      *(_DWORD *)(v22 + 20) = v31 - 1;
    }
    else
    {
      *(_DWORD *)(v22 + 16) = -1;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)(v22 + 8), 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        sub_1403DEBA0(v22 + 8, n0x200000);
    }
  }
  result = v22;
  *(_QWORD *)(v22 + 10559888) = 0;
  return result;
}

// --- End Function: sub_14701D190 (0x14701D190) ---

// --- Function: sub_147021670 (0x147021670) ---
__int64 (__fastcall **__fastcall sub_147021670(__int64 a1))()
{
  _QWORD *v2; // rbp
  _QWORD *i; // rsi
  __int64 v4; // rbx
  __m128i v5; // rt0
  __m128i v6; // xmm0
  signed __int64 epi64; // r8
  __m128i v8; // rax
  __m128i v9; // rt0
  __int64 v10; // rcx
  unsigned __int64 n0x1000; // rdx
  __int64 n1024; // rbx
  char *v13; // rsi
  __int64 v14; // rcx
  unsigned __int64 n0x1000_1; // rdx
  __int64 v16; // rcx
  unsigned __int64 n0x1000_2; // rdx
  __int64 v18; // rcx
  unsigned __int64 n0x1000_3; // rdx
  __int64 v20; // rcx
  unsigned __int64 n0x1000_4; // rdx
  __int64 v22; // rcx
  unsigned __int64 n0x1000_5; // rdx
  __int64 (__fastcall **result)(); // rax
  __m128i v25; // [rsp+30h] [rbp-38h]

  *(_QWORD *)a1 = off_148B9F550;
  v2 = *(_QWORD **)(a1 + 10486024);
  for ( i = *(_QWORD **)(a1 + 10486016); i != v2; ++i )
  {
    v4 = *i & 0xFFFFFFFFFFFFLL;
    if ( v4 )
    {
      sub_147021440(*i & 0xFFFFFFFFFFFFLL);
      sub_1402A63C0(v4, 332752);
    }
  }
  while ( 1 )
  {
    v5 = 0u;
    _InterlockedCompareExchange128((volatile signed __int64 *)(a1 + 10560464), 0, 0, v5.m128i_i64);
    v6 = v5;
    if ( !v5.m128i_i64[0] )
      break;
    while ( 1 )
    {
      epi64 = _mm_extract_epi64(v6, 1);
      v9.m128i_i64[0] = v6.m128i_i64[0];
      v9.m128i_i64[1] = epi64;
      _InterlockedCompareExchange128(
        (volatile signed __int64 *)(a1 + 10560464),
        epi64 + 1,
        *(_QWORD *)v6.m128i_i64[0],
        v9.m128i_i64);
      v8 = v9;
      v25 = v9;
      if ( *(_OWORD *)&v9 == __PAIR128__(epi64, v6.m128i_u64[0]) )
        break;
      v6 = v25;
      if ( !v8.m128i_i64[0] )
        goto LABEL_9;
    }
    sub_147021F80(v6.m128i_i64[0]);
    sub_1402A63C0(v6.m128i_i64[0], 800);
  }
LABEL_9:
  sub_140374530(a1 + 10560592);
  v10 = *(_QWORD *)(a1 + 10560568);
  if ( v10 )
  {
    n0x1000 = (*(_QWORD *)(a1 + 10560584) - v10) & 0xFFFFFFFFFFFFFFF0uLL;
    if ( n0x1000 >= 0x1000 )
    {
      n0x1000 += 39LL;
      if ( (unsigned __int64)(v10 - *(_QWORD *)(v10 - 8) - 8) > 0x1F )
        goto LABEL_42;
      v10 = *(_QWORD *)(v10 - 8);
    }
    sub_1402A63C0(v10, n0x1000);
    *(_QWORD *)(a1 + 10560568) = 0;
    *(_QWORD *)(a1 + 10560576) = 0;
    *(_QWORD *)(a1 + 10560584) = 0;
  }
  sub_1403743E0(a1 + 10560480);
  sub_1403743E0(a1 + 10560184);
  sub_1403743E0(a1 + 10560112);
  sub_1403743E0(a1 + 10560040);
  sub_1403743E0(a1 + 10559968);
  sub_1403743E0(a1 + 10559896);
  n1024 = 1024;
  v13 = (char *)(a1 + 10559896);
  do
  {
    v13 -= 72;
    sub_1403727A0(v13);
    --n1024;
  }
  while ( n1024 );
  v14 = *(_QWORD *)(a1 + 10486136);
  if ( v14 )
  {
    n0x1000_1 = (*(_QWORD *)(a1 + 10486152) - v14) & 0xFFFFFFFFFFFFFFFCuLL;
    if ( n0x1000_1 >= 0x1000 )
    {
      n0x1000_1 += 39LL;
      if ( (unsigned __int64)(v14 - *(_QWORD *)(v14 - 8) - 8) > 0x1F )
        goto LABEL_42;
      v14 = *(_QWORD *)(v14 - 8);
    }
    sub_1402A63C0(v14, n0x1000_1);
    *(_QWORD *)(a1 + 10486136) = 0;
    *(_QWORD *)(a1 + 10486144) = 0;
    *(_QWORD *)(a1 + 10486152) = 0;
  }
  v16 = *(_QWORD *)(a1 + 10486112);
  if ( v16 )
  {
    n0x1000_2 = (*(_QWORD *)(a1 + 10486128) - v16) & 0xFFFFFFFFFFFFFFFCuLL;
    if ( n0x1000_2 >= 0x1000 )
    {
      n0x1000_2 += 39LL;
      if ( (unsigned __int64)(v16 - *(_QWORD *)(v16 - 8) - 8) > 0x1F )
        goto LABEL_42;
      v16 = *(_QWORD *)(v16 - 8);
    }
    sub_1402A63C0(v16, n0x1000_2);
    *(_QWORD *)(a1 + 10486112) = 0;
    *(_QWORD *)(a1 + 10486120) = 0;
    *(_QWORD *)(a1 + 10486128) = 0;
  }
  v18 = *(_QWORD *)(a1 + 10486064);
  if ( v18 )
  {
    n0x1000_3 = (*(_QWORD *)(a1 + 10486080) - v18) & 0xFFFFFFFFFFFFFF80uLL;
    if ( n0x1000_3 >= 0x1000 )
    {
      n0x1000_3 += 39LL;
      if ( (unsigned __int64)(v18 - *(_QWORD *)(v18 - 8) - 8) > 0x1F )
        goto LABEL_42;
      v18 = *(_QWORD *)(v18 - 8);
    }
    sub_1402A63C0(v18, n0x1000_3);
    *(_QWORD *)(a1 + 10486064) = 0;
    *(_QWORD *)(a1 + 10486072) = 0;
    *(_QWORD *)(a1 + 10486080) = 0;
  }
  v20 = *(_QWORD *)(a1 + 10486040);
  if ( v20 )
  {
    n0x1000_4 = (*(_QWORD *)(a1 + 10486056) - v20) & 0xFFFFFFFFFFFFFFFCuLL;
    if ( n0x1000_4 >= 0x1000 )
    {
      n0x1000_4 += 39LL;
      if ( (unsigned __int64)(v20 - *(_QWORD *)(v20 - 8) - 8) > 0x1F )
        goto LABEL_42;
      v20 = *(_QWORD *)(v20 - 8);
    }
    sub_1402A63C0(v20, n0x1000_4);
    *(_QWORD *)(a1 + 10486040) = 0;
    *(_QWORD *)(a1 + 10486048) = 0;
    *(_QWORD *)(a1 + 10486056) = 0;
  }
  v22 = *(_QWORD *)(a1 + 10486016);
  if ( v22 )
  {
    n0x1000_5 = (*(_QWORD *)(a1 + 10486032) - v22) & 0xFFFFFFFFFFFFFFF8uLL;
    if ( n0x1000_5 < 0x1000 )
    {
LABEL_40:
      sub_1402A63C0(v22, n0x1000_5);
      *(_QWORD *)(a1 + 10486016) = 0;
      *(_QWORD *)(a1 + 10486024) = 0;
      *(_QWORD *)(a1 + 10486032) = 0;
      goto LABEL_41;
    }
    n0x1000_5 += 39LL;
    if ( (unsigned __int64)(v22 - *(_QWORD *)(v22 - 8) - 8) <= 0x1F )
    {
      v22 = *(_QWORD *)(v22 - 8);
      goto LABEL_40;
    }
LABEL_42:
    invalid_parameter_noinfo_noreturn();
  }
LABEL_41:
  result = &off_148B9C628;
  *(_QWORD *)a1 = &off_148B9C628;
  return result;
}

// --- End Function: sub_147021670 (0x147021670) ---

// --- Function: sub_14702B4B0 (0x14702B4B0) ---
__int64 __fastcall sub_14702B4B0(__int64 a1, char a2)
{
  sub_147021670(a1);
  if ( (a2 & 1) != 0 )
    sub_1402A63C0(a1, 10560672);
  return a1;
}

// --- End Function: sub_14702B4B0 (0x14702B4B0) ---

// --- Function: sub_14702CF80 (0x14702CF80) ---
char __fastcall sub_14702CF80(__int64 a1, __int64 a2, _QWORD *a3, __int64 a4, __int64 a5)
{
  __int64 v10; // rax
  unsigned __int8 v11; // r13
  unsigned __int64 v12; // r14
  _WORD *v13; // rbx
  int v14; // edx
  int v15; // ecx
  _WORD *v16; // rax
  __int64 v17; // r14
  __int64 v18; // rdx
  unsigned __int64 v19; // rbx
  __int64 v20; // r12
  bool v21; // si
  char v22; // al
  __int64 v23; // r13
  unsigned __int8 v24; // si
  int v25; // eax
  int v26; // ebx
  _QWORD *v27; // rsi
  int v28; // eax
  int v29; // ebx
  __int64 v30; // rdi
  __int64 v31; // rsi
  __int64 v32; // rdi
  __int64 v33; // rbx
  _DWORD *v34; // rbx
  signed __int32 v35; // edi
  signed __int32 v36; // eax
  __int64 v37; // rax
  __int64 v38; // r13
  __int64 v39; // r15
  int v40; // r14d
  int v41; // edi
  _DWORD *v42; // r14
  unsigned __int32 v43; // edi
  __int64 v44; // rdi
  signed __int32 v45; // eax
  int v46; // r15d
  _DWORD *v47; // rdi
  unsigned __int32 v48; // r15d
  char v49; // [rsp+40h] [rbp-C0h]
  char v50; // [rsp+41h] [rbp-BFh]
  _WORD *v51; // [rsp+48h] [rbp-B8h]
  char v52[8]; // [rsp+50h] [rbp-B0h] BYREF
  __int128 *v53; // [rsp+58h] [rbp-A8h]
  char v54[8]; // [rsp+60h] [rbp-A0h] BYREF
  __int64 v55; // [rsp+68h] [rbp-98h]
  __int64 v56; // [rsp+70h] [rbp-90h] BYREF
  unsigned __int64 v57; // [rsp+78h] [rbp-88h]
  _BYTE v58[4]; // [rsp+80h] [rbp-80h] BYREF
  int v59; // [rsp+84h] [rbp-7Ch] BYREF
  __int64 v60; // [rsp+88h] [rbp-78h]
  __int128 v61; // [rsp+90h] [rbp-70h] BYREF
  __int64 v62; // [rsp+A0h] [rbp-60h]
  int n2816; // [rsp+B0h] [rbp-50h] BYREF
  __int64 v64; // [rsp+B4h] [rbp-4Ch]
  int v65; // [rsp+BCh] [rbp-44h]
  __int64 v66; // [rsp+C0h] [rbp-40h]
  unsigned __int64 v67; // [rsp+C8h] [rbp-38h]
  __int64 v68; // [rsp+D0h] [rbp-30h]
  __int64 v69; // [rsp+D8h] [rbp-28h]
  __m256 v70; // [rsp+100h] [rbp+0h] BYREF
  unsigned __int8 v72; // [rsp+170h] [rbp+70h]

  if ( *(_WORD *)a3 == 0xFFFF )
    return 0;
  v10 = sub_1403614E0(v58, a3);
  v11 = sub_1403A5D40(qword_15146BC68 + 10560592, v10);
  sub_140374510(v58);
  v12 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF)
      * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v57 = v12;
  v62 = 0;
  v61 = 0;
  v13 = (_WORD *)(v12 + 8);
  if ( a4 )
  {
    v53 = (__int128 *)a4;
  }
  else
  {
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360() + 16) + (*v13 & 0xF) + 41LL) = 1;
    v53 = &v61;
  }
  v51 = (_WORD *)(v12 + 8);
  v56 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v49 = *(_BYTE *)(v56 + 2544);
  if ( !v49 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
      v51 = (_WORD *)(v12 + 8);
    }
    else
    {
      v14 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      v51 = (_WORD *)(v12 + 8);
      if ( (*(_QWORD *)&v14 & 0x200000LL) != 0 )
      {
        sub_1403CD0A0(a1 + 8, v14, (unsigned int)"CZoneSystem::AddTag", (unsigned int)"m_GlobalStateLock", 1);
        v51 = (_WORD *)(v12 + 8);
      }
    }
  }
  v15 = *(_DWORD *)(v12 + 16);
  if ( v15 != -1 )
  {
    if ( (_WORD)v15 )
    {
      v18 = (unsigned __int16)v15;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v15 + 6) != HIWORD(v15) )
      {
        v17 = 0;
LABEL_18:
        v51 = v13;
        v16 = v13;
        goto LABEL_19;
      }
    }
    else
    {
      v18 = 0;
    }
    v17 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v18) & 0xFFFFFFFFFFFFLL;
    goto LABEL_18;
  }
  v16 = v51;
  v17 = 0;
LABEL_19:
  v19 = v57;
  v20 = *v16 & 0xF;
  v60 = a1 + 24 + 8LL * (unsigned int)v20;
  sub_14702BB40(v57, a5, v60, v11);
  v55 = *(unsigned __int16 *)(22LL * (*v51 & 0xF) + a1 + 10560360) + v57 + 48;
  sub_140361520(v52, v55);
  LOBYTE(v19) = *(_BYTE *)(v19 + 40);
  v21 = (*v51 & 0x2000) != 0;
  v22 = sub_1403BC2B0(v55, a3);
  if ( !(_BYTE)v19 || !v21 )
  {
LABEL_27:
    if ( v11 )
      sub_1403A5650(v60);
    goto LABEL_29;
  }
  if ( v11 )
  {
    if ( !v22 )
    {
      v23 = a1;
      v24 = 1;
      v72 = 1;
      v25 = *(_DWORD *)(a1 + 4 * v20 + 10485976);
      if ( v25 )
      {
        v72 = 1;
        do
        {
          v59 = v25;
          qword_1499F5468(4 * v20 + a1 + 10485976, &v59, 4, 0xFFFFFFFFLL);
          v25 = *(_DWORD *)(a1 + 4 * v20 + 10485976);
        }
        while ( v25 );
      }
      sub_147094EE0(a1, a2, v53, 1);
      goto LABEL_30;
    }
    goto LABEL_27;
  }
LABEL_29:
  v23 = a1;
  v24 = 0;
  v72 = 0;
LABEL_30:
  v26 = v55;
  v50 = sub_140393000(v55, *a3);
  if ( v24 )
  {
    sub_14708C540(v23, a2, v53, v24);
    v27 = (_QWORD *)v57;
    if ( (*(_BYTE *)(v57 + 12) & 8) != 0 )
    {
      if ( (unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, v52) )
      {
        v70.m256_f32[0] = 0.0;
        LOWORD(v70.m256_f32[6]) = *v51;
        *(_QWORD *)&v70.m256_f32[4] = *v27;
        v29 = sub_1470656A0(v23, a2);
        sub_1403614E0(v54, a3);
        __asm { vzeroupper }
        sub_1470A9D70(v29, *v27, (unsigned __int16)*v51, (unsigned int)&v70, (__int64)v52, (__int64)v54, (__int64)v53);
        sub_140374510(v54);
      }
      else
      {
        v28 = sub_1470656A0(v23, a2);
        sub_1470A9980(v28, *v27, (unsigned __int16)*v51, v26, (__int64)v53);
      }
    }
  }
  v30 = v56 + 2736;
  v31 = sub_1403E4B00(v56 + 2736);
  if ( !v31 )
    v31 = allocWithProfilerInfo(0x28u, 0);
  *(_BYTE *)(v31 + 24) = 11;
  *(_QWORD *)v31 = 0;
  *(_QWORD *)(v31 + 8) = 0;
  *(_QWORD *)(v31 + 16) = 0;
  sub_140361940(v31 + 32);
  *(_QWORD *)(v31 + 8) = v57;
  *(_QWORD *)(v31 + 16) = v30;
  sub_1403614E0(&v56, a3);
  sub_14037B4F0(v31 + 32, &v56);
  sub_140374510(&v56);
  n2816 = 2816;
  v64 = 0;
  v65 = 0;
  v67 = 0;
  v68 = 0;
  v69 = 0;
  v66 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v32 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v33 = *(_QWORD *)v31;
      sub_14704B550(v32, v31);
      v31 = v33;
    }
    while ( v33 );
    goto LABEL_39;
  }
  v55 = 4 * v20 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v20 + 10485976));
  v34 = (_DWORD *)(v17 + 66224 * v20 + 1472);
  _m_prefetchw(v34 + 1);
  v35 = _InterlockedOr(v34 + 1, 1u);
  if ( (v35 & 1) != 0 )
  {
    while ( 1 )
    {
      v36 = _InterlockedCompareExchange(v34 + 1, v35 + 2, v35);
      if ( v35 == v36 )
        break;
      if ( (v36 & 1) != 0 )
      {
        v35 = v36;
      }
      else
      {
        _m_prefetchw(v34 + 1);
        v35 = _InterlockedOr(v34 + 1, 1u);
        if ( (v35 & 1) == 0 )
          goto LABEL_45;
      }
    }
    v41 = (unsigned __int16)v35 >> 1;
    v42 = &v34[4 * (v41 & 0xFFF) + 4];
    if ( (*v42 & 0x7FFF) != (((_WORD)v41 - 4096) & 0x7FFF) )
      sub_1470B7790(v34, &v34[4 * (v41 & 0xFFF) + 4]);
    *((_QWORD *)v42 + 1) = v31;
    v43 = _InterlockedExchange(v42 + 1, v41);
    if ( (v43 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v34, v42 + 1, v43);
LABEL_39:
    v67 = __rdtsc();
    qword_149A05E08(&n2816);
    goto LABEL_66;
  }
LABEL_45:
  v37 = sub_1402C8360();
  v38 = v55;
  *v34 = *(_DWORD *)(v37 + 24);
  do
  {
    v39 = qword_15146BC68;
    if ( v31 )
    {
      v40 = 0;
      do
      {
        v44 = *(_QWORD *)v31;
        sub_14704B550(v39, v31);
        ++v40;
        v31 = v44;
      }
      while ( v44 );
    }
    else
    {
      v40 = 0;
    }
    v45 = v34[1];
    v46 = v34[2] & 0x7FFF;
    if ( (unsigned __int16)v45 >> 1 == v46 )
    {
      *v34 = -1;
      if ( v45 == _InterlockedCompareExchange(v34 + 1, v45 & 0xFFFFFFFE, v45) )
      {
        v31 = 0;
        goto LABEL_62;
      }
      *v34 = *(_DWORD *)(sub_1402C8360() + 24);
    }
    ++v34[2];
    v47 = &v34[4 * (v46 & 0xFFF) + 4];
    if ( (v47[1] & 0x7FFF) != v46 )
      sub_1470B7790(v34, v47 + 1);
    v31 = *((_QWORD *)v47 + 1);
    v48 = _InterlockedExchange(v47, v46);
    if ( (v48 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v34, v47, v48);
LABEL_62:
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v38), -v40) == v40 )
      qword_1499F5478(v38 + qword_15146BC68);
  }
  while ( v31 );
  v67 = __rdtsc();
  qword_149A05E08(&n2816);
  v23 = a1;
LABEL_66:
  sub_1470918C0(v57, a5, v60, v72);
  sub_140374510(v52);
  if ( !v49 )
    sub_1402D42F0(v23 + 8);
  if ( !a4 )
    sub_14707E720(v23, (unsigned __int16)*v51, v53);
  if ( (_QWORD)v61 )
    sub_1403A4F10(&v61, v61, (v62 - v61) & 0xFFFFFFFFFFFFFFE0uLL);
  return v50;
}

// --- End Function: sub_14702CF80 (0x14702CF80) ---

// --- Function: sub_14702D720 (0x14702D720) ---
char __fastcall sub_14702D720(__int64 a1, __int64 a2, __int64 a3, __int64 a4, __int64 a5)
{
  unsigned __int8 v10; // r13
  unsigned __int64 v11; // r14
  _WORD *v12; // rbx
  int v13; // edx
  int v14; // ecx
  _WORD *v15; // rax
  __int64 v16; // r14
  __int64 v17; // rdx
  unsigned __int64 v18; // rbx
  __int64 v19; // r15
  __int64 v20; // r12
  char v21; // al
  __int64 v22; // r13
  int v23; // eax
  _QWORD *v24; // rbx
  int v25; // eax
  int v26; // eax
  char v27; // al
  __int64 v28; // r12
  __int64 v29; // rsi
  __int64 v30; // rdi
  __int64 v31; // rbx
  __int64 v32; // r12
  _DWORD *v33; // rbx
  signed __int32 v34; // edi
  signed __int32 v35; // eax
  __int64 v36; // r15
  int v37; // r14d
  __int64 v38; // rdi
  signed __int32 v39; // eax
  int v40; // r15d
  int v41; // edi
  _DWORD *v42; // r14
  unsigned __int32 v43; // edi
  _DWORD *v44; // rdi
  unsigned __int32 v45; // r15d
  unsigned __int8 v46; // [rsp+40h] [rbp-C0h]
  bool v47; // [rsp+42h] [rbp-BEh]
  char v48; // [rsp+42h] [rbp-BEh]
  char v49; // [rsp+44h] [rbp-BCh]
  _WORD *v50; // [rsp+48h] [rbp-B8h]
  char v51[8]; // [rsp+50h] [rbp-B0h] BYREF
  __int128 *v52; // [rsp+58h] [rbp-A8h]
  unsigned __int64 v53; // [rsp+60h] [rbp-A0h]
  int v54; // [rsp+68h] [rbp-98h] BYREF
  __int64 v55; // [rsp+70h] [rbp-90h]
  __int64 v56; // [rsp+78h] [rbp-88h]
  __int128 v57; // [rsp+80h] [rbp-80h] BYREF
  __int64 v58; // [rsp+90h] [rbp-70h]
  int n2816; // [rsp+A0h] [rbp-60h] BYREF
  __int64 v60; // [rsp+A4h] [rbp-5Ch]
  int v61; // [rsp+ACh] [rbp-54h]
  __int64 v62; // [rsp+B0h] [rbp-50h]
  unsigned __int64 v63; // [rsp+B8h] [rbp-48h]
  __int64 v64; // [rsp+C0h] [rbp-40h]
  __int64 v65; // [rsp+C8h] [rbp-38h]
  __m256 v66; // [rsp+F0h] [rbp-10h] BYREF

  if ( !(unsigned __int8)sub_1403BC2D0(a3) )
    return 1;
  v10 = sub_1403A5D40(qword_15146BC68 + 10560592, a3);
  v11 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF)
      * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v53 = v11;
  v58 = 0;
  v57 = 0;
  v12 = (_WORD *)(v11 + 8);
  if ( a4 )
  {
    v52 = (__int128 *)a4;
  }
  else
  {
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360() + 16) + (*v12 & 0xF) + 41LL) = 1;
    v52 = &v57;
  }
  v50 = (_WORD *)(v11 + 8);
  v55 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v49 = *(_BYTE *)(v55 + 2544);
  if ( !v49 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
      v50 = (_WORD *)(v11 + 8);
    }
    else
    {
      v13 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      v50 = (_WORD *)(v11 + 8);
      if ( (*(_QWORD *)&v13 & 0x200000LL) != 0 )
      {
        sub_1403CD0A0(a1 + 8, v13, (unsigned int)"CZoneSystem::AddTags", (unsigned int)"m_GlobalStateLock", 1);
        v50 = (_WORD *)(v11 + 8);
      }
    }
  }
  v14 = *(_DWORD *)(v11 + 16);
  if ( v14 != -1 )
  {
    if ( (_WORD)v14 )
    {
      v17 = (unsigned __int16)v14;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
      {
        v16 = 0;
LABEL_18:
        v50 = v12;
        v15 = v12;
        goto LABEL_19;
      }
    }
    else
    {
      v17 = 0;
    }
    v16 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v17) & 0xFFFFFFFFFFFFLL;
    goto LABEL_18;
  }
  v15 = v50;
  v16 = 0;
LABEL_19:
  v18 = v53;
  v19 = *v15 & 0xF;
  v56 = a1 + 24 + 8LL * (unsigned int)v19;
  sub_14702BB40(v53, a5, v56, v10);
  v20 = *(unsigned __int16 *)(22LL * (*v50 & 0xF) + a1 + 10560360) + v53 + 48;
  sub_140361520(v51, v20);
  LOBYTE(v18) = *(_BYTE *)(v18 + 40);
  v47 = (*v50 & 0x2000) != 0;
  v21 = sub_1403BC1E0(v20, a3);
  if ( (_BYTE)v18 && v47 )
  {
    if ( !v10 )
    {
LABEL_32:
      v46 = 0;
      v27 = sub_140393040(v20, a3);
      goto LABEL_33;
    }
    if ( !v21 )
    {
      v22 = a1;
      v46 = 1;
      v23 = *(_DWORD *)(a1 + 4 * v19 + 10485976);
      if ( v23 )
      {
        v46 = 1;
        do
        {
          v54 = v23;
          qword_1499F5468(4 * v19 + a1 + 10485976, &v54, 4, 0xFFFFFFFFLL);
          v23 = *(_DWORD *)(a1 + 4 * v19 + 10485976);
        }
        while ( v23 );
      }
      sub_147094EE0(a1, a2, v52, 1);
      v48 = sub_140393040(v20, a3);
      sub_14708C540(a1, a2, v52, 1);
      v24 = (_QWORD *)v53;
      if ( (*(_BYTE *)(v53 + 12) & 8) != 0 )
      {
        if ( (unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, v51) )
        {
          v66.m256_f32[0] = 0.0;
          LOWORD(v66.m256_f32[6]) = *v50;
          *(_QWORD *)&v66.m256_f32[4] = *v24;
          v26 = sub_1470656A0(a1, a2);
          __asm { vzeroupper }
          sub_1470A9D70(v26, *v24, (unsigned __int16)*v50, (unsigned int)&v66, (__int64)v51, a3, (__int64)v52);
        }
        else
        {
          v25 = sub_1470656A0(a1, a2);
          sub_1470A9980(v25, *v24, (unsigned __int16)*v50, v20, (__int64)v52);
        }
      }
      goto LABEL_34;
    }
  }
  if ( !v10 )
    goto LABEL_32;
  sub_1403A5650(v56);
  v27 = sub_140393040(v20, a3);
  v46 = 0;
LABEL_33:
  v22 = a1;
  v48 = v27;
LABEL_34:
  v28 = v55 + 2736;
  v29 = sub_1403E4B00(v55 + 2736);
  if ( !v29 )
    v29 = allocWithProfilerInfo(0x28u, 0);
  *(_BYTE *)(v29 + 24) = 11;
  *(_QWORD *)v29 = 0;
  *(_QWORD *)(v29 + 8) = 0;
  *(_QWORD *)(v29 + 16) = 0;
  sub_140361940(v29 + 32);
  *(_QWORD *)(v29 + 8) = v53;
  *(_QWORD *)(v29 + 16) = v28;
  sub_14037B530(v29 + 32, a3);
  n2816 = 2816;
  v60 = 0;
  v61 = 0;
  v63 = 0;
  v64 = 0;
  v65 = 0;
  v62 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v30 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v31 = *(_QWORD *)v29;
      sub_14704B550(v30, v29);
      v29 = v31;
    }
    while ( v31 );
    goto LABEL_38;
  }
  v32 = 4 * v19 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(v32 + qword_15146BC68));
  v33 = (_DWORD *)(v16 + 66224 * v19 + 1472);
  _m_prefetchw(v33 + 1);
  v34 = _InterlockedOr(v33 + 1, 1u);
  if ( (v34 & 1) != 0 )
  {
    while ( 1 )
    {
      v35 = _InterlockedCompareExchange(v33 + 1, v34 + 2, v34);
      if ( v34 == v35 )
        break;
      if ( (v35 & 1) != 0 )
      {
        v34 = v35;
      }
      else
      {
        _m_prefetchw(v33 + 1);
        v34 = _InterlockedOr(v33 + 1, 1u);
        if ( (v34 & 1) == 0 )
          goto LABEL_44;
      }
    }
    v41 = (unsigned __int16)v34 >> 1;
    v42 = &v33[4 * (v41 & 0xFFF) + 4];
    if ( (*v42 & 0x7FFF) != (((_WORD)v41 - 4096) & 0x7FFF) )
      sub_1470B7790(v33, &v33[4 * (v41 & 0xFFF) + 4]);
    *((_QWORD *)v42 + 1) = v29;
    v43 = _InterlockedExchange(v42 + 1, v41);
    if ( (v43 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v33, v42 + 1, v43);
LABEL_38:
    v63 = __rdtsc();
    qword_149A05E08(&n2816);
    goto LABEL_63;
  }
LABEL_44:
  *v33 = *(_DWORD *)(sub_1402C8360() + 24);
  do
  {
    v36 = qword_15146BC68;
    v37 = 0;
    if ( v29 )
    {
      do
      {
        v38 = *(_QWORD *)v29;
        sub_14704B550(v36, v29);
        ++v37;
        v29 = v38;
      }
      while ( v38 );
    }
    v39 = v33[1];
    v40 = v33[2] & 0x7FFF;
    if ( (unsigned __int16)v39 >> 1 == v40 )
    {
      *v33 = -1;
      if ( v39 == _InterlockedCompareExchange(v33 + 1, v39 & 0xFFFFFFFE, v39) )
      {
        v29 = 0;
        goto LABEL_59;
      }
      *v33 = *(_DWORD *)(sub_1402C8360() + 24);
    }
    ++v33[2];
    v44 = &v33[4 * (v40 & 0xFFF) + 4];
    if ( (v44[1] & 0x7FFF) != v40 )
      sub_1470B7790(v33, v44 + 1);
    v29 = *((_QWORD *)v44 + 1);
    v45 = _InterlockedExchange(v44, v40);
    if ( (v45 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v33, v44, v45);
LABEL_59:
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v32), -v37) == v37 )
      qword_1499F5478(v32 + qword_15146BC68);
  }
  while ( v29 );
  v63 = __rdtsc();
  qword_149A05E08(&n2816);
  v22 = a1;
LABEL_63:
  sub_1470918C0(v53, a5, v56, v46);
  sub_140374510(v51);
  if ( !v49 )
    sub_1402D42F0(v22 + 8);
  if ( !a4 )
    sub_14707E720(v22, (unsigned __int16)*v50, v52);
  if ( (_QWORD)v57 )
    sub_1403A4F10(&v57, v57, (v58 - v57) & 0xFFFFFFFFFFFFFFE0uLL);
  return v48;
}

// --- End Function: sub_14702D720 (0x14702D720) ---

// --- Function: sub_14702FB10 (0x14702FB10) ---
char __fastcall sub_14702FB10(__int64 a1, __int64 a2, __int64 a3, char a4)
{
  unsigned __int64 v4; // rcx
  char v5; // si
  __int64 v6; // rbp
  __int64 v7; // rdi
  unsigned int *v8; // rbx
  unsigned __int64 v9; // r8
  unsigned int *v10; // r11
  __int64 v11; // r9
  __int64 v12; // r10
  __int64 v13; // r8
  __int64 v14; // rdx
  __int64 v15; // rax
  __int64 v16; // rax
  __int64 v17; // r11
  unsigned __int64 v18; // r10
  __int64 v19; // r13
  __int64 v20; // r9
  __int64 v21; // r8
  __int64 v22; // rdx
  __int64 v23; // rax
  __int64 v24; // r14
  __int64 v25; // r15
  unsigned __int64 v26; // rbp
  __int64 v27; // r12
  __int64 v28; // rdx
  __int64 v29; // r8
  __int64 v30; // rdi
  __int64 v31; // rbx
  __int64 v32; // rsi
  __int64 v33; // rax
  __int64 v34; // r8
  unsigned __int64 v36; // [rsp+20h] [rbp-78h]
  unsigned __int64 v37; // [rsp+28h] [rbp-70h]
  unsigned int *v38; // [rsp+30h] [rbp-68h]
  __int64 v39; // [rsp+38h] [rbp-60h]
  __int64 v40; // [rsp+40h] [rbp-58h] BYREF
  int v41; // [rsp+48h] [rbp-50h]
  __int64 v42; // [rsp+50h] [rbp-48h] BYREF
  int v43; // [rsp+58h] [rbp-40h]

  LOWORD(v4) = 0;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  v37 = 0;
  if ( !*(_DWORD *)(a2 + 700) )
    return 0;
  while ( 1 )
  {
    if ( (unsigned __int16)v4 >= (unsigned __int64)((*(_QWORD *)(v7 + 632) - *(_QWORD *)(v7 + 624)) / 48LL) )
      __debugbreak();
    v8 = (unsigned int *)(*(_QWORD *)(v7 + 624) + 48LL * (unsigned __int16)v4);
    v38 = v8;
    v9 = *((unsigned __int16 *)v8 + 7);
    if ( v9 >= (*(_QWORD *)(v7 + 608) - *(_QWORD *)(v7 + 600)) / 168LL )
      __debugbreak();
    v10 = (unsigned int *)(*(_QWORD *)(v7 + 600) + 168 * v9);
    if ( v8[8] )
    {
      v11 = v8[9];
      if ( (_DWORD)v11 )
      {
        v12 = *((_QWORD *)v8 + 3);
        v13 = 0;
        while ( 1 )
        {
          v14 = *(unsigned int *)((unsigned int)v13 + v12 + 28);
          if ( v14 == *(_DWORD *)((unsigned int)v13 + v12 + 32) )
            break;
          v15 = v13 + (unsigned int)(32 * v14 + 36);
          v13 = v15;
          if ( v15 == v11 || v15 == -1 )
            goto LABEL_39;
        }
      }
      v16 = sub_147062080(v6, *v10, *v8);
      v39 = v16;
      v17 = v16;
      if ( v16 )
      {
        v18 = *(unsigned int *)(v16 + 32);
        if ( (_DWORD)v18 )
        {
          v19 = *(unsigned int *)(v16 + 36);
          if ( (_DWORD)v19 )
          {
            v20 = *(_QWORD *)(v16 + 24);
            v21 = 0;
            while ( 1 )
            {
              v22 = *(unsigned int *)((unsigned int)v21 + v20 + 28);
              if ( v22 == *(_DWORD *)((unsigned int)v21 + v20 + 32) )
                break;
              v23 = v21 + (unsigned int)(32 * v22 + 36);
              v21 = v23;
              if ( v23 == v19 || v23 == -1 )
                goto LABEL_39;
            }
          }
          if ( !v5 )
            return 1;
          v24 = 0;
          v36 = v8[8];
          if ( v8[8] )
            break;
        }
      }
    }
LABEL_39:
    v4 = v37 + 1;
    v37 = v4;
    if ( v4 >= *(unsigned int *)(v7 + 700) )
      return 0;
  }
  v25 = *((_QWORD *)v8 + 3);
  v26 = v18;
  v27 = v25;
LABEL_24:
  v28 = 0;
  v29 = (unsigned __int16)v24;
  if ( (_WORD)v24 )
  {
    do
    {
      v28 += (unsigned int)(32 * *(_DWORD *)((unsigned int)v28 + v27 + 28) + 36);
      if ( v28 == v8[9] )
        v28 = -1;
      --v29;
    }
    while ( v29 );
    v25 = v27;
  }
  v30 = 0;
  v40 = v25;
  v41 = v28;
  v31 = *(_QWORD *)(v17 + 24);
  v32 = v31;
  while ( 1 )
  {
    v33 = 0;
    v34 = (unsigned __int16)v30;
    if ( (_WORD)v30 )
    {
      do
      {
        v33 += (unsigned int)(32 * *(_DWORD *)((unsigned int)v33 + v32 + 28) + 36);
        if ( v33 == v19 )
          v33 = -1;
        --v34;
      }
      while ( v34 );
      v31 = v32;
    }
    v42 = v31;
    v43 = v33;
    if ( (unsigned __int8)sub_1470677E0(&v42, &v40) )
      return 1;
    if ( ++v30 >= v26 )
    {
      v8 = v38;
      v17 = v39;
      if ( ++v24 < v36 )
        goto LABEL_24;
      v7 = a2;
      v5 = a4;
      v6 = a3;
      goto LABEL_39;
    }
  }
}

// --- End Function: sub_14702FB10 (0x14702FB10) ---

// --- Function: sub_14702FE10 (0x14702FE10) ---
char __fastcall sub_14702FE10(__int64 a1, __int64 a2)
{
  __int64 v3; // rcx
  __int64 v4; // rax
  __int64 v5; // rcx
  char v7; // [rsp+30h] [rbp+8h] BYREF

  if ( a2 )
    v3 = *(_QWORD *)(*(__int64 (__fastcall **)(__int64, char *))(*(_QWORD *)a2 + 24LL))(a2, &v7);
  else
    v3 = 0;
  *(_QWORD *)(*(_QWORD *)(a1 + 10486088) + 400LL) = v3;
  LOBYTE(v4) = is_valid_handle_typeB((unsigned __int64 *)(*(_QWORD *)(a1 + 10486088) + 400LL));
  if ( (_BYTE)v4 )
  {
    v5 = *(_QWORD *)(*(_QWORD *)(a1 + 10486088) + 400LL) & 0xFFFFFFFFFFFFLL;
    v4 = *(_QWORD *)(*(__int64 (__fastcall **)(__int64, char *))(*(_QWORD *)v5 + 8LL))(v5, &v7);
    *(_QWORD *)(*(_QWORD *)(a1 + 10486088) + 408LL) = v4;
  }
  return v4;
}

// --- End Function: sub_14702FE10 (0x14702FE10) ---

// --- Function: sub_147030080 (0x147030080) ---
__int64 sub_147030080()
{
  __int64 result; // rax

  result = sub_1402C8360();
  ++*(_BYTE *)(*(_QWORD *)(result + 16) + 56LL);
  return result;
}

// --- End Function: sub_147030080 (0x147030080) ---

// --- Function: sub_1470300A0 (0x1470300A0) ---
__int64 __fastcall sub_1470300A0(__int64 a1)
{
  __int64 result; // rax

  (*(void (__fastcall **)(__int64))(*(_QWORD *)qword_149A0A310 + 304LL))(qword_149A0A310);
  result = sub_1403DE6F0(a1 + 8, "BeginZoneHostUpdates");
  *(_DWORD *)(a1 + 16) = -3;
  *(_BYTE *)(a1 + 10486096) = 1;
  return result;
}

// --- End Function: sub_1470300A0 (0x1470300A0) ---

// --- Function: sub_147035F40 (0x147035F40) ---
__int64 __fastcall sub_147035F40(__int64 a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  char v8; // [rsp+40h] [rbp-18h] BYREF

  return sub_147035A50((unsigned int)&v8, a2, a3, a4, a5, a6, a7);
}

// --- End Function: sub_147035F40 (0x147035F40) ---

// --- Function: sub_147035F60 (0x147035F60) ---
bool __fastcall sub_147035F60(__int64 a1, double *a2, float a3, double *a4, float a5, float a6, float a7)
{
  double v7; // xmm4_8
  double v8; // xmm5_8
  double v11; // xmm3_8
  double v15; // xmm2_8

  v7 = a2[1] - a4[1];
  v8 = a2[2] - a4[2];
  _XMM3 = COERCE_UNSIGNED_INT64((*a2 - *a4) * (*a2 - *a4) + v7 * v7 + v8 * v8);
  __asm { vmovddup xmm1, xmm3 }
  v11 = a2[3];
  __asm
  {
    vsqrtpd xmm2, xmm1
    vunpckhpd xmm2, xmm2, xmm2
  }
  if ( *(double *)&_XMM2 >= v11 )
    v15 = *(double *)&_XMM2 - v11;
  else
    v15 = 0.0;
  _XMM2 = COERCE_UNSIGNED_INT64(a6 * v15);
  __asm { vmaxsd  xmm0, xmm2, cs:qword_1480E9A08 }
  return a5 * (a3 * v11 / *(double *)&_XMM0) * (a5 * (a3 * v11 / *(double *)&_XMM0)) >= a7;
}

// --- End Function: sub_147035F60 (0x147035F60) ---

// --- Function: sub_147036020 (0x147036020) ---
char __fastcall sub_147036020(__int64 a1, double *a2, int a3, __int64 *a4)
{
  __int64 v4; // r11
  unsigned int v5; // r8d
  __int64 v7; // rax
  __int64 v8; // rcx
  unsigned __int64 v9; // rdx
  double *i; // rax

  v4 = *a4;
  v5 = a3 + 24;
  if ( v5 == -1 )
    return 0;
  while ( 1 )
  {
    v7 = v5;
    v8 = 0;
    v9 = *(unsigned int *)(v5 + v4 + 4);
    v5 = *(_DWORD *)(v5 + v4);
    if ( !v9 )
      break;
    for ( i = (double *)(v4 + v7 + 24); *a2 * *(i - 2) + a2[1] * *(i - 1) + a2[2] * *i + i[1] <= a2[3]; i += 4 )
    {
      if ( ++v8 >= v9 )
        return 1;
    }
    if ( v5 == -1 )
      return 0;
  }
  return 1;
}

// --- End Function: sub_147036020 (0x147036020) ---

// --- Function: sub_14703D3E0 (0x14703D3E0) ---
double *__fastcall sub_14703D3E0(__int64 a1, double *a2, __int64 _RSI_1, __int64 _RSI)
{
  double v7; // xmm6_8
  double v8; // xmm5_8
  double v9; // xmm4_8
  double v10; // xmm14_8
  double v11; // xmm15_8
  double v12; // xmm13_8
  double v13; // xmm12_8
  double v14; // xmm6_8
  double v15; // xmm5_8
  double v16; // xmm4_8
  double v17; // xmm9_8
  double v18; // xmm8_8
  double v19; // xmm10_8
  double v20; // xmm0_8
  double _RBX__1; // xmm6_8
  double v22; // kr00_8
  double v23; // xmm5_8
  double v24; // xmm11_8
  double v25; // xmm7_8
  double v26; // kr00_8
  double v27; // xmm0_8
  double v28; // xmm1_8
  double v30; // [rsp+30h] [rbp-D0h]
  double v31; // [rsp+38h] [rbp-C8h]
  double v32; // [rsp+40h] [rbp-C0h]
  double v33; // [rsp+48h] [rbp-B8h]
  double v34; // [rsp+50h] [rbp-B0h]
  int n2816; // [rsp+60h] [rbp-A0h] BYREF
  __int64 v36; // [rsp+64h] [rbp-9Ch]
  int v37; // [rsp+6Ch] [rbp-94h]
  __int64 v38; // [rsp+70h] [rbp-90h]
  unsigned __int64 v39; // [rsp+78h] [rbp-88h]
  __int64 v40; // [rsp+80h] [rbp-80h]
  __int64 v41; // [rsp+88h] [rbp-78h]
  double _RBX_1; // [rsp+B0h] [rbp-50h] BYREF
  double v43; // [rsp+B8h] [rbp-48h]
  double v44; // [rsp+C0h] [rbp-40h]
  double v45; // [rsp+C8h] [rbp-38h]
  __int64 v46; // [rsp+D0h] [rbp-30h]
  __int64 v47; // [rsp+D8h] [rbp-28h]
  __int64 v48; // [rsp+E0h] [rbp-20h]
  double _RBX_; // [rsp+E8h] [rbp-18h] BYREF
  double v50; // [rsp+F0h] [rbp-10h]
  double v51; // [rsp+F8h] [rbp-8h]
  double v52; // [rsp+100h] [rbp+0h]
  double v53; // [rsp+108h] [rbp+8h]
  double v54; // [rsp+110h] [rbp+10h]
  double v55; // [rsp+118h] [rbp+18h]
  double v56; // [rsp+1F0h] [rbp+F0h]
  double v57; // [rsp+1F8h] [rbp+F8h]

  n2816 = 2816;
  v36 = 0;
  v37 = 0;
  v39 = 0;
  v40 = 0;
  v41 = 0;
  v38 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( _RSI_1 == _RSI )
  {
    *a2 = 0.0;
    a2[3] = 1.0;
    a2[1] = 0.0;
    a2[2] = 0.0;
    a2[4] = 0.0;
    a2[5] = 0.0;
    a2[6] = 0.0;
  }
  else
  {
    CZone::GetTransform_ws(_RSI, &_RBX_1, dword_149A0A48C);
    CZone::GetTransform_ws(_RSI_1, &_RBX_, dword_149A0A48C);
    *(_QWORD *)&v30 = *(_QWORD *)&v43 ^ 0x8000000000000000uLL;
    *(_QWORD *)&v56 = *(_QWORD *)&v44 ^ 0x8000000000000000uLL;
    v7 = v44 * COERCE_DOUBLE(v47 ^ 0x8000000000000000uLL)
       - v43 * COERCE_DOUBLE(v48 ^ 0x8000000000000000uLL)
       + v45 * COERCE_DOUBLE(v46 ^ 0x8000000000000000uLL);
    v8 = _RBX_1 * COERCE_DOUBLE(v48 ^ 0x8000000000000000uLL)
       - v44 * COERCE_DOUBLE(v46 ^ 0x8000000000000000uLL)
       + v45 * COERCE_DOUBLE(v47 ^ 0x8000000000000000uLL);
    *(_QWORD *)&v31 = v46 ^ 0x8000000000000000uLL;
    v9 = v43 * COERCE_DOUBLE(v46 ^ 0x8000000000000000uLL)
       - _RBX_1 * COERCE_DOUBLE(v47 ^ 0x8000000000000000uLL)
       + v45 * COERCE_DOUBLE(v48 ^ 0x8000000000000000uLL);
    v10 = v44 * v8 - v43 * v9;
    v11 = _RBX_1 * v9 - v44 * v7;
    v33 = v43 * v7 - _RBX_1 * v8;
    *(_QWORD *)&v34 = v48 ^ 0x8000000000000000uLL;
    v12 = v54;
    *(_QWORD *)&v32 = v47 ^ 0x8000000000000000uLL;
    v13 = v53;
    v14 = COERCE_DOUBLE(*(_QWORD *)&v43 ^ 0x8000000000000000uLL) * v55
        - COERCE_DOUBLE(*(_QWORD *)&v44 ^ 0x8000000000000000uLL) * v54
        + v45 * v53;
    v15 = COERCE_DOUBLE(*(_QWORD *)&v44 ^ 0x8000000000000000uLL) * v53
        - COERCE_DOUBLE(*(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL) * v55
        + v45 * v54;
    *(_QWORD *)&v57 = *(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL;
    v16 = COERCE_DOUBLE(*(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL) * v54
        - COERCE_DOUBLE(*(_QWORD *)&v43 ^ 0x8000000000000000uLL) * v53
        + v45 * v55;
    v17 = COERCE_DOUBLE(*(_QWORD *)&v43 ^ 0x8000000000000000uLL) * v16
        - COERCE_DOUBLE(*(_QWORD *)&v44 ^ 0x8000000000000000uLL) * v15;
    v18 = v51;
    v19 = v14 * COERCE_DOUBLE(*(_QWORD *)&v44 ^ 0x8000000000000000uLL)
        - COERCE_DOUBLE(*(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL) * v16;
    v20 = v14 * COERCE_DOUBLE(*(_QWORD *)&v43 ^ 0x8000000000000000uLL);
    _RBX__1 = _RBX_;
    v22 = COERCE_DOUBLE(*(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL) * v15;
    v23 = v52;
    v24 = v22 - v20;
    v25 = v50;
    v26 = _RBX_ * COERCE_DOUBLE(*(_QWORD *)&v44 ^ 0x8000000000000000uLL)
        - v51 * COERCE_DOUBLE(*(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL);
    v27 = v52 * COERCE_DOUBLE(*(_QWORD *)&v43 ^ 0x8000000000000000uLL);
    *a2 = COERCE_DOUBLE(*(_QWORD *)&v43 ^ 0x8000000000000000uLL) * v51
        - v50 * COERCE_DOUBLE(*(_QWORD *)&v44 ^ 0x8000000000000000uLL)
        + _RBX_ * v45
        + v52 * COERCE_DOUBLE(*(_QWORD *)&_RBX_1 ^ 0x8000000000000000uLL);
    a2[1] = v26 + v25 * v45 + v27;
    v28 = v23 * v45;
    a2[2] = v25 * v57 - _RBX__1 * v30 + v18 * v45 + v23 * v56;
    a2[3] = v28 - _RBX__1 * v57 - v25 * v30 - v18 * v56;
    a2[4] = v10 + v31 + v10 + v13 + v17 + v17;
    a2[5] = v11 + v32 + v11 + v12 + v19 + v19;
    a2[6] = v33 + v34 + v33 + v24 + v55 + v24;
  }
  v39 = __rdtsc();
  qword_149A05E08(&n2816);
  return a2;
}

// --- End Function: sub_14703D3E0 (0x14703D3E0) ---

// --- Function: sub_14703D830 (0x14703D830) ---
double *__fastcall sub_14703D830(__int64 a1, double *a2, __int64 _RDI, __int64 _RDI_1)
{
  __int64 v7; // rcx
  double v8; // xmm15_8
  double v10; // xmm7_8
  double v11; // xmm4_8
  double v12; // xmm8_8
  double v13; // xmm11_8
  double v14; // xmm12_8
  double v15; // xmm10_8
  double v16; // xmm9_8
  double v17; // xmm2_8
  double v19; // xmm6_8
  double v20; // xmm5_8
  double v21; // xmm4_8
  double v22; // xmm8_8
  double v23; // kr00_8
  double v24; // xmm4_8
  double v25; // xmm7_8
  double v26; // xmm1_8
  double v27; // xmm6_8
  double v28; // xmm5_8
  double v29; // xmm1_8
  double v30; // xmm2_8
  double v31; // xmm4_8
  double v33; // xmm1_8
  int n2816; // [rsp+30h] [rbp-138h] BYREF
  __int64 v37; // [rsp+34h] [rbp-134h]
  int v38; // [rsp+3Ch] [rbp-12Ch]
  __int64 v39; // [rsp+40h] [rbp-128h]
  unsigned __int64 v40; // [rsp+48h] [rbp-120h]
  __int64 v41; // [rsp+50h] [rbp-118h]
  __int64 v42; // [rsp+58h] [rbp-110h]

  n2816 = 2816;
  v37 = 0;
  v38 = 0;
  v40 = 0;
  v41 = 0;
  v42 = 0;
  v39 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( _RDI == _RDI_1 )
  {
    *a2 = 0.0;
    a2[3] = 1.0;
    a2[1] = 0.0;
    a2[2] = 0.0;
    a2[4] = 0.0;
    a2[5] = 0.0;
    a2[6] = 0.0;
    v40 = __rdtsc();
    qword_149A05E08(&n2816);
  }
  else
  {
    v7 = qword_15146BC68;
    if ( *(_DWORD *)(_RDI + 372) != *(_DWORD *)(qword_15146BC68 + 10486100) )
    {
      CZone::RefreshWorldSpacePosition(_RDI, dword_149A0A48C);
      v7 = qword_15146BC68;
    }
    if ( *(_DWORD *)(_RDI_1 + 372) != *(_DWORD *)(v7 + 10486100) )
      CZone::RefreshWorldSpacePosition(_RDI_1, dword_149A0A48C);
    v8 = *(double *)(_RDI_1 + 280);
    _XMM14 = *(_OWORD *)(_RDI + 232);
    v10 = *(double *)(_RDI_1 + 264);
    v11 = *(double *)(_RDI + 248);
    v12 = *(double *)(_RDI_1 + 256);
    v13 = *(double *)(_RDI + 208);
    v14 = *(double *)(_RDI + 216);
    v15 = *(double *)(_RDI + 200);
    v16 = *(double *)(_RDI + 224);
    v17 = *(double *)(_RDI_1 + 272);
    __asm { vunpckhpd xmm13, xmm14, xmm14 }
    v19 = v10 * v11 - v17 * *(double *)&_XMM13 + v8 * *(double *)&_XMM14;
    v20 = v17 * *(double *)&_XMM14 - v12 * v11 + v8 * *(double *)&_XMM13;
    v21 = v12 * *(double *)&_XMM13 - v10 * *(double *)&_XMM14 + v8 * v11;
    v22 = v19 * v17 - v21 * v12;
    v23 = v21 * v10;
    v24 = v10;
    v25 = v23 - v20 * v17;
    v26 = v19 * v24;
    v27 = *(double *)(_RDI_1 + 256);
    v28 = v20 * v27 - v26;
    v29 = v15 * v17;
    v30 = v14 * v24 - v13 * v17 + v15 * v8 + v16 * v27;
    v31 = *(double *)(_RDI_1 + 264);
    *a2 = v30;
    a2[1] = v29 - v14 * v27 + v13 * v8 + v16 * v31;
    a2[2] = v13 * v27 - v15 * v31 + v14 * v8 + v16 * *(double *)(_RDI_1 + 272);
    _XMM3 = *(_OWORD *)(_RDI_1 + 288);
    v33 = *(double *)&_XMM14 + v25 + *(double *)&_XMM3 + v25;
    a2[3] = v16 * v8 - v15 * v27 - v13 * v31 - v14 * *(double *)(_RDI_1 + 272);
    __asm { vunpckhpd xmm3, xmm3, xmm3 }
    a2[4] = v33;
    a2[5] = *(double *)&_XMM13 + v22 + *(double *)&_XMM3 + v22;
    a2[6] = v28 + *(double *)(_RDI + 248) + *(double *)(_RDI_1 + 304) + v28;
    v40 = __rdtsc();
    qword_149A05E08(&n2816);
  }
  return a2;
}

// --- End Function: sub_14703D830 (0x14703D830) ---

// --- Function: sub_147042980 (0x147042980) ---
__int64 __fastcall sub_147042980(__int64 a1, __int64 a2, __int64 a3)
{
  unsigned __int64 v4; // r10

  v4 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a3 + 3) + 10559896)
     + (*(_DWORD *)a3 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a3 + 3) + 10560336);
  sub_140361520(a2, *(unsigned __int16 *)(22LL * (*(_WORD *)(v4 + 8) & 0xF) + a1 + 10560360) + v4 + 48);
  return a2;
}

// --- End Function: sub_147042980 (0x147042980) ---

// --- Function: sub_147043980 (0x147043980) ---
__int64 __fastcall sub_147043980(
        __int64 a1,
        __int64 a2,
        unsigned __int8 a3,
        char a4,
        __int64 a5,
        __int64 a6,
        _QWORD *a7,
        __int64 a8)
{
  __int64 v9; // rbx
  int v11; // edi
  signed __int64 v12; // rax
  __int64 v13; // rax
  _QWORD *v14; // rdi
  __int64 v15; // rbp
  _QWORD *v16; // rdx
  _QWORD *v17; // r12
  int v18; // r15d
  int v19; // eax
  _QWORD *v20; // rbp
  unsigned int v21; // r15d
  __int64 v22; // r14
  __int64 v23; // rax
  __int64 v24; // r14
  int v25; // eax
  signed __int64 n0x200000; // rax
  int v28; // [rsp+20h] [rbp-68h]

  v9 = a1 + 8;
  v11 = *(_DWORD *)(sub_1402C8360() + 24);
  if ( *(_DWORD *)(v9 + 8) == v11 )
  {
    ++*(_DWORD *)(v9 + 12);
  }
  else
  {
    v12 = _InterlockedCompareExchange64((volatile signed __int64 *)v9, 0x200000, 0);
    if ( v12 )
      sub_1403DE750(v9, v12, 0, (unsigned int)"CZoneSystem::CreateZone", (__int64)"m_GlobalStateLock", 1);
    *(_DWORD *)(v9 + 8) = v11;
  }
  sub_1470B7660(a1);
  v13 = *(_QWORD *)(a1 + 10486048);
  v14 = (_QWORD *)(a1 + 10486016);
  if ( *(_QWORD *)(a1 + 10486040) == v13 )
  {
    v16 = *(_QWORD **)(a1 + 10486024);
    v15 = (__int64)(unsigned int)((_DWORD)v16 - *(_DWORD *)(a1 + 10486016)) >> 3;
    if ( v16 == *(_QWORD **)(a1 + 10486032) )
    {
      sub_140C4B610(a1 + 10486016);
    }
    else
    {
      *v16 = 0;
      *(_QWORD *)(a1 + 10486024) += 8LL;
    }
  }
  else
  {
    LOWORD(v15) = *(_WORD *)(v13 - 4);
    *(_QWORD *)(a1 + 10486048) = v13 - 4;
  }
  v17 = a7;
  v18 = *(unsigned __int16 *)(*v14 + 8LL * (unsigned __int16)v15 + 6) << 16;
  v19 = (unsigned __int16)v15;
  v20 = (_QWORD *)*a7;
  v21 = v19 | v18;
  if ( *a7 )
    sub_1405242F0(*a7);
  v22 = sub_1402A63D0(332752);
  v23 = 0;
  if ( v22 )
  {
    a7 = v20;
    if ( v20 )
      sub_1405242F0(v20);
    LOBYTE(v28) = a4;
    v23 = sub_14701BF40(v22, v21, a2, (unsigned __int16)(a3 + 1), v28, a5, a6, &a7, a8);
  }
  v24 = v23;
  if ( v20 )
    sub_140524310(v20, 0);
  *(_QWORD *)(*v14 + 8LL * (unsigned __int16)v21) = v24
                                                  ^ (*(_QWORD *)(*v14 + 8LL * (unsigned __int16)v21)
                                                   ^ v24)
                                                  & 0xFFFF000000000000uLL;
  sub_1470915A0(a1, v24);
  if ( v9 )
  {
    v25 = *(_DWORD *)(v9 + 12);
    if ( v25 )
    {
      *(_DWORD *)(v9 + 12) = v25 - 1;
    }
    else
    {
      *(_DWORD *)(v9 + 8) = -1;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v9, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        sub_1403DEBA0(v9, n0x200000);
    }
  }
  if ( *v17 )
    sub_140524310(*v17, 0);
  return v24;
}

// --- End Function: sub_147043980 (0x147043980) ---

// --- Function: sub_147043BA0 (0x147043BA0) ---
__int64 __fastcall sub_147043BA0(__int64 a1, char a2, __int64 a3, __int64 a4)
{
  if ( a4 )
    return a4;
  *(_BYTE *)(*(_QWORD *)(sub_1402C8360() + 16) + (a2 & 0xF) + 41LL) = 1;
  return a3;
}

// --- End Function: sub_147043BA0 (0x147043BA0) ---

// --- Function: sub_147043CA0 (0x147043CA0) ---
__int64 __fastcall sub_147043CA0(__int64 a1)
{
  __int64 v2; // rax
  __int64 v3; // rax
  _BYTE v5[8]; // [rsp+20h] [rbp-88h] BYREF
  _BYTE v6[8]; // [rsp+28h] [rbp-80h] BYREF
  _BYTE v7[8]; // [rsp+30h] [rbp-78h] BYREF
  _BYTE v8[8]; // [rsp+38h] [rbp-70h] BYREF
  _BYTE v9[8]; // [rsp+40h] [rbp-68h] BYREF
  _BYTE v10[8]; // [rsp+48h] [rbp-60h] BYREF
  _BYTE v11[8]; // [rsp+50h] [rbp-58h] BYREF
  _BYTE v12[8]; // [rsp+58h] [rbp-50h] BYREF
  _BYTE v13[8]; // [rsp+60h] [rbp-48h] BYREF
  _BYTE v14[48]; // [rsp+68h] [rbp-40h] BYREF

  if ( *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v5,
                   "EntityArea.TrackInArea") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v7,
                   "EntityArea.TrackInArea.GreenZone") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v8,
                   "EntityArea.TrackInArea.Room") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v9,
                   "EntityArea.TrackInArea.ActionArea") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v10,
                   "EntityArea.TrackInArea.AudioArea") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v11,
                   "EntityArea.TrackInArea.RestrictedArea") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v12,
                   "EntityArea.TrackInArea.ColorGradingArea") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v13,
                   "EntityArea.TrackInArea.JumpPoint") == 0xFFFF
    || *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
                   qword_149A0A288,
                   v6,
                   "EntityArea.TrackInArea.Jammer") == 0xFFFF )
  {
    LogFatalError(
      "No area tags found in the DataCore binary. Usually this is caused by a bad export. If you have local files, try de"
      "leting the two.dcb files in your 'Data' folder. And make sure you have everything from p4 inside 'Data/Libs/Foundr"
      "y', synced to the same CL as your build.");
  }
  v2 = (*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149A0A288 + 40LL))(
         qword_149A0A288,
         v6,
         "EntityArea.TrackInArea");
  sub_1403614E0(v5, v2);
  v3 = sub_140362C60(v14, v5);
  sub_14037B580(a1 + 10560592, v3);
  sub_140374530(v14);
  return sub_140374510(v5);
}

// --- End Function: sub_147043CA0 (0x147043CA0) ---

// --- Function: sub_147047A90 (0x147047A90) ---
void __fastcall sub_147047A90(__int64 a1, __int64 _RSI, __int64 a3, __int64 a4)
{
  volatile signed __int64 *v8; // rsi
  int v9; // ebx
  signed __int64 v10; // rax
  __int64 v11; // rbx
  __int64 v12; // rcx
  __int64 v13; // r8
  unsigned __int64 v14; // rdx
  unsigned __int64 v15; // rax
  __int64 v16; // r15
  unsigned __int64 v17; // rcx
  __int64 v18; // rbx
  unsigned __int64 v19; // rcx
  RtAudio::Api *_Whereptr; // rdx
  RtAudio::Api *__Val_0_; // r8
  RtAudio::Api *_Whereptr_1; // rdx
  RtAudio::Api *__Val_0__1; // r8
  __int64 v24; // r14
  unsigned __int64 v25; // rax
  _DWORD *v26; // rdx
  int v27; // eax
  signed __int64 n0x200000; // rax
  int n2816; // [rsp+38h] [rbp-69h] BYREF
  __int64 v30; // [rsp+3Ch] [rbp-65h]
  int v31; // [rsp+44h] [rbp-5Dh]
  __int64 v32; // [rsp+48h] [rbp-59h]
  unsigned __int64 v33; // [rsp+50h] [rbp-51h]
  __int64 v34; // [rsp+58h] [rbp-49h]
  __int64 v35; // [rsp+60h] [rbp-41h]
  int v36; // [rsp+88h] [rbp-19h]
  _BYTE v37[8]; // [rsp+90h] [rbp-11h] BYREF
  double _RBX_1[4]; // [rsp+98h] [rbp-9h] BYREF
  __int128 v39; // [rsp+B8h] [rbp+17h]
  double v40; // [rsp+C8h] [rbp+27h]

  if ( _RSI )
  {
    n2816 = 2816;
    v30 = 0;
    v31 = 0;
    v33 = 0;
    v34 = 0;
    v35 = 0;
    v32 = 1;
    qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
    v8 = (volatile signed __int64 *)(a1 + 8);
    v9 = *(_DWORD *)(sub_1402C8360() + 24);
    if ( *(_DWORD *)(a1 + 16) == v9 )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v10 = _InterlockedCompareExchange64(v8, 0x200000, 0);
      if ( v10 )
        sub_1403DE750(a1 + 8, v10, 0, (unsigned int)"CZoneSystem::DeleteZone", (__int64)"m_GlobalStateLock", 1);
      *(_DWORD *)(a1 + 16) = v9;
    }
    sub_1470B7660(a1);
    v36 = *(_DWORD *)(_RSI + 12);
    sub_14035C990(v37, (void *)(_RSI + 24));
    CZone::GetTransform_ws(_RSI, _RBX_1, dword_149A0A48C);
    v11 = 9LL * *(_QWORD *)(a1 + 10559888);
    v12 = a1 + 10486168 + 72LL * *(_QWORD *)(a1 + 10559888);
    *(_DWORD *)(a1 + 72LL * *(_QWORD *)(a1 + 10559888) + 10486160) = v36;
    sub_1403798F0(v12, v37);
    *(double *)(a1 + 8 * v11 + 10486176) = _RBX_1[0];
    *(double *)(a1 + 8 * v11 + 10486184) = _RBX_1[1];
    *(double *)(a1 + 8 * v11 + 10486192) = _RBX_1[2];
    *(double *)(a1 + 8 * v11 + 10486200) = _RBX_1[3];
    *(_OWORD *)(a1 + 8 * v11 + 10486208) = v39;
    *(double *)(a1 + 8 * v11 + 10486224) = v40;
    sub_1403727A0(v37);
    *(_QWORD *)(a1 + 10559888) = ((unsigned __int16)*(_QWORD *)(a1 + 10559888) + 1) & 0x3FF;
    sub_14707B730(_RSI, a3, a4);
    v13 = *(_QWORD *)(a1 + 10486064);
    v14 = (*(_QWORD *)(a1 + 10486072) - v13) >> 7;
    while ( (__int64)v14 > 0 )
    {
      v15 = v14 >> 1 << 7;
      if ( *(_DWORD *)(v15 + v13 + 120) >= *(_DWORD *)(_RSI + 12) )
      {
        v14 >>= 1;
      }
      else
      {
        v13 += v15 + 128;
        v14 += -1LL - (v14 >> 1);
      }
    }
    *(_DWORD *)(v13 + 116) = dword_149A0A48C;
    v16 = *(_QWORD *)(a1 + 10486016);
    v17 = *(unsigned int *)(_RSI + 12);
    v18 = (unsigned __int16)v17;
    v19 = v17 >> 16;
    if ( (*(_QWORD *)(v16 + 8 * v18) & 0xFFFFFFFFFFFFLL) != _RSI )
      __debugbreak();
    if ( *(unsigned __int16 *)(v16 + 8 * v18 + 6) != v19 )
      __debugbreak();
    _Whereptr = *(RtAudio::Api **)(a1 + 10486120);
    __Val_0_ = (RtAudio::Api *)(_RSI + 16);
    if ( _Whereptr == *(RtAudio::Api **)(a1 + 10486128) )
    {
      std::vector<enum RtAudio::Api>::_Emplace_reallocate<enum RtAudio::Api>(
        (std::vector<enum RtAudio::Api> *)(a1 + 10486112),
        _Whereptr,
        __Val_0_);
    }
    else
    {
      *(_DWORD *)_Whereptr = *(_DWORD *)__Val_0_;
      *(_QWORD *)(a1 + 10486120) += 4LL;
    }
    _Whereptr_1 = *(RtAudio::Api **)(a1 + 10486144);
    __Val_0__1 = (RtAudio::Api *)(_RSI + 20);
    if ( _Whereptr_1 == *(RtAudio::Api **)(a1 + 10486152) )
    {
      std::vector<enum RtAudio::Api>::_Emplace_reallocate<enum RtAudio::Api>(
        (std::vector<enum RtAudio::Api> *)(a1 + 10486136),
        _Whereptr_1,
        __Val_0__1);
    }
    else
    {
      *(_DWORD *)_Whereptr_1 = *(_DWORD *)__Val_0__1;
      *(_QWORD *)(a1 + 10486144) += 4LL;
    }
    v24 = *(_QWORD *)(v16 + 8 * v18) & 0xFFFFFFFFFFFFLL;
    if ( v24 )
    {
      sub_147021440(*(_QWORD *)(v16 + 8 * v18) & 0xFFFFFFFFFFFFLL);
      sub_1402A63C0(v24, 332752);
    }
    v25 = *(_QWORD *)(v16 + 8 * v18) & 0xFFFF000000000000uLL;
    *(_QWORD *)(v16 + 8 * v18) = v25;
    *(_WORD *)(v16 + 8 * v18 + 6) = HIWORD(v25) + 1;
    v26 = *(_DWORD **)(a1 + 10486048);
    if ( v26 == *(_DWORD **)(a1 + 10486056) )
    {
      sub_1403463D0((std::allocator<int> *)(a1 + 10486040), v26);
    }
    else
    {
      *v26 = v18;
      *(_QWORD *)(a1 + 10486048) += 4LL;
    }
    if ( a1 != -8 )
    {
      v27 = *(_DWORD *)(a1 + 20);
      if ( v27 )
      {
        *(_DWORD *)(a1 + 20) = v27 - 1;
      }
      else
      {
        *(_DWORD *)(a1 + 16) = -1;
        n0x200000 = _InterlockedCompareExchange64(v8, 0, 0x200000);
        if ( n0x200000 != 0x200000 )
          sub_1403DEBA0(a1 + 8, n0x200000);
      }
    }
    v33 = __rdtsc();
    qword_149A05E08(&n2816);
  }
}

// --- End Function: sub_147047A90 (0x147047A90) ---

// --- Function: sub_147047E00 (0x147047E00) ---
__int64 __fastcall sub_147047E00(__int64 a1, __int64 a2)
{
  int v4; // eax
  __int64 v5; // rdi
  __int64 v6; // rax
  unsigned __int64 v7; // kr00_8
  bool v8; // cf
  __int64 v9; // rax
  _QWORD *v10; // rax
  _QWORD *v11; // rsi
  _QWORD *i; // rax
  _QWORD *v13; // rax
  _QWORD *v14; // rax
  _QWORD *v15; // rax
  __int64 v16; // rbx
  __int64 (__fastcall *p_sub_147031440)(); // [rsp+28h] [rbp-89h] BYREF
  __int64 (__fastcall *n2)(); // [rsp+30h] [rbp-81h]
  _QWORD *v20; // [rsp+38h] [rbp-79h]
  __int64 (__fastcall *p_sub_1470318E0)(); // [rsp+40h] [rbp-71h] BYREF
  __int64 (__fastcall *n2_1)(); // [rsp+48h] [rbp-69h]
  _QWORD *v23; // [rsp+50h] [rbp-61h]
  __int64 (__fastcall *p_sub_147031A40)(); // [rsp+58h] [rbp-59h] BYREF
  __int64 (__fastcall *n2_2)(); // [rsp+60h] [rbp-51h]
  _QWORD *v26; // [rsp+68h] [rbp-49h]

  v4 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)qword_149A0A388 + 24LL))(qword_149A0A388);
  v5 = v4;
  v7 = v4;
  v6 = 24LL * v4;
  if ( !is_mul_ok(v7, 0x18u) )
    v6 = -1;
  v8 = __CFADD__(v6, 8);
  v9 = v6 + 8;
  if ( v8 )
    v9 = -1;
  v10 = (_QWORD *)sub_1402A63D0(v9);
  if ( v10 )
  {
    *v10 = v5;
    v11 = v10 + 1;
    for ( i = v10 + 1; v5; --v5 )
    {
      *i = 0;
      i[1] = 0;
      i[2] = 0;
      i += 3;
    }
  }
  else
  {
    v11 = 0;
  }
  sub_1402B38B0(&p_sub_147031440, 15, 0, "DensityManager_FetchAllZonePartitions");
  if ( (unsigned __int64)n2 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2)(2, &p_sub_147031440);
    n2 = 0;
  }
  p_sub_147031440 = 0;
  v13 = (_QWORD *)sub_1402A63D0(8);
  if ( v13 )
  {
    *v13 = a1;
    v20 = v13;
  }
  else
  {
    v20 = 0;
  }
  p_sub_147031440 = sub_147031440;
  n2 = sub_147032310;
  if ( (unsigned __int64)n2_1 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_1)(2, &p_sub_1470318E0);
    n2_1 = 0;
  }
  p_sub_1470318E0 = 0;
  v14 = (_QWORD *)sub_1402A63D0(16);
  if ( v14 )
  {
    *v14 = a1;
    v14[1] = v11;
    v23 = v14;
  }
  else
  {
    v23 = 0;
  }
  p_sub_1470318E0 = sub_1470318E0;
  n2_1 = sub_147033090;
  if ( (unsigned __int64)n2_2 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_2)(2, &p_sub_147031A40);
    n2_2 = 0;
  }
  p_sub_147031A40 = 0;
  v15 = (_QWORD *)sub_1402A63D0(16);
  if ( v15 )
  {
    *v15 = v11;
    v15[1] = a2;
    v26 = v15;
  }
  else
  {
    v26 = 0;
  }
  p_sub_147031A40 = sub_147031A40;
  n2_2 = sub_147033670;
  v16 = (*(__int64 (__fastcall **)(__int64, __int64 (__fastcall **)()))(*(_QWORD *)qword_149A0A388 + 40LL))(
          qword_149A0A388,
          &p_sub_147031440);
  sub_1402B6940(&p_sub_147031440);
  return v16;
}

// --- End Function: sub_147047E00 (0x147047E00) ---

// --- Function: sub_147048010 (0x147048010) ---
__int64 __fastcall sub_147048010(__int64 a1, __int64 a2, unsigned int a3, __int64 a4)
{
  __int64 v7; // rbx
  int v9; // ecx
  unsigned __int64 v10; // rdi
  __int64 v11; // rbp
  __int64 v12; // rbp
  __int64 v13; // rax

  v7 = qword_1499B6B08 + 1056LL * (a3 & 0x3FFFFF);
  if ( *(_WORD *)(v7 + 560) != a3 >> 22 )
  {
    *(_QWORD *)a2 = -1;
    return a2;
  }
  v9 = *(_DWORD *)(v7 + 564);
  v10 = 0;
  if ( v9 != -1 )
  {
    if ( (_WORD)v9 )
    {
      v12 = (unsigned __int16)v9;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v9 + 6) != HIWORD(v9) )
      {
        v11 = 0;
        goto LABEL_10;
      }
    }
    else
    {
      v12 = 0;
    }
    v11 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
    goto LABEL_10;
  }
  v11 = 0;
LABEL_10:
  if ( *(_DWORD *)(v7 + 620) )
  {
    do
    {
      v13 = p_sub_1470BC600(*(unsigned __int16 *)(v7 + 556), v11, v7, v10);
      (*(void (__fastcall **)(_QWORD, __int64))(a4 + 8))(*(_QWORD *)a4, v13);
      ++v10;
    }
    while ( v10 < *(unsigned int *)(v7 + 620) );
  }
  *(_DWORD *)a2 = *(_DWORD *)(v7 + 564);
  *(_DWORD *)(a2 + 4) = *(_DWORD *)(v7 + 568);
  return a2;
}

// --- End Function: sub_147048010 (0x147048010) ---

// --- Function: sub_147049170 (0x147049170) ---
void __fastcall sub_147049170(__int64 a1, int *a2, _DWORD *a3)
{
  __int64 v6; // rbx
  int v7; // r14d
  signed __int64 v8; // rax
  int v9; // ecx
  __int64 v10; // rcx
  __int64 v11; // rdx
  int v12; // eax
  signed __int64 n0x200000; // rax

  if ( *a2 == -1 || *a3 == -1 )
    return;
  v6 = a1 + 8;
  v7 = *(_DWORD *)(sub_1402C8360() + 24);
  if ( *(_DWORD *)(v6 + 8) == v7 )
  {
    ++*(_DWORD *)(v6 + 12);
  }
  else
  {
    v8 = _InterlockedCompareExchange64((volatile signed __int64 *)v6, 0x200000, 0);
    if ( v8 )
      sub_1403DE750(
        v6,
        v8,
        0,
        (unsigned int)"CZoneSystem::EnableAreaQueries_EditorOnly",
        (__int64)"m_GlobalStateLock",
        1);
    *(_DWORD *)(v6 + 8) = v7;
  }
  sub_1470B7660(a1);
  v9 = *a2;
  if ( *a2 == -1 )
  {
    v10 = 0;
    goto LABEL_15;
  }
  if ( (_WORD)v9 )
  {
    v11 = (unsigned __int16)v9;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v9 + 6) != HIWORD(v9) )
    {
      v10 = 0;
      goto LABEL_15;
    }
  }
  else
  {
    v11 = 0;
  }
  v10 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v11) & 0xFFFFFFFFFFFFLL;
LABEL_15:
  sub_147048900(v10, a3);
  if ( v6 )
  {
    v12 = *(_DWORD *)(v6 + 12);
    if ( v12 )
    {
      *(_DWORD *)(v6 + 12) = v12 - 1;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = -1;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v6, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        sub_1403DEBA0(v6, n0x200000);
    }
  }
}

// --- End Function: sub_147049170 (0x147049170) ---

// --- Function: sub_1470492A0 (0x1470492A0) ---
__int64 sub_1470492A0()
{
  __int64 result; // rax

  result = sub_1402C8360();
  --*(_BYTE *)(*(_QWORD *)(result + 16) + 56LL);
  return result;
}

// --- End Function: sub_1470492A0 (0x1470492A0) ---

// --- Function: sub_1470492C0 (0x1470492C0) ---
__int64 __fastcall sub_1470492C0(__int64 a1)
{
  ++*(_DWORD *)(a1 + 10486100);
  *(_BYTE *)(a1 + 10486096) = 0;
  *(_DWORD *)(a1 + 16) = -1;
  sub_1403DEB70();
  return (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)qword_149A0A310 + 312LL))(qword_149A0A310);
}

// --- End Function: sub_1470492C0 (0x1470492C0) ---

// --- Function: sub_14704FCB0 (0x14704FCB0) ---
__int64 __fastcall sub_14704FCB0(__int64 a1, __int64 a2, __int64 *a3)
{
  __int64 n0xFFFFFF; // rax
  __int64 v7; // rsi
  int v8; // edx
  unsigned __int64 v9; // rdx
  int v10; // ecx
  __int64 v11; // rdi
  __int64 v12; // rdi
  __int64 v13; // rcx
  int *v14; // rbp
  int *v15; // rbx
  int v16; // edx
  __int64 v17; // r8
  __int64 v18; // rax
  __int64 v19; // rcx
  __int64 v20; // [rsp+58h] [rbp+10h] BYREF

  n0xFFFFFF = *(_DWORD *)a2 & 0xFFFFFF;
  if ( (_DWORD)n0xFFFFFF == 0xFFFFFF )
    return n0xFFFFFF;
  v7 = a1 + 8;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
  {
    ++*(_DWORD *)(v7 + 12);
  }
  else
  {
    v8 = _InterlockedIncrement64((volatile signed __int64 *)v7);
    if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
      sub_1403CD0A0(v7, v8, (unsigned int)"CZoneSystem::ForEachArea", (unsigned int)"m_GlobalStateLock", 1);
  }
  v9 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v10 = *(_DWORD *)(v9 + 16);
  if ( v10 != -1 )
  {
    if ( (_WORD)v10 )
    {
      v12 = (unsigned __int16)v10;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
      {
        v11 = 0;
        goto LABEL_13;
      }
    }
    else
    {
      v12 = 0;
    }
    v11 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
    goto LABEL_13;
  }
  v11 = 0;
LABEL_13:
  v13 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560362);
  v14 = *(int **)(v13 + v9 + 56);
  v15 = *(int **)(v13 + v9 + 48);
  if ( v15 != v14 )
  {
    while ( 1 )
    {
      v16 = *v15;
      if ( !(unsigned __int16)*v15 )
        break;
      v17 = (unsigned __int16)v16;
      if ( *(_WORD *)(2896LL * (unsigned __int16)v16 + *(_QWORD *)(v11 + 480) + 2848) == HIWORD(v16) )
        goto LABEL_18;
      v18 = 0;
LABEL_19:
      v19 = *a3;
      v20 = *(_QWORD *)(v18 + 2824);
      ((void (__fastcall *)(__int64, __int64 *))a3[1])(v19, &v20);
      if ( ++v15 == v14 )
        return sub_1402D42F0(v7);
    }
    v17 = 0;
LABEL_18:
    v18 = *(_QWORD *)(v11 + 480) + 2896 * v17;
    goto LABEL_19;
  }
  return sub_1402D42F0(v7);
}

// --- End Function: sub_14704FCB0 (0x14704FCB0) ---

// --- Function: sub_14704FF90 (0x14704FF90) ---
__int64 __fastcall sub_14704FF90(__int64 a1, __int64 a2, unsigned __int16 n30770_1, unsigned int a4, __int64 a5)
{
  __int64 v5; // r12
  __int64 v6; // r14
  int v9; // edx
  volatile signed __int64 *v10; // r15
  signed __int64 v11; // rax
  __int64 v12; // rbx
  int i; // eax
  int v14; // ecx
  __int64 v15; // rax
  __int64 v16; // rdx
  int v17; // eax
  __int64 v18; // r8
  __int64 v19; // rcx
  _QWORD *v20; // r14
  __int64 **j; // rdi
  unsigned __int64 k; // rbx
  __int64 v23; // rax
  __int64 v24; // rsi
  __int64 v25; // rax
  signed __int64 n0x200000; // rax
  __int64 result; // rax
  _QWORD *v28; // rsi
  _QWORD *v29; // rbx
  __int64 v30; // rdi
  __int64 v31; // [rsp+30h] [rbp-48h] BYREF
  __int128 v32; // [rsp+38h] [rbp-40h] BYREF
  __int64 v33; // [rsp+48h] [rbp-30h]
  _QWORD v34[5]; // [rsp+50h] [rbp-28h] BYREF
  int v35; // [rsp+C0h] [rbp+48h] BYREF
  __int64 v36; // [rsp+C8h] [rbp+50h] BYREF
  unsigned __int16 n30770; // [rsp+D0h] [rbp+58h] BYREF
  unsigned int v38; // [rsp+D8h] [rbp+60h] BYREF

  v38 = a4;
  n30770 = n30770_1;
  v5 = a1 + 8;
  v6 = n30770_1 & 0xF;
  v32 = 0;
  v33 = 0;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
  {
    ++*(_DWORD *)(v5 + 12);
  }
  else
  {
    v9 = _InterlockedIncrement64((volatile signed __int64 *)v5);
    if ( (*(_QWORD *)&v9 & 0x200000LL) != 0 )
      sub_1403CD0A0(v5, v9, (unsigned int)"CZoneSystem::ForEachObjectInArea", (unsigned int)"m_GlobalStateLock", 1);
  }
  v10 = (volatile signed __int64 *)(a1 + 24 + 8 * v6);
  v11 = _InterlockedCompareExchange64(v10, 0x200000, 0);
  if ( v11 )
    sub_1403DE750(
      a1 + 24 + 8 * v6,
      v11,
      0,
      (unsigned int)"CZoneSystem::ForEachObjectInArea",
      (__int64)"m_CullingLock[nTypeIndex]",
      1);
  v12 = a1 + 4 * v6;
  for ( i = *(_DWORD *)(v12 + 10485976); i; i = *(_DWORD *)(a1 + 4 * v6 + 10485976) )
  {
    v35 = i;
    qword_1499F5468(v12 + 10485976, &v35, 4, 0xFFFFFFFFLL);
  }
  v14 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1904LL))(a2);
  if ( v14 == -1 )
  {
    v15 = 0;
    goto LABEL_16;
  }
  if ( (_WORD)v14 )
  {
    v16 = (unsigned __int16)v14;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
    {
      v15 = 0;
      goto LABEL_16;
    }
  }
  else
  {
    v16 = 0;
  }
  v15 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
LABEL_16:
  v36 = v15;
  v17 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1912LL))(a2);
  if ( (_WORD)v17 )
  {
    v18 = (unsigned __int16)v17;
    if ( *(_WORD *)(2896LL * (unsigned __int16)v17 + *(_QWORD *)(v36 + 480) + 2848) != HIWORD(v17) )
    {
      v19 = 0;
      goto LABEL_21;
    }
  }
  else
  {
    v18 = 0;
  }
  v19 = *(_QWORD *)(v36 + 480) + 2896 * v18;
LABEL_21:
  v34[0] = &n30770;
  v34[1] = &v36;
  v34[2] = &v38;
  v34[3] = &v32;
  v20 = (_QWORD *)(v19 + 152 * v6);
  sub_147025DB0(v34, *(_QWORD *)(152LL * (n30770 & 0xF) + v19 + 40));
  for ( j = (__int64 **)v20[3]; j; j = (__int64 **)*j )
  {
    for ( k = 0; k < *((unsigned int *)j + 155); ++k )
    {
      v23 = p_sub_1470BC170(n30770, v36, j, k);
      if ( (*(_BYTE *)(v23 + 12) & (unsigned __int8)v38) != 0 )
      {
        v31 = p_sub_1470BC600(n30770, v36, j, k);
        v24 = v31;
        sub_1402A8C60(&v32, &v31);
        if ( n30770 == 30770 )
        {
          v25 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v24 + 1640LL))(v24);
          if ( v25 )
            sub_1470502D0(v25, n30770, v38, &v32);
        }
      }
    }
  }
  sub_147025DB0(v34, v20[5]);
  sub_147025DB0(v34, v20[6]);
  if ( v10 )
  {
    n0x200000 = _InterlockedCompareExchange64(v10, 0, 0x200000);
    if ( n0x200000 != 0x200000 )
      sub_1403DEBA0(v10, n0x200000);
  }
  result = sub_1402D42F0(v5);
  v28 = (_QWORD *)*((_QWORD *)&v32 + 1);
  v29 = (_QWORD *)v32;
  if ( (_QWORD)v32 != *((_QWORD *)&v32 + 1) )
  {
    v30 = a5;
    do
      result = (*(__int64 (__fastcall **)(_QWORD, _QWORD))(v30 + 8))(*(_QWORD *)v30, *v29++);
    while ( v29 != v28 );
    v29 = (_QWORD *)v32;
  }
  if ( v29 )
    return sub_1403A4F10(&v32, v29, (v33 - (_QWORD)v29) & 0xFFFFFFFFFFFFFFF8uLL);
  return result;
}

// --- End Function: sub_14704FF90 (0x14704FF90) ---

// --- Function: sub_147051200 (0x147051200) ---
__int64 __fastcall sub_147051200(__int64 a1, __int64 a2, __int64 a3)
{
  int v6; // edx
  __int64 v7; // rbx
  int v8; // edx
  __int64 v9; // rcx
  __int64 v10; // rcx
  bool v11; // zf
  void (__fastcall *v12)(__int64 *); // rax
  __int64 v14; // [rsp+60h] [rbp+8h] BYREF

  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v6 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v6 & 0x200000LL) != 0 )
      sub_1403CD0A0(a1 + 8, v6, (unsigned int)"CZoneSystem::ForeachZone", (unsigned int)"m_GlobalStateLock", 1);
  }
  v7 = 0;
  if ( *(_DWORD *)(a2 + 696) )
  {
    while ( 1 )
    {
      if ( (unsigned __int16)v7 >= (unsigned __int64)((*(_QWORD *)(a2 + 608) - *(_QWORD *)(a2 + 600)) / 168LL) )
        __debugbreak();
      v8 = *(_DWORD *)(168LL * (unsigned __int16)v7 + *(_QWORD *)(a2 + 600));
      if ( v8 == -1 )
        goto LABEL_17;
      if ( !(_WORD)v8 )
        break;
      v9 = (unsigned __int16)v8;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v8 + 6) == HIWORD(v8) )
        goto LABEL_13;
LABEL_17:
      if ( ++v7 >= (unsigned __int64)*(unsigned int *)(a2 + 696) )
        return sub_1402D42F0(a1 + 8);
    }
    v9 = 0;
LABEL_13:
    v10 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v9) & 0xFFFFFFFFFFFFLL;
    if ( v10 )
    {
      v11 = *(_QWORD *)(a3 + 8) == 1;
      v12 = *(void (__fastcall **)(__int64 *))a3;
      v14 = v10;
      if ( v11 )
        v12(&v14);
      else
        ((void (__fastcall *)(__int64, __int64 *))v12)(a3, &v14);
    }
    goto LABEL_17;
  }
  return sub_1402D42F0(a1 + 8);
}

// --- End Function: sub_147051200 (0x147051200) ---

// --- Function: sub_147051350 (0x147051350) ---
__int64 __fastcall sub_147051350(__int64 a1, __int64 a2, _QWORD *a3)
{
  __int64 v3; // rbx
  __int64 v5; // rsi
  int v6; // edx
  unsigned __int64 v7; // rcx
  __int64 v8; // rdi
  __int64 v9; // r8
  __int64 v10; // rdx
  __int64 v11; // rcx
  __int64 v12; // rax
  unsigned __int64 v13; // r8
  int *v14; // r15
  int v15; // ecx
  __int64 v16; // r14
  __int64 v17; // r10
  __int64 _RSI; // r14
  int v19; // edx
  __int64 v20; // r9
  __int64 v21; // r13
  int v22; // edx
  __int64 v23; // rsi
  int v24; // eax
  __int64 _RSI_1; // rax
  __int64 v26; // rcx
  _QWORD *v27; // r8
  __int64 v28; // r9
  _QWORD *Transform_ws; // rbx
  __int64 InvertedTransform_ws; // rax
  __int64 v31; // rdx
  __int64 v32; // r8
  double v33; // xmm1_8
  __int64 v34; // r10
  __int64 v35; // r9
  __int64 v36; // rax
  __int64 v37; // rcx
  double *v38; // rax
  double v39; // xmm1_8
  double *v40; // rax
  double v41; // xmm1_8
  bool v42; // zf
  void (__fastcall *v43)(_QWORD *, __int64, __int64); // rax
  _QWORD v45[2]; // [rsp+30h] [rbp-D0h] BYREF
  __int128 v46; // [rsp+40h] [rbp-C0h]
  _QWORD *v47; // [rsp+50h] [rbp-B0h]
  __int128 v48; // [rsp+58h] [rbp-A8h]
  double v49; // [rsp+68h] [rbp-98h]
  int v50; // [rsp+70h] [rbp-90h]
  char v51; // [rsp+74h] [rbp-8Ch]
  _QWORD v52[3]; // [rsp+80h] [rbp-80h] BYREF
  __int128 v53; // [rsp+98h] [rbp-68h] BYREF
  double v54; // [rsp+A8h] [rbp-58h]
  _QWORD v55[8]; // [rsp+B0h] [rbp-50h] BYREF
  __int128 v56; // [rsp+F0h] [rbp-10h]
  __int64 v57; // [rsp+100h] [rbp+0h]
  __int64 v58; // [rsp+108h] [rbp+8h]
  __int64 v59; // [rsp+110h] [rbp+10h]
  __int64 v60; // [rsp+118h] [rbp+18h]
  __int64 v61; // [rsp+120h] [rbp+20h]
  __int128 v62; // [rsp+128h] [rbp+28h]
  double v63; // [rsp+138h] [rbp+38h]
  _QWORD _RBX_1[7]; // [rsp+140h] [rbp+40h] BYREF
  __int64 v65[8]; // [rsp+178h] [rbp+78h] BYREF
  unsigned __int64 v67; // [rsp+208h] [rbp+108h]
  __int64 v69; // [rsp+218h] [rbp+118h]

  v3 = a1 + 8;
  v69 = a1 + 8;
  v5 = a1;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
  {
    ++*(_DWORD *)(v3 + 12);
  }
  else
  {
    v6 = _InterlockedIncrement64((volatile signed __int64 *)v3);
    if ( (*(_QWORD *)&v6 & 0x200000LL) != 0 )
      sub_1403CD0A0(v3, v6, (unsigned int)"CZoneSystem::ForeachZoneData", (unsigned int)"m_GlobalStateLock", 1);
  }
  LOWORD(v7) = 0;
  v67 = 0;
  if ( *(_DWORD *)(a2 + 700) )
  {
    while ( 1 )
    {
      if ( (unsigned __int16)v7 >= (unsigned __int64)((*(_QWORD *)(a2 + 632) - *(_QWORD *)(a2 + 624)) / 48LL) )
        __debugbreak();
      v8 = *(_QWORD *)(a2 + 624) + 48LL * (unsigned __int16)v7;
      if ( (*(_WORD *)(a2 + 116) & 0x400) != 0 )
      {
        v9 = *(unsigned int *)(v8 + 36);
        if ( !(_DWORD)v9 )
          goto LABEL_59;
        v10 = *(_QWORD *)(v8 + 24);
        v11 = 0;
        while ( *(_DWORD *)((unsigned int)v11 + v10 + 24) != 1 )
        {
          v12 = v11 + (unsigned int)(32 * *(_DWORD *)((unsigned int)v11 + v10 + 28) + 36);
          v11 = v12;
          if ( v12 == v9 || v12 == -1 )
            goto LABEL_59;
        }
      }
      v13 = *(unsigned __int16 *)(v8 + 14);
      if ( v13 >= (*(_QWORD *)(a2 + 608) - *(_QWORD *)(a2 + 600)) / 168LL )
        __debugbreak();
      v14 = (int *)(*(_QWORD *)(a2 + 600) + 168 * v13);
      v15 = *v14;
      if ( *v14 == -1 )
        goto LABEL_59;
      if ( (_WORD)v15 )
      {
        v16 = (unsigned __int16)v15;
        if ( *(_WORD *)(*(_QWORD *)(v5 + 10486016) + 8LL * (unsigned __int16)v15 + 6) != HIWORD(v15) )
          goto LABEL_59;
      }
      else
      {
        v16 = 0;
      }
      v17 = *(_QWORD *)(v5 + 10486016);
      _RSI = *(_QWORD *)(v17 + 8 * v16) & 0xFFFFFFFFFFFFLL;
      if ( _RSI )
      {
        v19 = *(_DWORD *)v8;
        if ( (unsigned __int16)*(_DWORD *)v8 )
        {
          v20 = (unsigned __int16)v19;
          if ( *(_WORD *)(2896LL * (unsigned __int16)v19 + *(_QWORD *)(_RSI + 480) + 2848) != HIWORD(v19) )
            goto LABEL_59;
        }
        else
        {
          v20 = 0;
        }
        v21 = *(_QWORD *)(_RSI + 480) + 2896 * v20;
        if ( v21 )
        {
          v22 = *(_DWORD *)(v8 + 8);
          v23 = 0;
          if ( v22 != -1 )
          {
            v24 = *(_DWORD *)(v8 + 4);
            if ( v24 == *(_DWORD *)(_RSI + 12) )
            {
              _RSI_1 = _RSI;
              goto LABEL_38;
            }
            if ( v24 == -1 )
            {
              _RSI_1 = 0;
              goto LABEL_38;
            }
            if ( (_WORD)v24 )
            {
              v26 = (unsigned __int16)v24;
              if ( *(_WORD *)(v17 + 8LL * (unsigned __int16)v24 + 6) != HIWORD(v24) )
              {
                _RSI_1 = 0;
                goto LABEL_38;
              }
            }
            else
            {
              v26 = 0;
            }
            _RSI_1 = *(_QWORD *)(v17 + 8 * v26) & 0xFFFFFFFFFFFFLL;
LABEL_38:
            v27 = (_QWORD *)(_RSI_1 + 480);
            if ( (_WORD)v22 )
            {
              v28 = (unsigned __int16)v22;
              if ( *(_WORD *)(2896LL * (unsigned __int16)v22 + *v27 + 2848) != HIWORD(v22) )
                goto LABEL_43;
            }
            else
            {
              v28 = 0;
            }
            v23 = *v27 + 2896 * v28;
          }
LABEL_43:
          Transform_ws = CZone::GetTransform_ws(_RSI, _RBX_1, *(_DWORD *)(a2 + 40));
          InvertedTransform_ws = CZone::GetInvertedTransform_ws(_RSI, (__int64)v65, *(unsigned int *)(a2 + 40));
          v55[2] = v14;
          v55[1] = a2;
          v55[0] = off_148B9F508;
          v55[3] = v8;
          v55[7] = *(_QWORD *)(InvertedTransform_ws + 24);
          v55[4] = *(_QWORD *)InvertedTransform_ws;
          v55[5] = *(_QWORD *)(InvertedTransform_ws + 8);
          v55[6] = *(_QWORD *)(InvertedTransform_ws + 16);
          v56 = *(_OWORD *)(InvertedTransform_ws + 32);
          v57 = *(_QWORD *)(InvertedTransform_ws + 48);
          v61 = Transform_ws[3];
          v58 = *Transform_ws;
          v59 = Transform_ws[1];
          v60 = Transform_ws[2];
          v62 = *((_OWORD *)Transform_ws + 2);
          v33 = *((double *)Transform_ws + 6);
          v47 = 0;
          v49 = NAN;
          *((_QWORD *)&v48 + 1) = 0x7FF0000000000001LL;
          *(_QWORD *)&v48 = 0x7FF0000000000001LL;
          v50 = -1;
          v51 = 0;
          v45[0] = _RSI;
          v45[1] = v21;
          v46 = 0;
          v63 = v33;
          *(_QWORD *)&v46 = *(_QWORD *)(v21 + 2816);
          if ( v23 )
            *((_QWORD *)&v46 + 1) = *(_QWORD *)(v23 + 2816);
          if ( *(_DWORD *)(v8 + 32) )
          {
            v34 = *(unsigned int *)(v8 + 36);
            if ( !(_DWORD)v34
              || (v35 = *(_QWORD *)(v8 + 24), v32 = 0, v31 = *(unsigned int *)(v35 + 28), v31 == *(_DWORD *)(v35 + 32)) )
            {
LABEL_51:
              v51 = 1;
            }
            else
            {
              while ( 1 )
              {
                v31 = (unsigned int)(32 * v31);
                v36 = v32 + (unsigned int)(v31 + 36);
                v32 = v36;
                if ( v36 == v34 || v36 == -1 )
                  break;
                v37 = *(unsigned int *)((unsigned int)v36 + v35 + 28);
                v31 = (unsigned int)v37;
                if ( v37 == *(_DWORD *)((unsigned int)v36 + v35 + 32) )
                  goto LABEL_51;
              }
            }
          }
          v47 = v55;
          v50 = v67;
          if ( *(_DWORD *)(v8 + 32) )
          {
            v38 = *(double **)(v8 + 24);
            v39 = v38[2];
            v53 = *(_OWORD *)v38;
            v54 = v39;
            v40 = (double *)&v53;
          }
          else
          {
            v52[2] = 0x7FF0000000000001LL;
            v40 = (double *)v52;
            v52[1] = 0x7FF0000000000001LL;
            v52[0] = 0x7FF0000000000001LL;
          }
          v41 = v40[2];
          v48 = *(_OWORD *)v40;
          v42 = a3[1] == 1;
          v43 = (void (__fastcall *)(_QWORD *, __int64, __int64))*a3;
          v49 = v41;
          if ( v42 )
            v43(v45, v31, v32);
          else
            v43(a3, (__int64)v45, v32);
          v5 = a1;
        }
      }
LABEL_59:
      v7 = v67 + 1;
      v67 = v7;
      if ( v7 >= *(unsigned int *)(a2 + 700) )
      {
        v3 = v69;
        return sub_1402D42F0(v3);
      }
    }
  }
  return sub_1402D42F0(v3);
}

// --- End Function: sub_147051350 (0x147051350) ---

// --- Function: sub_14705A8C0 (0x14705A8C0) ---
__int64 __fastcall sub_14705A8C0(int a1, __int64 a2, int a3, int a4)
{
  unsigned int v4; // eax

  v4 = -1;
  if ( !a4 )
    v4 = dword_149A0A48C;
  sub_14705A8F0(a1, a2, a3, a4, v4);
  return a2;
}

// --- End Function: sub_14705A8C0 (0x14705A8C0) ---

// --- Function: sub_14705A8F0 (0x14705A8F0) ---
double *__fastcall sub_14705A8F0(__int64 a1, double *a2, _DWORD *a3, int a4, unsigned int a5)
{
  __int64 v5; // rsi
  unsigned __int64 v10; // rbx
  int v11; // r15d
  __int64 v12; // rcx
  __int64 v13; // rcx
  double *v14; // rax
  double *v15; // r8
  double v16; // xmm15_8
  double v17; // xmm2_8
  double v18; // xmm3_8
  double v19; // xmm4_8
  double v20; // xmm7_8
  double v21; // xmm0_8
  double v22; // xmm1_8
  double v23; // xmm8_8
  double v24; // xmm6_8
  double v25; // xmm5_8
  double v26; // kr00_8
  double v27; // xmm13_8
  double v28; // xmm0_8
  double v29; // xmm14_8
  double v30; // xmm12_8
  double v31; // xmm7_8
  double v32; // xmm6_8
  double v33; // xmm5_8
  double v34; // xmm8_8
  double v35; // xmm10_8
  double v36; // xmm9_8
  double v37; // xmm5_8
  double v38; // kr00_8
  double v39; // xmm12_8
  double v40; // xmm0_8
  double v41; // xmm14_8
  double v42; // xmm11_8
  double v43; // xmm10_8
  double v44; // xmm8_8
  double v45; // xmm9_8
  double v46; // xmm13_8
  double v47; // xmm4_8
  double v48; // xmm7_8
  double v49; // xmm6_8
  double v50; // xmm4_8
  double v51; // kr00_8
  double v52; // xmm4_8
  double v53; // xmm3_8
  double v54; // xmm6_8
  double v55; // kr00_8
  double v56; // xmm3_8
  char v57; // r13
  int v58; // r12d
  int v59; // ecx
  __int64 v60; // r8
  double *v61; // r12
  __int64 v62; // rdx
  double v63; // xmm15_8
  double v64; // xmm2_8
  double v65; // xmm3_8
  double v66; // xmm4_8
  double v67; // xmm7_8
  double v68; // xmm0_8
  double v69; // xmm1_8
  double v70; // xmm8_8
  double v71; // xmm6_8
  double v72; // xmm5_8
  double v73; // kr00_8
  double v74; // xmm13_8
  double v75; // xmm7_8
  double v76; // xmm14_8
  double v77; // xmm12_8
  double v78; // xmm6_8
  double v79; // xmm5_8
  double v80; // xmm8_8
  double v81; // xmm9_8
  double v82; // xmm10_8
  double v83; // xmm0_8
  double v84; // xmm5_8
  double v85; // xmm11_8
  double v86; // xmm10_8
  double v87; // xmm8_8
  double v88; // xmm9_8
  double v89; // xmm7_8
  double v90; // xmm6_8
  double v91; // xmm4_8
  double v92; // xmm5_8
  double v93; // xmm4_8
  double v94; // xmm3_8
  double v95; // xmm6_8
  double v96; // kr00_8
  double v97; // xmm3_8
  double v99; // [rsp+30h] [rbp-D0h]
  double v100; // [rsp+30h] [rbp-D0h]
  double v101; // [rsp+38h] [rbp-C8h]
  double v102; // [rsp+38h] [rbp-C8h]
  double v103; // [rsp+38h] [rbp-C8h]
  int n2816; // [rsp+40h] [rbp-C0h] BYREF
  __int64 v105; // [rsp+44h] [rbp-BCh]
  int v106; // [rsp+4Ch] [rbp-B4h]
  __int64 v107; // [rsp+50h] [rbp-B0h]
  unsigned __int64 v108; // [rsp+58h] [rbp-A8h]
  __int64 v109; // [rsp+60h] [rbp-A0h]
  __int64 v110; // [rsp+68h] [rbp-98h]
  double v111; // [rsp+90h] [rbp-70h] BYREF
  double v112; // [rsp+98h] [rbp-68h]
  double v113; // [rsp+A0h] [rbp-60h]
  double v114; // [rsp+A8h] [rbp-58h]
  double v115; // [rsp+B0h] [rbp-50h]
  double v116; // [rsp+B8h] [rbp-48h]
  double v117; // [rsp+C0h] [rbp-40h]
  double v118; // [rsp+C8h] [rbp-38h]
  double v119; // [rsp+1B0h] [rbp+B0h]
  double v120; // [rsp+1B0h] [rbp+B0h]

  v5 = 0;
  n2816 = 2816;
  v105 = 0;
  v106 = 0;
  v108 = 0;
  v109 = 0;
  v110 = 0;
  v107 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( (*a3 & 0xFFFFFF) != 0xFFFFFF )
  {
    v10 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10559896)
        + (*a3 & 0xFFFFFF)
        * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10560336);
    if ( a4 )
    {
      v11 = a4 - 2;
      if ( v11 )
      {
        if ( v11 == 1 )
        {
          v12 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v10 + 8) & 0xF) + a1 + 10560348);
          *a2 = *(double *)(v12 + v10 + 48);
          a2[1] = *(double *)(v12 + v10 + 56);
          a2[2] = *(double *)(v12 + v10 + 64);
          a2[3] = *(double *)(v12 + v10 + 72);
          a2[4] = *(double *)(v12 + v10 + 80);
          a2[5] = *(double *)(v12 + v10 + 88);
        }
      }
      else
      {
        v13 = 22LL * (*(_WORD *)(v10 + 8) & 0xF);
        v14 = (double *)(v10 + 48 + *(unsigned __int16 *)(v13 + a1 + 10560348));
        v15 = (double *)(v10 + 48 + *(unsigned __int16 *)(v13 + a1 + 10560346));
        v16 = v14[3];
        if ( *v14 <= v16 )
        {
          v23 = *v15;
          v24 = v15[1];
          v25 = v15[2];
          v26 = (v25 + v25) * *v15;
          v27 = (v25 + v25) * v24;
          v99 = 1.0 - (v23 + v23) * v23;
          v119 = (v24 + v24) * v24;
          v28 = v15[3];
          v29 = v28 * (v23 + v23);
          v30 = v28 * (v24 + v24);
          v31 = (v24 + v24) * *v15;
          v32 = (v25 + v25) * v25;
          v33 = v28 * (v25 + v25);
          v34 = (v16 - *v14) * 0.5;
          v35 = (v14[5] - v14[2]) * 0.5;
          v36 = (v14[4] - v14[1]) * 0.5;
          v101 = (fabs(1.0 - v119 - v32) * v34 + fabs(v31 - v33) * v36 + fabs(v26 + v30) * v35) * v15[7];
          v37 = (fabs(v33 + v31) * v34 + fabs(v99 - v32) * v36 + fabs(v27 - v29) * v35) * v15[7];
          v38 = v26 - v30;
          v39 = v15[7];
          v40 = v27 + v29;
          v41 = v15[1];
          v42 = (COERCE_DOUBLE(*(_QWORD *)&v38 & 0x7FFFFFFFFFFFFFFFLL) * v34
               + COERCE_DOUBLE(*(_QWORD *)&v40 & 0x7FFFFFFFFFFFFFFFLL) * v36
               + fabs(v99 - v119) * v35)
              * v39;
          v43 = (v14[2] + v14[5]) * 0.5;
          v44 = (v14[3] + *v14) * 0.5;
          v45 = (v14[1] + v14[4]) * 0.5;
          v46 = v15[2];
          v47 = v15[3];
          v48 = v41 * v43 - v46 * v45 + v47 * v44;
          v49 = v46 * v44 - *v15 * v43 + v47 * v45;
          v50 = *v15 * v45 - v41 * v44 + v47 * v43;
          v51 = v41 * v50 - v46 * v49;
          v52 = v46 * v48 - *v15 * v50;
          v53 = *v15 * v49 - v41 * v48;
          v54 = (v51 + v44 + v51) * v39 + v15[4];
          v20 = v54 + v101;
          v55 = (v52 + v45 + v52) * v39 + v15[5];
          v19 = v55 + v37;
          v21 = v55 - v37;
          v56 = (v53 + v43 + v53) * v39 + v15[6];
          v22 = v54 - v101;
          v17 = v42 + v56;
          v18 = v56 - v42;
        }
        else
        {
          v17 = -1.0e150;
          v18 = 1.0e150;
          v19 = -1.0e150;
          v20 = -1.0e150;
          v21 = 1.0e150;
          v22 = 1.0e150;
        }
        *a2 = v22;
        a2[1] = v21;
        a2[2] = v18;
        a2[3] = v20;
        a2[4] = v19;
        a2[5] = v17;
      }
LABEL_27:
      v108 = __rdtsc();
      qword_149A05E08(&n2816);
      return a2;
    }
    v57 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
    if ( !v57 )
    {
      if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
      {
        ++*(_DWORD *)(a1 + 20);
      }
      else
      {
        v58 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
        if ( (*(_QWORD *)&v58 & 0x200000LL) != 0 )
          sub_1403CD0A0(a1 + 8, v58, (unsigned int)"CZoneSystem::GetAABB", (unsigned int)"m_GlobalStateLock", 1);
      }
    }
    v59 = *(_DWORD *)(v10 + 16);
    v60 = 22LL * (*(_WORD *)(v10 + 8) & 0xF);
    v61 = (double *)(v10 + 48 + *(unsigned __int16 *)(v60 + a1 + 10560348));
    if ( v59 != -1 )
    {
      if ( (_WORD)v59 )
      {
        v62 = (unsigned __int16)v59;
        if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v59 + 6) != HIWORD(v59) )
          goto LABEL_22;
      }
      else
      {
        v62 = 0;
      }
      v5 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v62) & 0xFFFFFFFFFFFFLL;
    }
LABEL_22:
    sub_147040F20(v5, &v111, v10 + 48 + *(unsigned __int16 *)(v60 + a1 + 10560346), a5);
    v63 = v61[3];
    if ( *v61 <= v63 )
    {
      v70 = v111;
      v71 = v112;
      v72 = v113;
      v73 = v111 * (v72 + v72);
      v74 = v112 * (v72 + v72);
      v102 = 1.0 - v70 * (v70 + v70);
      v75 = v111 * (v71 + v71);
      v120 = v71 * (v71 + v71);
      v76 = v114 * (v70 + v70);
      v77 = v114 * (v71 + v71);
      v78 = v72 * (v72 + v72);
      v79 = v114 * (v72 + v72);
      v80 = (v63 - *v61) * 0.5;
      v81 = (v61[4] - v61[1]) * 0.5;
      v82 = (v61[5] - v61[2]) * 0.5;
      v100 = (fabs(1.0 - v120 - v78) * v80 + fabs(v75 - v79) * v81 + fabs(v73 + v77) * v82) * v118;
      v83 = v79 + v75;
      v84 = v102;
      v103 = (COERCE_DOUBLE(*(_QWORD *)&v83 & 0x7FFFFFFFFFFFFFFFLL) * v80
            + fabs(v102 - v78) * v81
            + fabs(v74 - v76) * v82)
           * v118;
      v85 = (fabs(v73 - v77) * v80 + fabs(v74 + v76) * v81 + fabs(v84 - v120) * v82) * v118;
      v86 = (v61[2] + v61[5]) * 0.5;
      v87 = (v61[3] + *v61) * 0.5;
      v88 = (v61[1] + v61[4]) * 0.5;
      v89 = v112 * v86 - v113 * v88 + v114 * v87;
      v90 = v113 * v87 - v111 * v86 + v114 * v88;
      v91 = v111 * v88 - v112 * v87 + v114 * v86;
      v92 = v112 * v91 - v113 * v90;
      v93 = v113 * v89 - v111 * v91;
      v94 = v111 * v90 - v112 * v89;
      v95 = (v92 + v87 + v92) * v118 + v115;
      v67 = v95 + v100;
      v96 = (v93 + v88 + v93) * v118 + v116;
      v66 = v96 + v103;
      v69 = v95 - v100;
      v97 = (v94 + v86 + v94) * v118 + v117;
      v68 = v96 - v103;
      v64 = v97 + v85;
      v65 = v97 - v85;
    }
    else
    {
      v64 = -1.0e150;
      v65 = 1.0e150;
      v66 = -1.0e150;
      v67 = -1.0e150;
      v68 = 1.0e150;
      v69 = 1.0e150;
    }
    *a2 = v69;
    a2[1] = v68;
    a2[2] = v65;
    a2[3] = v67;
    a2[4] = v66;
    a2[5] = v64;
    if ( !v57 )
      sub_1402D42F0(a1 + 8);
    goto LABEL_27;
  }
  a2[3] = 0.0;
  a2[4] = 0.0;
  a2[5] = 0.0;
  *a2 = COERCE_DOUBLE(*((_QWORD *)a2 + 3) ^ 0x8000000000000000uLL);
  a2[1] = -0.0;
  a2[2] = -0.0;
  v108 = __rdtsc();
  qword_149A05E08(&n2816);
  return a2;
}

// --- End Function: sub_14705A8F0 (0x14705A8F0) ---

// --- Function: sub_14705B210 (0x14705B210) ---
double *__fastcall sub_14705B210(__int64 a1, double *a2, __int64 a3, int a4)
{
  __int128 v4; // xmm6
  __int128 v5; // xmm7
  __int128 v6; // xmm8
  __int128 v7; // xmm9
  __int128 v8; // xmm10
  __int128 v9; // xmm11
  __int128 v10; // xmm12
  __int128 v11; // xmm13
  __int128 v12; // xmm14
  __int128 v13; // xmm15
  __int64 v14; // r10
  __int64 v17; // rdx
  __int64 v18; // rax
  __int64 v19; // rdx
  __int64 v20; // rcx
  double *v21; // rdi
  double *v22; // r10
  int v23; // r9d
  double v24; // xmm15_8
  double v25; // xmm2_8
  double v26; // xmm3_8
  double v27; // xmm6_8
  double v28; // xmm7_8
  double v29; // xmm0_8
  double v30; // xmm1_8
  double v31; // xmm8_8
  double v32; // xmm6_8
  double v33; // xmm5_8
  double v34; // kr00_8
  double v35; // xmm13_8
  double v36; // xmm0_8
  double v37; // xmm14_8
  double v38; // xmm12_8
  double v39; // xmm7_8
  double v40; // xmm6_8
  double v41; // xmm5_8
  double v42; // xmm8_8
  double v43; // xmm10_8
  double v44; // xmm9_8
  double v45; // xmm5_8
  double v46; // kr00_8
  double v47; // xmm12_8
  double v48; // xmm0_8
  double v49; // xmm14_8
  double v50; // xmm11_8
  double v51; // xmm10_8
  double v52; // xmm8_8
  double v53; // kr00_8
  double v54; // xmm13_8
  double v55; // xmm4_8
  double v56; // xmm7_8
  double v57; // xmm6_8
  double v58; // xmm4_8
  double v59; // xmm5_8
  double v60; // xmm4_8
  double v61; // xmm3_8
  double v62; // xmm5_8
  double v63; // kr00_8
  double v64; // xmm3_8
  int v65; // r8d
  __int64 _RSI; // rcx
  __int64 v67; // rcx
  double v68; // xmm15_8
  double v69; // xmm2_8
  double v70; // xmm3_8
  double v71; // xmm4_8
  double v72; // xmm7_8
  double v73; // xmm0_8
  double v74; // xmm1_8
  double v75; // xmm7_8
  double v76; // xmm6_8
  double v77; // xmm5_8
  double v78; // xmm3_8
  double v79; // kr00_8
  double v80; // xmm12_8
  double v81; // xmm5_8
  double v82; // xmm8_8
  double v83; // xmm13_8
  double v84; // xmm14_8
  double v85; // xmm9_8
  double v86; // xmm7_8
  double v87; // xmm10_8
  double v88; // xmm5_8
  double v89; // xmm11_8
  double v90; // xmm10_8
  double v91; // xmm8_8
  double v92; // kr00_8
  double v93; // xmm7_8
  double v94; // xmm6_8
  double v95; // xmm4_8
  double v96; // kr00_8
  double v97; // xmm4_8
  double v98; // xmm3_8
  double v99; // xmm6_8
  double v100; // kr00_8
  double v101; // xmm3_8
  double v103; // [rsp+20h] [rbp-F8h]
  double v104; // [rsp+28h] [rbp-F0h]
  double v105; // [rsp+30h] [rbp-E8h] BYREF
  double v106; // [rsp+38h] [rbp-E0h]
  double v107; // [rsp+40h] [rbp-D8h]
  double v108; // [rsp+48h] [rbp-D0h]
  double v109; // [rsp+50h] [rbp-C8h]
  double v110; // [rsp+58h] [rbp-C0h]
  double v111; // [rsp+60h] [rbp-B8h]
  double v112; // [rsp+68h] [rbp-B0h]
  __int128 v113; // [rsp+70h] [rbp-A8h]
  __int128 v114; // [rsp+80h] [rbp-98h]
  __int128 v115; // [rsp+90h] [rbp-88h]
  __int128 v116; // [rsp+A0h] [rbp-78h]
  __int128 v117; // [rsp+B0h] [rbp-68h]
  __int128 v118; // [rsp+C0h] [rbp-58h]
  __int128 v119; // [rsp+D0h] [rbp-48h]
  __int128 v120; // [rsp+E0h] [rbp-38h]
  __int128 v121; // [rsp+F0h] [rbp-28h]
  __int128 v122; // [rsp+100h] [rbp-18h]
  double v123; // [rsp+120h] [rbp+8h]
  double v124; // [rsp+120h] [rbp+8h]
  double v125; // [rsp+130h] [rbp+18h]
  double v126; // [rsp+130h] [rbp+18h]
  double v127; // [rsp+130h] [rbp+18h]

  v14 = *(unsigned __int8 *)(a3 + 3);
  v122 = v4;
  v121 = v5;
  v120 = v6;
  v17 = *(unsigned __int16 *)(a1 + 2 * v14 + 10560336);
  v119 = v7;
  v118 = v8;
  v117 = v9;
  v116 = v10;
  v115 = v11;
  v114 = v12;
  v18 = *(_DWORD *)a3 & 0xFFFFFF;
  v113 = v13;
  v19 = *(_QWORD *)(a1 + 72 * v14 + 10559896) + v18 * v17;
  v20 = 22LL * (*(_WORD *)(v19 + 8) & 0xF);
  v21 = (double *)(v19 + 48 + *(unsigned __int16 *)(v20 + a1 + 10560348));
  v22 = (double *)(v19 + 48 + *(unsigned __int16 *)(v20 + a1 + 10560346));
  if ( a4 )
  {
    v23 = a4 - 2;
    if ( v23 )
    {
      if ( v23 == 1 )
      {
        *a2 = *v21;
        a2[1] = v21[1];
        a2[2] = v21[2];
        a2[3] = v21[3];
        a2[4] = v21[4];
        a2[5] = v21[5];
      }
    }
    else
    {
      v24 = v21[3];
      if ( *v21 <= v24 )
      {
        v31 = *v22;
        v32 = v22[1];
        v33 = v22[2];
        v34 = (v33 + v33) * *v22;
        v35 = (v33 + v33) * v32;
        v125 = 1.0 - (v31 + v31) * v31;
        v123 = (v32 + v32) * v32;
        v36 = v22[3];
        v37 = v36 * (v31 + v31);
        v38 = v36 * (v32 + v32);
        v39 = (v32 + v32) * *v22;
        v40 = (v33 + v33) * v33;
        v41 = v36 * (v33 + v33);
        v42 = (v24 - *v21) * 0.5;
        v43 = (v21[5] - v21[2]) * 0.5;
        v44 = (v21[4] - v21[1]) * 0.5;
        v103 = (fabs(1.0 - v123 - v40) * v42 + fabs(v39 - v41) * v44 + fabs(v34 + v38) * v43) * v22[7];
        v45 = (fabs(v41 + v39) * v42 + fabs(v125 - v40) * v44 + fabs(v35 - v37) * v43) * v22[7];
        v46 = v34 - v38;
        v47 = v22[7];
        v48 = v35 + v37;
        v49 = v22[1];
        v50 = (COERCE_DOUBLE(*(_QWORD *)&v46 & 0x7FFFFFFFFFFFFFFFLL) * v42
             + COERCE_DOUBLE(*(_QWORD *)&v48 & 0x7FFFFFFFFFFFFFFFLL) * v44
             + fabs(v125 - v123) * v43)
            * v47;
        v51 = (v21[2] + v21[5]) * 0.5;
        v126 = v45;
        v52 = (v21[3] + *v21) * 0.5;
        v53 = (v21[1] + v21[4]) * 0.5;
        v54 = v22[2];
        v55 = v22[3];
        v56 = v49 * v51 - v54 * v53 + v55 * v52;
        v57 = v54 * v52 - *v22 * v51 + v55 * v53;
        v58 = *v22 * v53 - v49 * v52 + v55 * v51;
        v59 = v49 * v58 - v54 * v57;
        v60 = v54 * v56 - *v22 * v58;
        v61 = *v22 * v57 - v49 * v56;
        v62 = (v52 + v59 + v59) * v47 + v22[4];
        v28 = v62 + v103;
        v63 = (v53 + v60 + v60) * v47 + v22[5];
        v27 = v63 + v126;
        v29 = v63 - v126;
        v64 = (v51 + v61 + v61) * v47 + v22[6];
        v30 = v62 - v103;
        v25 = v50 + v64;
        v26 = v64 - v50;
      }
      else
      {
        v25 = -1.0e150;
        v26 = 1.0e150;
        v27 = -1.0e150;
        v28 = -1.0e150;
        v29 = 1.0e150;
        v30 = 1.0e150;
      }
      *a2 = v30;
      a2[1] = v29;
      a2[2] = v26;
      a2[3] = v28;
      a2[4] = v27;
      a2[5] = v25;
    }
    return a2;
  }
  v65 = *(_DWORD *)(v19 + 16);
  if ( v65 != -1 )
  {
    if ( (_WORD)v65 )
    {
      v67 = (unsigned __int16)v65;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v65 + 6) != HIWORD(v65) )
      {
        _RSI = 0;
        goto LABEL_16;
      }
    }
    else
    {
      v67 = 0;
    }
    _RSI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v67) & 0xFFFFFFFFFFFFLL;
    goto LABEL_16;
  }
  _RSI = 0;
LABEL_16:
  sub_147040C90(_RSI, (__int64)&v105, (__int64)v22);
  v68 = v21[3];
  if ( *v21 <= v68 )
  {
    v75 = v105;
    v76 = v106;
    v77 = v107;
    v78 = v77 + v77;
    v79 = v106 * (v77 + v77);
    v80 = v105 * (v77 + v77);
    v81 = v77 * (v77 + v77);
    v82 = v105 * (v76 + v76);
    v124 = 1.0 - v75 * (v75 + v75);
    v127 = v76 * (v76 + v76);
    v83 = v108 * (v75 + v75);
    v84 = v108 * (v76 + v76);
    v85 = (v68 - *v21) * 0.5;
    v86 = (v21[4] - v21[1]) * 0.5;
    v87 = (v21[5] - v21[2]) * 0.5;
    v104 = (fabs(1.0 - v127 - v81) * v85 + fabs(v82 - v108 * v78) * v86 + fabs(v80 + v84) * v87) * v112;
    v88 = (fabs(v124 - v81) * v86 + fabs(v108 * v78 + v82) * v85 + fabs(v79 - v83) * v87) * v112;
    v89 = (fabs(v79 + v83) * v86 + fabs(v80 - v84) * v85 + fabs(v124 - v127) * v87) * v112;
    v90 = (v21[2] + v21[5]) * 0.5;
    v91 = (v21[3] + *v21) * 0.5;
    v92 = (v21[1] + v21[4]) * 0.5;
    v93 = v90 * v106 - v92 * v107 + v108 * v91;
    v94 = v107 * v91 - v90 * v105 + v92 * v108;
    v95 = v92 * v105 - v106 * v91 + v90 * v108;
    v96 = v106 * v95 - v107 * v94;
    v97 = v107 * v93 - v105 * v95;
    v98 = v105 * v94 - v106 * v93;
    v99 = (v96 + v91 + v96) * v112 + v109;
    v72 = v99 + v104;
    v100 = ((v21[1] + v21[4]) * 0.5 + v97 + v97) * v112 + v110;
    v71 = v100 + v88;
    v74 = v99 - v104;
    v101 = (v90 + v98 + v98) * v112 + v111;
    v73 = v100 - v88;
    v69 = v101 + v89;
    v70 = v101 - v89;
  }
  else
  {
    v69 = -1.0e150;
    v70 = 1.0e150;
    v71 = -1.0e150;
    v72 = -1.0e150;
    v73 = 1.0e150;
    v74 = 1.0e150;
  }
  *a2 = v74;
  a2[1] = v73;
  a2[2] = v70;
  a2[3] = v72;
  a2[4] = v71;
  a2[5] = v69;
  return a2;
}

// --- End Function: sub_14705B210 (0x14705B210) ---

// --- Function: sub_14705EA90 (0x14705EA90) ---
__int64 __fastcall sub_14705EA90(__int64 a1, int a2, int a3)
{
  int v6; // edx
  __int64 v7; // rbx
  __int64 v8; // rdx
  __int64 v9; // rdx
  __int64 v10; // r8
  __int64 v11; // rbx

  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v6 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v6 & 0x200000LL) != 0 )
      sub_1403CD0A0(a1 + 8, v6, (unsigned int)"CZoneSystem::GetEntityArena", (unsigned int)"m_GlobalStateLock", 1);
  }
  v7 = 0;
  if ( a2 == -1 )
  {
    v8 = 0;
    goto LABEL_12;
  }
  if ( (_WORD)a2 )
  {
    v9 = (unsigned __int16)a2;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)a2 + 6) != HIWORD(a2) )
    {
      v8 = 0;
      goto LABEL_12;
    }
  }
  else
  {
    v9 = 0;
  }
  v8 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v9) & 0xFFFFFFFFFFFFLL;
LABEL_12:
  if ( (_WORD)a3 )
  {
    v10 = (unsigned __int16)a3;
    if ( *(_WORD *)(2896LL * (unsigned __int16)a3 + *(_QWORD *)(v8 + 480) + 2848) != HIWORD(a3) )
      goto LABEL_17;
  }
  else
  {
    v10 = 0;
  }
  v7 = *(_QWORD *)(v8 + 480) + 2896 * v10;
LABEL_17:
  v11 = *(_QWORD *)(v7 + 2824);
  sub_1402D42F0(a1 + 8);
  return v11;
}

// --- End Function: sub_14705EA90 (0x14705EA90) ---

// --- Function: sub_14705F920 (0x14705F920) ---
__m128 __fastcall sub_14705F920(__int64 a1, _DWORD *a2, float a3, float a4, float a5)
{
  double v9; // xmm1_8
  unsigned __int64 v10; // rdx
  __int16 v11; // ax
  unsigned __int64 v12; // r9
  __int64 v13; // rdx
  double *v14; // rcx
  double v15; // xmm2_8
  double v16; // xmm3_8
  double v17; // xmm5_8
  double v18; // xmm6_8
  double v19; // xmm7_8
  double v20; // xmm8_8
  double v21; // xmm0_8
  double v22; // xmm2_8
  double v23; // xmm5_8
  __int128 v24; // kr00_16
  __int128 v29; // kr00_16

  if ( (*a2 & 0xFFFFFF) == 0xFFFFFF )
  {
    return (__m128)0LL;
  }
  else if ( a5 > 0.0 )
  {
    v9 = 0.0;
    v10 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*a2 >> 24) + 10559896)
        + (*a2 & 0xFFFFFF)
        * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*a2 >> 24) + 10560336);
    v11 = *(_WORD *)(v10 + 8);
    v12 = v10 + 48;
    v13 = 22LL * (v11 & 0xF);
    if ( (v11 & 0x20) != 0 )
    {
      v14 = (double *)(v12 + *(unsigned __int16 *)(v13 + a1 + 10560348));
      v15 = *v14;
      v16 = v14[1];
      v17 = v14[2];
      v18 = v14[3];
      v19 = v14[4];
      v20 = v14[5];
    }
    else
    {
      v15 = -0.0;
      v16 = -0.0;
      v17 = -0.0;
      v18 = 0.0;
      v19 = 0.0;
      v20 = 0.0;
    }
    v21 = *(double *)(*(unsigned __int16 *)(v13 + a1 + 10560346) + v12 + 56);
    v22 = v15 * v21;
    v23 = v21 * v17;
    if ( v22 <= v21 * v18 )
    {
      *((_QWORD *)&v24 + 1) = 0;
      *(double *)&v24 = (v21 * v19 - v21 * v16) * (v21 * v19 - v21 * v16)
                      + (v21 * v18 - v22) * (v21 * v18 - v22)
                      + (v21 * v20 - v23) * (v21 * v20 - v23);
      _XMM2 = v24;
      __asm
      {
        vmovddup xmm0, xmm2
        vsqrtpd xmm3, xmm0
        vunpckhpd xmm3, xmm3, xmm3
      }
      v9 = *(double *)&_XMM3 * 0.5;
    }
    *((_QWORD *)&v29 + 1) = 0;
    *(double *)&v29 = *(float *)(*(unsigned __int16 *)(v13 + a1 + 10560354) + v12) * v9 * a3 / (float)(fsqrt(a5) * a4);
    return (__m128)v29;
  }
  else
  {
    return (__m128)0x426D1A94A1FFE000uLL;
  }
}

// --- End Function: sub_14705F920 (0x14705F920) ---

// --- Function: sub_147060000 (0x147060000) ---
__int64 __fastcall sub_147060000(__int64 a1, __int64 a2, __int64 a3)
{
  int v6; // edx
  __int64 v7; // rax
  unsigned __int64 v8; // r8
  __int64 v9; // r10
  __int64 v10; // r9
  unsigned __int64 v11; // r8
  int *v12; // r9
  __int64 v13; // rdi
  int v14; // edx
  __int64 v15; // r8
  __int64 v16; // r8
  int v17; // edx
  __int64 v18; // r9
  __int64 v19; // rdx
  unsigned int v20; // ecx
  __int64 v21; // rax
  __int64 v22; // rax

  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v6 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v6 & 0x200000LL) != 0 )
      sub_1403CD0A0(a1 + 8, v6, (unsigned int)"CZoneSystem::GetObjectCount", (unsigned int)"m_GlobalStateLock", 1);
  }
  v7 = *(_QWORD *)(a2 + 648);
  v8 = *(unsigned __int16 *)(v7 + 24 * a3 + 18);
  v9 = v7 + 24 * a3;
  if ( v8 >= (*(_QWORD *)(a2 + 632) - *(_QWORD *)(a2 + 624)) / 48LL )
    __debugbreak();
  v10 = 3 * v8;
  v11 = *(unsigned __int16 *)(v9 + 16);
  v12 = (int *)(*(_QWORD *)(a2 + 624) + 16 * v10);
  if ( v11 >= (*(_QWORD *)(a2 + 608) - *(_QWORD *)(a2 + 600)) / 168LL )
    __debugbreak();
  v13 = 0;
  v14 = *(_DWORD *)(168 * v11 + *(_QWORD *)(a2 + 600));
  if ( v14 != -1 )
  {
    if ( (_WORD)v14 )
    {
      v15 = (unsigned __int16)v14;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
        goto LABEL_27;
    }
    else
    {
      v15 = 0;
    }
    v16 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v15) & 0xFFFFFFFFFFFFLL;
    if ( v16 )
    {
      v17 = *v12;
      if ( (unsigned __int16)*v12 )
      {
        v18 = (unsigned __int16)v17;
        if ( *(_WORD *)(2896LL * (unsigned __int16)v17 + *(_QWORD *)(v16 + 480) + 2848) != HIWORD(v17) )
          goto LABEL_27;
      }
      else
      {
        v18 = 0;
      }
      v19 = *(_QWORD *)(v16 + 480) + 2896 * v18;
      if ( v19 )
      {
        v20 = *(_DWORD *)(v9 + 20);
        v21 = 152LL * (*(_WORD *)(a2 + 32) & 0xF);
        if ( v20 )
        {
          if ( v20 == 1 )
          {
            v22 = *(_QWORD *)(v21 + v19 + 48);
          }
          else
          {
            v22 = qword_1499B6B08 + 1056LL * (v20 & 0x3FFFFF);
            if ( *(_WORD *)(v22 + 560) != v20 >> 22 )
              goto LABEL_27;
          }
        }
        else
        {
          v22 = *(_QWORD *)(v21 + v19 + 40);
        }
        if ( v22 )
          v13 = *(unsigned int *)(v22 + 620);
      }
    }
  }
LABEL_27:
  sub_1402D42F0(a1 + 8);
  return v13;
}

// --- End Function: sub_147060000 (0x147060000) ---

// --- Function: sub_147060810 (0x147060810) ---
_QWORD *__fastcall sub_147060810(__int64 a1, int a2, int a3, int a4)
{
  __int64 v6; // rax
  __int64 v7; // r9
  _QWORD *v8; // rdx
  __int64 v9; // r9
  __int64 v10; // rcx
  __int64 v11; // rdi
  __int64 v12; // r12
  int v13; // edx
  _QWORD *v14; // rsi
  __int64 v15; // rcx
  __int64 v16; // rdx
  int v17; // esi
  signed __int64 v18; // rax
  __int64 v19; // rax
  _QWORD *v20; // rsi
  __int64 v21; // rbp
  __int64 v22; // r15
  __int64 v23; // r14
  __int64 v24; // rcx
  __int64 v25; // rcx
  __int64 v26; // r14
  void *v27; // rcx
  int v28; // eax
  signed __int64 n0x200000; // rax

  if ( a2 == -1 )
  {
    v6 = 0;
    goto LABEL_8;
  }
  if ( (_WORD)a2 )
  {
    v7 = (unsigned __int16)a2;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)a2 + 6) != HIWORD(a2) )
    {
      v6 = 0;
      goto LABEL_8;
    }
  }
  else
  {
    v7 = 0;
  }
  v6 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v7) & 0xFFFFFFFFFFFFLL;
LABEL_8:
  v8 = (_QWORD *)(v6 + 480);
  if ( (_WORD)a3 )
  {
    v9 = (unsigned __int16)a3;
    if ( *(_WORD *)(2896LL * (unsigned __int16)a3 + *v8 + 2848) != HIWORD(a3) )
    {
      v10 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v9 = 0;
  }
  v10 = *v8 + 2896 * v9;
LABEL_13:
  v11 = a1 + 80;
  v12 = v10 + 8 * ((a4 & 1) + 354LL);
  if ( *(_DWORD *)(v11 + 8) == *(_DWORD *)(sub_1402C8360(v10) + 24) )
  {
    ++*(_DWORD *)(v11 + 12);
  }
  else
  {
    v13 = _InterlockedIncrement64((volatile signed __int64 *)v11);
    if ( (*(_QWORD *)&v13 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        v11,
        v13,
        (unsigned int)"CZoneSystem::GetOrCreateDensityClusterData_ExternalLocked",
        (unsigned int)"m_DensityClusterCreationLock",
        1);
  }
  v14 = *(_QWORD **)v12;
  if ( *(_QWORD *)v12 && *((_DWORD *)v14 + 18) == a4 )
  {
    sub_1402D42F0(v11);
  }
  else
  {
    sub_1402D42F0(v11);
    v17 = *(_DWORD *)(sub_1402C8360(v15) + 24);
    if ( *(_DWORD *)(v11 + 8) == v17 )
    {
      ++*(_DWORD *)(v11 + 12);
    }
    else
    {
      v18 = _InterlockedCompareExchange64((volatile signed __int64 *)v11, 0x200000, 0);
      if ( v18 )
        sub_1403DE750(
          v11,
          v18,
          0,
          (unsigned int)"CZoneSystem::GetOrCreateDensityClusterData_ExternalLocked",
          (__int64)"m_DensityClusterCreationLock",
          1);
      *(_DWORD *)(v11 + 8) = v17;
    }
    if ( !*(_QWORD *)v12 )
    {
      v19 = sub_1402A63D0(80);
      if ( v19 )
      {
        *(_QWORD *)(v19 + 8) = 0;
        *(_QWORD *)(v19 + 48) = 0;
        *(_QWORD *)(v19 + 56) = 0;
        *(_DWORD *)(v19 + 76) = 0;
        *(_DWORD *)v19 = 0;
        *(_DWORD *)(v19 + 4) = -1;
        *(_QWORD *)(v19 + 16) = &unk_1480D3E60;
        *(_QWORD *)(v19 + 24) = 0;
        *(_QWORD *)(v19 + 32) = 0;
        *(_QWORD *)(v19 + 40) = 0;
        *(_QWORD *)(v19 + 64) = 0;
      }
      else
      {
        v19 = 0;
      }
      *(_QWORD *)v12 = v19;
      *(_DWORD *)(v19 + 72) = a4;
    }
    v20 = *(_QWORD **)v12;
    if ( *(_DWORD *)(*(_QWORD *)v12 + 72LL) != a4 )
    {
      if ( v20[4] && v20[5] )
      {
        v21 = 0;
        v22 = 0;
        do
        {
          if ( *(char *)(v20[2] + v21) >= 0 )
          {
            v23 = v20[3];
            v24 = *(_QWORD *)(v23 + v22 + 40);
            if ( v24 )
              sub_1402A63C0(v24, v16);
            v25 = *(_QWORD *)(v23 + v22 + 16);
            if ( v25 )
              sub_1402A63C0(v25, v16);
          }
          v26 = v20[5];
          ++v21;
          v22 += 64;
        }
        while ( v21 != v26 );
        v27 = (void *)v20[2];
        v20[4] = 0;
        memset(v27, -128, v26 + 16);
        *(_BYTE *)(v26 + v20[2]) = -1;
        v20[8] = v20[5] - (v20[5] >> 3) - v20[4];
      }
      *(_DWORD *)(*(_QWORD *)v12 + 72LL) = a4;
    }
    v14 = *(_QWORD **)v12;
    if ( v11 )
    {
      v28 = *(_DWORD *)(v11 + 12);
      if ( v28 )
      {
        *(_DWORD *)(v11 + 12) = v28 - 1;
      }
      else
      {
        *(_DWORD *)(v11 + 8) = -1;
        n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v11, 0, 0x200000);
        if ( n0x200000 != 0x200000 )
          sub_1403DEBA0(v11, n0x200000);
      }
    }
  }
  return v14;
}

// --- End Function: sub_147060810 (0x147060810) ---

// --- Function: sub_147060E20 (0x147060E20) ---
double *__fastcall sub_147060E20(__int64 a1, double *a2, _DWORD *a3, int a4)
{
  __int64 _RSI; // rdi
  unsigned __int64 v9; // r15
  int v10; // r14d
  __int64 v11; // rax
  double v12; // xmm1_8
  char v13; // r14
  int v14; // r12d
  int v15; // ecx
  __int64 v16; // rdx
  __int64 v17; // rax
  double v18; // xmm1_8
  int n2816; // [rsp+30h] [rbp-59h] BYREF
  __int64 v21; // [rsp+34h] [rbp-55h]
  int v22; // [rsp+3Ch] [rbp-4Dh]
  __int64 v23; // [rsp+40h] [rbp-49h]
  unsigned __int64 v24; // [rsp+48h] [rbp-41h]
  __int64 v25; // [rsp+50h] [rbp-39h]
  __int64 v26; // [rsp+58h] [rbp-31h]
  _BYTE v27[64]; // [rsp+80h] [rbp-9h] BYREF

  _RSI = 0;
  n2816 = 2816;
  v21 = 0;
  v22 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v23 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( (*a3 & 0xFFFFFF) != 0xFFFFFF )
  {
    v9 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10559896)
       + (*a3 & 0xFFFFFF)
       * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10560336);
    if ( a4 )
    {
      v10 = a4 - 2;
      if ( v10 )
      {
        v24 = __rdtsc();
        if ( v10 == 1 )
        {
          *a2 = 0.0;
          a2[1] = 0.0;
          a2[2] = 0.0;
        }
        goto LABEL_22;
      }
      v11 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560346);
      v12 = *(double *)(v11 + v9 + 96);
      *(_OWORD *)a2 = *(_OWORD *)(v11 + v9 + 80);
      a2[2] = v12;
LABEL_21:
      v24 = __rdtsc();
LABEL_22:
      qword_149A05E08(&n2816);
      return a2;
    }
    v13 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
    if ( !v13 )
    {
      if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360() + 24) )
      {
        ++*(_DWORD *)(a1 + 20);
      }
      else
      {
        v14 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
        if ( (*(_QWORD *)&v14 & 0x200000LL) != 0 )
          sub_1403CD0A0(a1 + 8, v14, (unsigned int)"CZoneSystem::GetPosition", (unsigned int)"m_GlobalStateLock", 1);
      }
    }
    v15 = *(_DWORD *)(v9 + 16);
    if ( v15 != -1 )
    {
      if ( (_WORD)v15 )
      {
        v16 = (unsigned __int16)v15;
        if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v15 + 6) != HIWORD(v15) )
          goto LABEL_19;
      }
      else
      {
        v16 = 0;
      }
      _RSI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
    }
LABEL_19:
    v17 = sub_147040C90(
            _RSI,
            (__int64)v27,
            v9 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560346) + 48LL);
    v18 = *(double *)(v17 + 48);
    *(_OWORD *)a2 = *(_OWORD *)(v17 + 32);
    a2[2] = v18;
    if ( !v13 )
      sub_1402D42F0(a1 + 8);
    goto LABEL_21;
  }
  *a2 = 0.0;
  a2[1] = 0.0;
  a2[2] = 0.0;
  v24 = __rdtsc();
  qword_149A05E08(&n2816);
  return a2;
}

// --- End Function: sub_147060E20 (0x147060E20) ---

// --- Function: sub_147063060 (0x147063060) ---
_QWORD *__fastcall sub_147063060(__int64 a1, _QWORD *a2, _DWORD *a3, int a4)
{
  __int64 _RSI; // rsi
  unsigned __int64 v9; // r15
  int v10; // r14d
  __int64 v11; // rdx
  int v12; // r14d
  int v13; // r12d
  int v14; // ecx
  __int64 v15; // rdx
  _QWORD *v16; // rax
  __int64 v17; // rdx
  int n2816; // [rsp+30h] [rbp-59h] BYREF
  __int64 v20; // [rsp+34h] [rbp-55h]
  int v21; // [rsp+3Ch] [rbp-4Dh]
  __int64 v22; // [rsp+40h] [rbp-49h]
  unsigned __int64 v23; // [rsp+48h] [rbp-41h]
  __int64 v24; // [rsp+50h] [rbp-39h]
  __int64 v25; // [rsp+58h] [rbp-31h]
  _BYTE v26[64]; // [rsp+80h] [rbp-9h] BYREF

  _RSI = 0;
  n2816 = 2816;
  v20 = 0;
  v21 = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v22 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( (*a3 & 0xFFFFFF) != 0xFFFFFF )
  {
    v9 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10559896)
       + (*a3 & 0xFFFFFF)
       * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10560336);
    if ( a4 )
    {
      v10 = a4 - 2;
      if ( v10 )
      {
        if ( v10 == 1 )
        {
          *a2 = 0;
          a2[3] = 0x3FF0000000000000LL;
          a2[1] = 0;
          a2[2] = 0;
        }
      }
      else
      {
        v11 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560346);
        a2[3] = *(_QWORD *)(v11 + v9 + 72);
        *a2 = *(_QWORD *)(v11 + v9 + 48);
        a2[1] = *(_QWORD *)(v11 + v9 + 56);
        a2[2] = *(_QWORD *)(v11 + v9 + 64);
      }
LABEL_21:
      v23 = __rdtsc();
      qword_149A05E08(&n2816);
      return a2;
    }
    v12 = *(unsigned __int8 *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
    if ( !(_BYTE)v12 )
    {
      if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
      {
        ++*(_DWORD *)(a1 + 20);
      }
      else
      {
        v13 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
        if ( (*(_QWORD *)&v13 & 0x200000LL) != 0 )
          sub_1403CD0A0(a1 + 8, v13, (unsigned int)"CZoneSystem::GetRotation", (unsigned int)"m_GlobalStateLock", 1);
      }
    }
    v14 = *(_DWORD *)(v9 + 16);
    if ( v14 != -1 )
    {
      if ( (_WORD)v14 )
      {
        v15 = (unsigned __int16)v14;
        if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
          goto LABEL_19;
      }
      else
      {
        v15 = 0;
      }
      _RSI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v15) & 0xFFFFFFFFFFFFLL;
    }
LABEL_19:
    v16 = (_QWORD *)sub_147040C90(
                      _RSI,
                      (__int64)v26,
                      v9 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560346) + 48LL);
    a2[3] = v16[3];
    *a2 = *v16;
    v17 = v16[1];
    a2[2] = v16[2];
    a2[1] = v17;
    if ( !(_BYTE)v12 )
      sub_1402D42F0(a1 + 8);
    goto LABEL_21;
  }
  *a2 = 0;
  a2[3] = 0x3FF0000000000000LL;
  a2[1] = 0;
  a2[2] = 0;
  v23 = __rdtsc();
  qword_149A05E08(&n2816);
  return a2;
}

// --- End Function: sub_147063060 (0x147063060) ---

// --- Function: sub_1470632F0 (0x1470632F0) ---
__m128 __fastcall sub_1470632F0(__int64 a1, _DWORD *a2, int a3)
{
  __int128 v3; // xmm6
  __int128 v7; // xmm6
  unsigned __int64 v8; // rdx
  int v9; // edi
  int n2816; // [rsp+30h] [rbp-68h] BYREF
  __int64 v12; // [rsp+34h] [rbp-64h]
  int v13; // [rsp+3Ch] [rbp-5Ch]
  __int64 v14; // [rsp+40h] [rbp-58h]
  unsigned __int64 v15; // [rsp+48h] [rbp-50h]
  __int64 v16; // [rsp+50h] [rbp-48h]
  __int64 v17; // [rsp+58h] [rbp-40h]
  __int128 v18; // [rsp+80h] [rbp-18h]

  n2816 = 2816;
  v12 = 0;
  v13 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v14 = 1;
  v18 = v3;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( (*a2 & 0xFFFFFF) == 0xFFFFFF )
    goto LABEL_2;
  if ( !a3 || (v9 = a3 - 2) == 0 )
  {
    v8 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*a2 >> 24) + 10559896)
       + (*a2 & 0xFFFFFF)
       * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*a2 >> 24) + 10560336);
    v7 = *(unsigned __int64 *)(*(unsigned __int16 *)(22LL * (*(_WORD *)(v8 + 8) & 0xF) + a1 + 10560346) + v8 + 104);
    goto LABEL_8;
  }
  if ( v9 == 1 )
LABEL_2:
    v7 = 0x3FF0000000000000uLL;
  else
    v7 = 0;
LABEL_8:
  v15 = __rdtsc();
  qword_149A05E08(&n2816);
  return (__m128)v7;
}

// --- End Function: sub_1470632F0 (0x1470632F0) ---

// --- Function: sub_1470639B0 (0x1470639B0) ---
__int64 __fastcall sub_1470639B0(int a1, __int64 a2, int a3, int a4)
{
  unsigned int v4; // eax

  v4 = -1;
  if ( !a4 )
    v4 = dword_149A0A48C;
  sub_1470639E0(a1, a2, a3, a4, v4);
  return a2;
}

// --- End Function: sub_1470639B0 (0x1470639B0) ---

// --- Function: sub_1470639E0 (0x1470639E0) ---
__int64 __fastcall sub_1470639E0(__int64 a1, __int64 a2, _DWORD *a3, int a4, unsigned int a5)
{
  unsigned __int64 v8; // rsi
  int v9; // r9d
  __int64 v10; // rdx
  char v11; // r14
  int v12; // edx
  int v13; // edx
  __int64 v14; // rcx
  __int64 v15; // rcx

  if ( (*a3 & 0xFFFFFF) == 0xFFFFFF )
    goto LABEL_2;
  v8 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10559896)
     + (*a3 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*a3 >> 24) + 10560336);
  if ( !a4 )
  {
    v11 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
    if ( !v11 )
    {
      if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
      {
        ++*(_DWORD *)(a1 + 20);
      }
      else
      {
        v12 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
        if ( (*(_QWORD *)&v12 & 0x200000LL) != 0 )
          sub_1403CD0A0(a1 + 8, v12, (unsigned int)"CZoneSystem::GetTransform", (unsigned int)"m_GlobalStateLock", 1);
      }
    }
    v13 = *(_DWORD *)(v8 + 16);
    if ( v13 == -1 )
    {
      v14 = 0;
      goto LABEL_20;
    }
    if ( (_WORD)v13 )
    {
      v15 = (unsigned __int16)v13;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v13 + 6) != HIWORD(v13) )
      {
        v14 = 0;
        goto LABEL_20;
      }
    }
    else
    {
      v15 = 0;
    }
    v14 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v15) & 0xFFFFFFFFFFFFLL;
LABEL_20:
    sub_147040F20(v14, a2, v8 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v8 + 8) & 0xF) + a1 + 10560346) + 48LL, a5);
    if ( !v11 )
      sub_1402D42F0(a1 + 8);
    return a2;
  }
  v9 = a4 - 2;
  if ( !v9 )
  {
    v10 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v8 + 8) & 0xF) + a1 + 10560346);
    *(_QWORD *)(a2 + 24) = *(_QWORD *)(v10 + v8 + 72);
    *(_QWORD *)a2 = *(_QWORD *)(v10 + v8 + 48);
    *(_QWORD *)(a2 + 8) = *(_QWORD *)(v10 + v8 + 56);
    *(_QWORD *)(a2 + 16) = *(_QWORD *)(v10 + v8 + 64);
    *(_OWORD *)(a2 + 32) = *(_OWORD *)(v10 + v8 + 80);
    *(double *)(a2 + 48) = *(double *)(v10 + v8 + 96);
    *(_QWORD *)(a2 + 56) = *(_QWORD *)(v10 + v8 + 104);
    return a2;
  }
  if ( v9 == 1 )
  {
LABEL_2:
    *(_QWORD *)(a2 + 24) = 0x3FF0000000000000LL;
    *(_QWORD *)a2 = 0;
    *(_QWORD *)(a2 + 8) = 0;
    *(_QWORD *)(a2 + 16) = 0;
    *(_QWORD *)(a2 + 32) = 0;
    *(_QWORD *)(a2 + 40) = 0;
    *(_QWORD *)(a2 + 48) = 0;
    *(_QWORD *)(a2 + 56) = 0x3FF0000000000000LL;
    return a2;
  }
  return a2;
}

// --- End Function: sub_1470639E0 (0x1470639E0) ---

// --- Function: sub_147063E80 (0x147063E80) ---
__int64 __fastcall sub_147063E80(int a1, __int64 a2, int a3, int a4)
{
  sub_147063EB0(a1, a2, a3, a4, dword_149A0A48C);
  return a2;
}

// --- End Function: sub_147063E80 (0x147063E80) ---

// --- Function: sub_147063EB0 (0x147063EB0) ---
__int64 __fastcall sub_147063EB0(__int64 a1, __int64 a2, _DWORD *r8_0, int a4, unsigned int a3)
{
  __int64 _RDI; // rsi
  __int64 v10; // rax
  unsigned __int64 v11; // rbx
  int v12; // r15d
  __int64 v13; // rdx
  __int64 v14; // rcx
  char v15; // r13
  int v16; // r12d
  int v17; // ecx
  __int64 v18; // rdx
  unsigned __int64 v19; // rdx
  __int64 v20; // rcx
  __int64 v21; // rbx
  __int64 v22; // rax
  double v23; // xmm5_8
  double v24; // xmm0_8
  double *Transform_ws; // rax
  double v26; // xmm15_8
  double v27; // xmm14_8
  double v28; // xmm7_8
  double v29; // xmm4_8
  double v30; // xmm13_8
  double v31; // xmm9_8
  double v32; // xmm12_8
  double v33; // xmm10_8
  double v34; // xmm11_8
  double v35; // xmm8_8
  double v36; // xmm1_8
  double v37; // xmm6_8
  double v38; // kr00_8
  double v39; // xmm4_8
  double v40; // xmm2_8
  double v41; // xmm7_8
  double v42; // xmm4_8
  double v43; // xmm0_8
  double v44; // xmm6_8
  double v45; // xmm5_8
  double v47; // xmm1_8
  double v49; // xmm1_8
  double v50; // xmm0_8
  double *v51; // rbx
  __int64 v52; // rax
  double v53; // xmm5_8
  double v54; // xmm0_8
  double *v55; // rax
  double v56; // xmm15_8
  double v57; // xmm14_8
  double v58; // xmm7_8
  double v59; // xmm4_8
  double v60; // xmm13_8
  double v61; // xmm9_8
  double v62; // xmm12_8
  double v63; // xmm10_8
  double v64; // xmm11_8
  double v65; // xmm8_8
  double v66; // xmm1_8
  double v67; // xmm6_8
  double v68; // kr00_8
  double v69; // xmm4_8
  double v70; // xmm2_8
  double v71; // xmm7_8
  double v72; // xmm4_8
  double v73; // xmm0_8
  double v75; // xmm1_8
  double v78; // [rsp+30h] [rbp-D0h]
  double v79; // [rsp+30h] [rbp-D0h]
  double v80; // [rsp+38h] [rbp-C8h]
  double v81; // [rsp+38h] [rbp-C8h]
  double v82; // [rsp+40h] [rbp-C0h]
  double v83; // [rsp+40h] [rbp-C0h]
  int n2816; // [rsp+50h] [rbp-B0h] BYREF
  __int64 v85; // [rsp+54h] [rbp-ACh]
  int v86; // [rsp+5Ch] [rbp-A4h]
  __int64 v87; // [rsp+60h] [rbp-A0h]
  unsigned __int64 v88; // [rsp+68h] [rbp-98h]
  __int64 v89; // [rsp+70h] [rbp-90h]
  __int64 v90; // [rsp+78h] [rbp-88h]
  __int128 v91; // [rsp+A0h] [rbp-60h]
  double v92[2]; // [rsp+B0h] [rbp-50h] BYREF
  __m256 v93; // [rsp+C0h] [rbp-40h]
  __int64 v94; // [rsp+E0h] [rbp-20h]
  double v95[2]; // [rsp+E8h] [rbp-18h] BYREF
  __m256 v96; // [rsp+F8h] [rbp-8h]
  __int64 v97; // [rsp+118h] [rbp+18h]
  _QWORD _RBX_1[14]; // [rsp+120h] [rbp+20h] BYREF
  _QWORD _RBX_[14]; // [rsp+190h] [rbp+90h] BYREF
  double v100; // [rsp+2E0h] [rbp+1E0h]
  double v101; // [rsp+2E0h] [rbp+1E0h]

  _RDI = 0;
  n2816 = 2816;
  v85 = 0;
  v86 = 0;
  v88 = 0;
  v89 = 0;
  v90 = 0;
  v87 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( (*r8_0 & 0xFFFFFF) == 0xFFFFFF )
    goto LABEL_2;
  v11 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)*r8_0 >> 24) + 10559896)
      + (*r8_0 & 0xFFFFFF)
      * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)*r8_0 >> 24) + 10560336);
  if ( a4 )
  {
    v12 = a4 - 2;
    if ( !v12 )
    {
      v13 = 22LL * (*(_WORD *)(v11 + 8) & 0xF);
      v14 = v11 + 48 + *(unsigned __int16 *)(v13 + a1 + 10560366);
      if ( *(_DWORD *)(v14 + 64) != a3 )
        v14 = v11 + 48 + *(unsigned __int16 *)(v13 + a1 + 10560346);
      *(_QWORD *)(a2 + 24) = *(_QWORD *)(v14 + 24);
      *(_QWORD *)a2 = *(_QWORD *)v14;
      *(_QWORD *)(a2 + 8) = *(_QWORD *)(v14 + 8);
      *(_QWORD *)(a2 + 16) = *(_QWORD *)(v14 + 16);
      *(_OWORD *)(a2 + 32) = *(_OWORD *)(v14 + 32);
      *(double *)(a2 + 48) = *(double *)(v14 + 48);
      v10 = *(_QWORD *)(v14 + 56);
      goto LABEL_3;
    }
    if ( v12 != 1 )
      goto LABEL_4;
LABEL_2:
    *(_QWORD *)a2 = 0;
    v10 = 0x3FF0000000000000LL;
    *(_QWORD *)(a2 + 24) = 0x3FF0000000000000LL;
    *(_QWORD *)(a2 + 8) = 0;
    *(_QWORD *)(a2 + 16) = 0;
    *(_QWORD *)(a2 + 32) = 0;
    *(_QWORD *)(a2 + 40) = 0;
    *(_QWORD *)(a2 + 48) = 0;
LABEL_3:
    *(_QWORD *)(a2 + 56) = v10;
LABEL_4:
    v88 = __rdtsc();
    qword_149A05E08(&n2816);
    return a2;
  }
  v15 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v15 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v16 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v16 & 0x200000LL) != 0 )
        sub_1403CD0A0(
          a1 + 8,
          v16,
          (unsigned int)"CZoneSystem::GetTransformInPreviousFrame",
          (unsigned int)"m_GlobalStateLock",
          1);
    }
  }
  v17 = *(_DWORD *)(v11 + 16);
  if ( v17 != -1 )
  {
    if ( (_WORD)v17 )
    {
      v18 = (unsigned __int16)v17;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v17 + 6) != HIWORD(v17) )
        goto LABEL_23;
    }
    else
    {
      v18 = 0;
    }
    _RDI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v18) & 0xFFFFFFFFFFFFLL;
  }
LABEL_23:
  v19 = v11 + 48;
  v20 = 22LL * (*(_WORD *)(v11 + 8) & 0xF);
  v21 = v11 + 48 + *(unsigned __int16 *)(v20 + a1 + 10560366);
  if ( *(_DWORD *)(v21 + 64) == a3 )
  {
    if ( a3 == *(_DWORD *)(_RDI + 376) )
    {
      v22 = sub_147061210(_RDI, a3);
      v23 = *(double *)v22;
      v24 = *(double *)(v22 + 8);
      v93 = *(__m256 *)(v22 + 16);
      v94 = *(_QWORD *)(v22 + 48);
      v92[0] = v23;
      v92[1] = v24;
      Transform_ws = v92;
    }
    else
    {
      Transform_ws = (double *)CZone::GetTransform_ws(_RDI, _RBX_1, a3);
      v23 = *Transform_ws;
    }
    v26 = Transform_ws[1];
    v27 = Transform_ws[3];
    v28 = Transform_ws[2];
    v29 = *(double *)(v21 + 48);
    v30 = *(double *)(v21 + 40);
    v31 = *(double *)(v21 + 32);
    v32 = *(double *)(v21 + 16);
    v33 = *(double *)(v21 + 8);
    v34 = *(double *)v21;
    v35 = *(double *)(v21 + 24);
    v36 = Transform_ws[6];
    v91 = *((_OWORD *)Transform_ws + 2);
    v82 = v36;
    v100 = v23;
    v78 = v28;
    v37 = v29 * v26 - v30 * v28 + v31 * v27;
    v38 = v31 * v28 - v29 * v23 + v30 * v27;
    v80 = v29;
    v39 = v30 * v23 - v31 * v26 + v29 * v27;
    v40 = v37 * v28;
    v41 = v39 * v26 - v38 * v28;
    v42 = v40 - v39 * v23;
    v43 = v37 * v26;
    v44 = *(double *)(v21 + 56);
    v45 = v38 * v23 - v43;
    *(double *)a2 = v32 * v26 - v33 * v78 + v34 * v27 + v35 * v100;
    *(double *)(a2 + 8) = v34 * v78 - v32 * v100 + v27 * v33 + v35 * v26;
    *(double *)(a2 + 16) = v33 * v100 - v34 * v26 + v27 * v32 + v35 * v78;
    _XMM3 = v91;
    v47 = v31 + v41 + *(double *)&v91 + v41;
    *(double *)(a2 + 24) = v35 * v27 - v34 * v100 - v33 * v26 - v32 * v78;
    *(double *)(a2 + 32) = v47;
    __asm { vunpckhpd xmm3, xmm3, xmm3 }
    v49 = v30 + v42 + *(double *)&_XMM3 + v42;
    v50 = v45 + v80 + v82;
  }
  else
  {
    v51 = (double *)(v19 + *(unsigned __int16 *)(v20 + a1 + 10560346));
    if ( a3 == *(_DWORD *)(_RDI + 376) )
    {
      v52 = sub_147061210(_RDI, a3);
      v53 = *(double *)v52;
      v54 = *(double *)(v52 + 8);
      v96 = *(__m256 *)(v52 + 16);
      v97 = *(_QWORD *)(v52 + 48);
      v95[0] = v53;
      v95[1] = v54;
      v55 = v95;
    }
    else
    {
      v55 = (double *)CZone::GetTransform_ws(_RDI, _RBX_, a3);
      v53 = *v55;
    }
    v56 = v55[1];
    v57 = v55[3];
    v58 = v55[2];
    v59 = v51[6];
    v60 = v51[5];
    v61 = v51[4];
    v62 = v51[2];
    v63 = v51[1];
    v64 = *v51;
    v65 = v51[3];
    v66 = v55[6];
    v91 = *((_OWORD *)v55 + 2);
    v81 = v66;
    v101 = v53;
    v79 = v58;
    v67 = v59 * v56 - v60 * v58 + v61 * v57;
    v68 = v61 * v58 - v59 * v53 + v60 * v57;
    v83 = v59;
    v69 = v60 * v53 - v61 * v56 + v59 * v57;
    v70 = v67 * v58;
    v71 = v69 * v56 - v68 * v58;
    v72 = v70 - v69 * v53;
    v73 = v67 * v56;
    v44 = v51[7];
    v45 = v68 * v53 - v73;
    *(double *)a2 = v62 * v56 - v63 * v79 + v64 * v57 + v65 * v101;
    *(double *)(a2 + 8) = v64 * v79 - v62 * v101 + v63 * v57 + v56 * v65;
    *(double *)(a2 + 16) = v63 * v101 - v64 * v56 + v62 * v57 + v65 * v79;
    _XMM3 = v91;
    v75 = v61 + v71 + *(double *)&v91 + v71;
    *(double *)(a2 + 24) = v65 * v57 - v64 * v101 - v63 * v56 - v62 * v79;
    *(double *)(a2 + 32) = v75;
    __asm { vunpckhpd xmm3, xmm3, xmm3 }
    v49 = v60 + v72 + *(double *)&_XMM3 + v72;
    v50 = v45 + v83 + v81;
  }
  *(double *)(a2 + 40) = v49;
  *(double *)(a2 + 48) = v50 + v45;
  *(double *)(a2 + 56) = v44;
  if ( !v15 )
  {
    __asm { vzeroupper }
    sub_1402D42F0(a1 + 8);
  }
  v88 = __rdtsc();
  __asm { vzeroupper }
  qword_149A05E08(&n2816);
  return a2;
}

// --- End Function: sub_147063EB0 (0x147063EB0) ---

// --- Function: sub_147064A10 (0x147064A10) ---
__int64 __fastcall sub_147064A10(__int64 a1, __int64 a2, __int64 a3, int a4)
{
  unsigned __int64 v6; // r11
  __int64 v7; // r8
  int v8; // r9d
  int v10; // edx
  __int64 v11; // rax
  __int64 v12; // rcx
  __int64 _RSI; // rcx

  v6 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a3 + 3) + 10559896)
     + (*(_DWORD *)a3 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a3 + 3) + 10560336);
  v7 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v6 + 8) & 0xF) + a1 + 10560346) + v6 + 48;
  if ( !a4 )
  {
    v10 = *(_DWORD *)(v6 + 16);
    if ( v10 != -1 )
    {
      if ( (_WORD)v10 )
      {
        v11 = *(_QWORD *)(a1 + 10486016);
        v12 = (unsigned __int16)v10;
        if ( *(_WORD *)(v11 + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
          goto LABEL_9;
      }
      else
      {
        v12 = 0;
      }
      _RSI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
      goto LABEL_12;
    }
LABEL_9:
    _RSI = 0;
LABEL_12:
    sub_147040C90(_RSI, a2, v7);
    return a2;
  }
  v8 = a4 - 2;
  if ( !v8 )
  {
    *(_QWORD *)(a2 + 24) = *(_QWORD *)(v7 + 24);
    *(_QWORD *)a2 = *(_QWORD *)v7;
    *(_QWORD *)(a2 + 8) = *(_QWORD *)(v7 + 8);
    *(_QWORD *)(a2 + 16) = *(_QWORD *)(v7 + 16);
    *(_OWORD *)(a2 + 32) = *(_OWORD *)(v7 + 32);
    *(double *)(a2 + 48) = *(double *)(v7 + 48);
    *(_QWORD *)(a2 + 56) = *(_QWORD *)(v7 + 56);
    return a2;
  }
  if ( v8 == 1 )
  {
    *(_QWORD *)(a2 + 24) = 0x3FF0000000000000LL;
    *(_QWORD *)a2 = 0;
    *(_QWORD *)(a2 + 8) = 0;
    *(_QWORD *)(a2 + 16) = 0;
    *(_QWORD *)(a2 + 32) = 0;
    *(_QWORD *)(a2 + 40) = 0;
    *(_QWORD *)(a2 + 48) = 0;
    *(_QWORD *)(a2 + 56) = 0x3FF0000000000000LL;
    return a2;
  }
  return a2;
}

// --- End Function: sub_147064A10 (0x147064A10) ---

// --- Function: sub_147065000 (0x147065000) ---
__int64 __fastcall sub_147065000(__int64 a1, __int64 a2)
{
  __int64 v2; // rbx
  char v5; // bp
  int v6; // edx
  __int64 v7; // rdx
  unsigned __int64 v8; // r9
  int v9; // ecx
  __int64 v10; // r8
  __int64 v11; // r8
  int v12; // r9d
  __int64 v13; // r10
  __int64 v14; // rdi

  v2 = a1 + 8;
  v5 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v5 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v2 + 12);
    }
    else
    {
      v6 = _InterlockedIncrement64((volatile signed __int64 *)v2);
      if ( (*(_QWORD *)&v6 & 0x200000LL) != 0 )
        sub_1403CD0A0(v2, v6, (unsigned int)"CZoneSystem::GetVisArea", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v7 = 0;
  v8 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v9 = *(_DWORD *)(v8 + 16);
  if ( v9 == -1 )
  {
    v10 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v9 )
  {
    v11 = (unsigned __int16)v9;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v9 + 6) != HIWORD(v9) )
    {
      v10 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v11 = 0;
  }
  v10 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v11) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  v12 = *(_DWORD *)(v8 + 20);
  if ( !(_WORD)v12 )
  {
    v13 = 0;
    goto LABEL_17;
  }
  v13 = (unsigned __int16)v12;
  if ( *(_WORD *)(2896LL * (unsigned __int16)v12 + *(_QWORD *)(v10 + 480) + 2848) == HIWORD(v12) )
LABEL_17:
    v7 = *(_QWORD *)(v10 + 480) + 2896 * v13;
  v14 = *(_QWORD *)(v7 + 2816);
  if ( !v5 )
    sub_1402D42F0(v2);
  return v14;
}

// --- End Function: sub_147065000 (0x147065000) ---

// --- Function: sub_1470656A0 (0x1470656A0) ---
__int64 __fastcall sub_1470656A0(__int64 a1, __int64 a2)
{
  char v4; // bp
  int v5; // edx
  int v6; // r8d
  __int64 v7; // rbx
  __int64 v8; // rbx

  v4 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v4 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v5 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v5 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v5, (unsigned int)"CZoneSystem::GetZone", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v6 = *(_DWORD *)((*(_DWORD *)a2 & 0xFFFFFF)
                 * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336)
                 + *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
                 + 16);
  if ( v6 == -1 )
  {
    v7 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v6 )
  {
    v8 = (unsigned __int16)v6;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v6 + 6) != HIWORD(v6) )
    {
      v7 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v8 = 0;
  }
  v7 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v8) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  if ( !v4 )
    sub_1402D42F0(a1 + 8);
  return v7;
}

// --- End Function: sub_1470656A0 (0x1470656A0) ---

// --- Function: sub_1470657C0 (0x1470657C0) ---
__int64 __fastcall sub_1470657C0(__int64 a1, int a2)
{
  __int64 v2; // rsi
  char v5; // r14
  int v6; // edx
  __int64 v7; // rbx
  __int64 v8; // rdi
  __int64 v9; // rcx
  unsigned __int64 v11; // [rsp+50h] [rbp+8h] BYREF

  v2 = a1 + 8;
  v5 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v5 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v2 + 12);
    }
    else
    {
      v6 = _InterlockedIncrement64((volatile signed __int64 *)v2);
      if ( (*(_QWORD *)&v6 & 0x200000LL) != 0 )
        sub_1403CD0A0(v2, v6, (unsigned int)"CZoneSystem::GetZone", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v7 = 0;
  if ( a2 == -1 )
  {
    v8 = 0;
LABEL_15:
    v7 = v8;
    goto LABEL_16;
  }
  if ( (_WORD)a2 )
  {
    v9 = (unsigned __int16)a2;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)a2 + 6) != HIWORD(a2) )
    {
      v8 = 0;
      goto LABEL_15;
    }
  }
  else
  {
    v9 = 0;
  }
  v8 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v9) & 0xFFFFFFFFFFFFLL;
  if ( !v8 )
    goto LABEL_15;
  if ( !*(_WORD *)((*(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v9) & 0xFFFFFFFFFFFFLL) + 8) )
    goto LABEL_15;
  v11 = *(_QWORD *)((*(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v9) & 0xFFFFFFFFFFFFLL) + 0x190);
  if ( is_valid_handle_typeB(&v11) )
    goto LABEL_15;
LABEL_16:
  if ( !v5 )
    sub_1402D42F0(v2);
  return v7;
}

// --- End Function: sub_1470657C0 (0x1470657C0) ---

// --- Function: sub_147065930 (0x147065930) ---
__int64 __fastcall sub_147065930(__int64 a1, _DWORD *a2, __int64 a3, __int64 *a4, __int64 a5)
{
  __int64 v7; // rcx
  __int64 n0xFFFFFF; // rax
  __int64 v9; // rsi
  int v10; // edx
  __int64 v11; // rdx
  int v12; // edx
  __int64 v13; // rcx
  __int64 v14; // rcx

  v7 = (unsigned int)*a2;
  n0xFFFFFF = *a2 & 0xFFFFFF;
  if ( (_DWORD)n0xFFFFFF != 0xFFFFFF )
  {
    v9 = *(_QWORD *)(a1 + 72 * ((unsigned __int64)(unsigned int)v7 >> 24) + 10559896)
       + (v7 & 0xFFFFFF) * *(unsigned __int16 *)(a1 + 2 * ((unsigned __int64)(unsigned int)v7 >> 24) + 10560336);
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(v7) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v10 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v10 & 0x200000LL) != 0 )
        sub_1403CD0A0(
          a1 + 8,
          v10,
          (unsigned int)"CZoneSystem::GetZoneAndTransform",
          (unsigned int)"m_GlobalStateLock",
          1);
    }
    v11 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560346);
    *(_QWORD *)a5 = *(_QWORD *)(v11 + v9 + 48);
    *(_QWORD *)(a5 + 8) = *(_QWORD *)(v11 + v9 + 56);
    *(_QWORD *)(a5 + 16) = *(_QWORD *)(v11 + v9 + 64);
    *(_QWORD *)(a5 + 24) = *(_QWORD *)(v11 + v9 + 72);
    *(_OWORD *)(a5 + 32) = *(_OWORD *)(v11 + v9 + 80);
    *(double *)(a5 + 48) = *(double *)(v11 + v9 + 96);
    *(_QWORD *)(a5 + 56) = *(_QWORD *)(v11 + v9 + 104);
    v12 = *(_DWORD *)(v9 + 16);
    if ( v12 == -1 )
      goto LABEL_9;
    if ( (_WORD)v12 )
    {
      v13 = (unsigned __int16)v12;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v12 + 6) != HIWORD(v12) )
      {
LABEL_9:
        v14 = 0;
LABEL_12:
        *a4 = v14;
        return sub_1402D42F0(a1 + 8);
      }
    }
    else
    {
      v13 = 0;
    }
    v14 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v13) & 0xFFFFFFFFFFFFLL;
    goto LABEL_12;
  }
  return n0xFFFFFF;
}

// --- End Function: sub_147065930 (0x147065930) ---

// --- Function: sub_147065A90 (0x147065A90) ---
__int64 __fastcall sub_147065A90(__int64 a1, __int64 a2, __int64 *a3, __int64 a4, int n2, _DWORD *a6)
{
  __int64 v6; // r10
  __int64 _RSI; // r9
  __int64 result; // rax
  unsigned __int64 v12; // rdi
  int v13; // ecx
  __int64 v14; // r8
  __int64 v15; // r8
  double v16; // xmm2_8
  double v17; // xmm0_8
  double *v18; // rax
  int v19; // ecx
  __int64 v20; // rdx
  double v21[2]; // [rsp+20h] [rbp-88h] BYREF
  __m256 v22; // [rsp+30h] [rbp-78h]
  __int128 v23; // [rsp+50h] [rbp-58h]
  _BYTE v24[64]; // [rsp+60h] [rbp-48h] BYREF

  v6 = *(unsigned __int8 *)(a2 + 3);
  _RSI = 0;
  result = 9 * v6;
  v12 = *(_QWORD *)(a1 + 72 * v6 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v6 + 10560336);
  if ( a3 )
  {
    v13 = *(_DWORD *)(v12 + 16);
    if ( v13 == -1 )
    {
      result = 0;
LABEL_9:
      *a3 = result;
      goto LABEL_10;
    }
    if ( (_WORD)v13 )
    {
      v14 = (unsigned __int16)v13;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v13 + 6) != HIWORD(v13) )
      {
        result = 0;
        goto LABEL_9;
      }
    }
    else
    {
      v14 = 0;
    }
    result = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v14) & 0xFFFFFFFFFFFFLL;
    goto LABEL_9;
  }
LABEL_10:
  if ( !a4 )
    goto LABEL_21;
  v15 = v12 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v12 + 8) & 0xF) + a1 + 10560346) + 48LL;
  if ( n2 != 2 )
  {
    v19 = *(_DWORD *)(v12 + 16);
    if ( v19 != -1 )
    {
      if ( (_WORD)v19 )
      {
        v20 = (unsigned __int16)v19;
        if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v19 + 6) != HIWORD(v19) )
          goto LABEL_19;
      }
      else
      {
        v20 = 0;
      }
      _RSI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v20) & 0xFFFFFFFFFFFFLL;
    }
LABEL_19:
    v18 = (double *)sub_147040C90(_RSI, (__int64)v24, v15);
    v16 = *v18;
    goto LABEL_20;
  }
  v16 = *(double *)v15;
  v17 = *(double *)(v15 + 8);
  v22 = *(__m256 *)(v15 + 16);
  v23 = *(_OWORD *)(v15 + 48);
  v21[0] = v16;
  v21[1] = v17;
  v18 = v21;
LABEL_20:
  *(double *)a4 = v16;
  *(double *)(a4 + 8) = v18[1];
  *(double *)(a4 + 16) = v18[2];
  *(double *)(a4 + 24) = v18[3];
  *(_OWORD *)(a4 + 32) = *((_OWORD *)v18 + 2);
  *(double *)(a4 + 48) = v18[6];
  result = *((_QWORD *)v18 + 7);
  *(_QWORD *)(a4 + 56) = result;
LABEL_21:
  if ( a6 )
  {
    result = *(unsigned int *)(v12 + 20);
    *a6 = result;
  }
  __asm { vzeroupper }
  return result;
}

// --- End Function: sub_147065A90 (0x147065A90) ---

// --- Function: sub_147065C30 (0x147065C30) ---
__int64 __fastcall sub_147065C30(__int64 a1, __int64 a2, __int64 *a3, _QWORD *a4, __int64 a5, int n2)
{
  __int64 v6; // r10
  __int64 result; // rax
  unsigned __int64 v9; // rbx
  int v10; // edx
  __int64 _RDI; // rdi
  __int64 v12; // rdi
  __int64 v14; // rbp
  double v15; // xmm15_8
  double v16; // xmm10_8
  double v17; // xmm11_8
  double v18; // xmm13_8
  double v19; // xmm9_8
  double v20; // xmm8_8
  double v21; // xmm14_8
  double v22; // xmm5_8
  double v23; // kr00_8
  double v24; // xmm7_8
  double v25; // xmm5_8
  double v27; // xmm1_8
  double v28; // xmm0_8
  double v29; // xmm5_8
  double v30; // xmm8_8
  double v31; // xmm11_8
  double v32; // xmm10_8
  double v33; // xmm13_8
  int v35; // edx
  __int64 v36; // r8
  double v37; // [rsp+138h] [rbp+10h]
  double v38; // [rsp+150h] [rbp+28h]

  v6 = *(unsigned __int8 *)(a2 + 3);
  result = 9 * v6;
  v9 = *(_QWORD *)(a1 + 72 * v6 + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v6 + 10560336);
  v10 = *(_DWORD *)(v9 + 16);
  if ( v10 == -1 )
  {
    _RDI = 0;
    goto LABEL_8;
  }
  if ( (_WORD)v10 )
  {
    result = *(_QWORD *)(a1 + 10486016);
    v12 = (unsigned __int16)v10;
    if ( *(_WORD *)(result + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
    {
      _RDI = 0;
      goto LABEL_8;
    }
  }
  else
  {
    v12 = 0;
  }
  result = 0xFFFFFFFFFFFFLL;
  _RDI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
LABEL_8:
  if ( a3 )
    *a3 = _RDI;
  if ( a5 )
  {
    v14 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560346);
    if ( n2 == 2 )
    {
      *(_QWORD *)a5 = *(_QWORD *)(v9 + v14 + 48);
      *(_QWORD *)(a5 + 8) = *(_QWORD *)(v9 + v14 + 56);
      *(_QWORD *)(a5 + 16) = *(_QWORD *)(v9 + v14 + 64);
      *(_QWORD *)(a5 + 24) = *(_QWORD *)(v9 + v14 + 72);
      *(_OWORD *)(a5 + 32) = *(_OWORD *)(v9 + v14 + 80);
      *(double *)(a5 + 48) = *(double *)(v9 + v14 + 96);
      result = *(_QWORD *)(v9 + v14 + 104);
      *(_QWORD *)(a5 + 56) = result;
    }
    else
    {
      result = qword_15146BC68;
      if ( *(_DWORD *)(_RDI + 372) != *(_DWORD *)(qword_15146BC68 + 10486100) )
        result = CZone::RefreshWorldSpacePosition(_RDI, dword_149A0A48C);
      v15 = *(double *)(_RDI + 200);
      v16 = *(double *)(_RDI + 208);
      v17 = *(double *)(_RDI + 216);
      v18 = *(double *)(v9 + v14 + 96);
      v19 = *(double *)(v9 + v14 + 88);
      v20 = *(double *)(v9 + v14 + 80);
      v21 = *(double *)(v9 + v14 + 64);
      v37 = *(double *)(_RDI + 224);
      v22 = v20 * v17 - v15 * v18 + v37 * v19;
      v23 = v16 * (v15 * v19 - v20 * v16 + v37 * v18) - v17 * v22;
      v24 = *(double *)(v9 + v14 + 72);
      v25 = v15 * v22 - v16 * (v18 * v16 - v19 * v17 + v20 * v37);
      _XMM12 = COERCE_UNSIGNED_INT64(v23 + *(double *)(_RDI + 232) + v20 + v23);
      v27 = v25 + *(double *)(_RDI + 248);
      v28 = v18 + v25;
      v29 = *(double *)(v9 + v14 + 104);
      v30 = v27 + v28;
      v38 = v17;
      v31 = *(double *)(v9 + v14 + 56);
      v32 = *(double *)(v9 + v14 + 48);
      v33 = *(double *)(_RDI + 208);
      *(double *)a5 = v21 * v33 - v31 * v38 + v32 * v37 + v24 * v15;
      *(double *)(a5 + 8) = v32 * v38 - v21 * v15 + v31 * v37 + v24 * v33;
      *(double *)(a5 + 16) = v31 * v15 - v32 * v33 + v21 * v37 + v24 * v38;
      __asm { vunpcklpd xmm0, xmm12, xmm6 }
      *(double *)(a5 + 24) = v24 * v37 - v32 * v15 - v31 * v33 - v21 * v38;
      *(_OWORD *)(a5 + 32) = _XMM0;
      *(double *)(a5 + 48) = v30;
      *(double *)(a5 + 56) = v29;
    }
  }
  if ( a4 )
  {
    v35 = *(_DWORD *)(v9 + 20);
    if ( (_WORD)v35 )
    {
      result = *(_QWORD *)(_RDI + 480);
      v36 = (unsigned __int16)v35;
      if ( *(_WORD *)(2896LL * (unsigned __int16)v35 + result + 2848) != HIWORD(v35) )
      {
        *a4 = 0;
        return result;
      }
    }
    else
    {
      v36 = 0;
    }
    *a4 = *(_QWORD *)(_RDI + 480) + 2896 * v36;
  }
  return result;
}

// --- End Function: sub_147065C30 (0x147065C30) ---

// --- Function: sub_147066550 (0x147066550) ---
__int64 __fastcall sub_147066550(__int64 a1, int *a2)
{
  char v4; // bp
  int v5; // edx
  __int64 v6; // rcx
  int v7; // eax
  __int64 v8; // rbx
  unsigned __int64 v9; // r8
  int v10; // ecx
  __int64 v11; // rdx
  __int64 v12; // rdx
  int v13; // r8d
  __int64 v14; // r9

  v4 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v4 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v5 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v5 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v5, (unsigned int)"CZoneSystem::GetZoneData", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v6 = *((unsigned __int8 *)a2 + 3);
  v7 = *a2;
  v8 = 0;
  v9 = *(_QWORD *)(a1 + 72 * v6 + 10559896)
     + (v7 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v6 + 10560336);
  v10 = *(_DWORD *)(v9 + 16);
  if ( v10 == -1 )
  {
    v11 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v10 )
  {
    v12 = (unsigned __int16)v10;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
    {
      v11 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v12 = 0;
  }
  v11 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  v13 = *(_DWORD *)(v9 + 20);
  if ( !(_WORD)v13 )
  {
    v14 = 0;
    goto LABEL_17;
  }
  v14 = (unsigned __int16)v13;
  if ( *(_WORD *)(2896LL * (unsigned __int16)v13 + *(_QWORD *)(v11 + 480) + 2848) == HIWORD(v13) )
LABEL_17:
    v8 = *(_QWORD *)(v11 + 480) + 2896 * v14;
  if ( !v4 )
    sub_1402D42F0(a1 + 8);
  return v8;
}

// --- End Function: sub_147066550 (0x147066550) ---

// --- Function: sub_1470666A0 (0x1470666A0) ---
__int64 __fastcall sub_1470666A0(__int64 a1, int a2, int a3)
{
  __int64 v3; // rdi
  char v7; // r15
  int v8; // edx
  __int64 v9; // rbx
  __int64 v10; // rdx
  __int64 v11; // rdx
  __int64 v12; // r8

  v3 = a1 + 8;
  v7 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v7 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v3 + 12);
    }
    else
    {
      v8 = _InterlockedIncrement64((volatile signed __int64 *)v3);
      if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
        sub_1403CD0A0(v3, v8, (unsigned int)"CZoneSystem::GetZoneData", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v9 = 0;
  if ( a2 == -1 )
  {
    v10 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)a2 )
  {
    v11 = (unsigned __int16)a2;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)a2 + 6) != HIWORD(a2) )
    {
      v10 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v11 = 0;
  }
  v10 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v11) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  if ( !(_WORD)a3 )
  {
    v12 = 0;
    goto LABEL_17;
  }
  v12 = (unsigned __int16)a3;
  if ( *(_WORD *)(2896LL * (unsigned __int16)a3 + *(_QWORD *)(v10 + 480) + 2848) == HIWORD(a3) )
LABEL_17:
    v9 = *(_QWORD *)(v10 + 480) + 2896 * v12;
  if ( !v7 )
    sub_1402D42F0(v3);
  return v9;
}

// --- End Function: sub_1470666A0 (0x1470666A0) ---

// --- Function: sub_1470672C0 (0x1470672C0) ---
__int64 __fastcall sub_1470672C0(__int64 a1, unsigned int a2, __int64 a3, __int64 a4)
{
  char v7; // si
  int v8; // edx
  __int64 _RDI; // rax
  unsigned __int8 v10; // di
  __int64 result; // rax
  __int128 v12; // [rsp+30h] [rbp-58h]
  __m256 v13; // [rsp+40h] [rbp-48h]
  double v14; // [rsp+60h] [rbp-28h]

  v7 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v7 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v8 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v8, (unsigned int)"CZoneSystem::GetZoneTransform", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  _RDI = sub_147067480(a1, a2);
  if ( _RDI )
  {
    sub_147063C50(_RDI);
    *(_OWORD *)a4 = v12;
    *(__m256 *)(a4 + 16) = v13;
    *(double *)(a4 + 48) = v14;
    v10 = 1;
  }
  else
  {
    v10 = 0;
  }
  if ( !v7 )
  {
    __asm { vzeroupper }
    sub_1402D42F0(a1 + 8);
  }
  result = v10;
  __asm { vzeroupper }
  return result;
}

// --- End Function: sub_1470672C0 (0x1470672C0) ---

// --- Function: sub_14706C590 (0x14706C590) ---
__int64 __fastcall sub_14706C590(__int64 a1, __int64 a2)
{
  volatile signed __int64 *v4; // r13
  unsigned __int64 v5; // rsi
  __int64 v6; // rbx
  int v7; // edx
  __int16 v8; // ax
  __int64 v9; // rbx
  __int64 v10; // rdi
  __int64 v11; // r12
  volatile signed __int64 *v12; // r15
  int v13; // edx
  int v14; // ecx
  __int64 v15; // r14
  __int64 v16; // rdx
  __int64 v17; // rsi
  __int64 v18; // rbx
  _DWORD *v19; // rbx
  __int64 v20; // rcx
  signed __int32 v21; // esi
  signed __int32 v22; // eax
  _DWORD *v23; // r15
  __int64 v24; // r14
  int v25; // esi
  __int64 v26; // rbx
  signed __int32 v27; // eax
  int v28; // r14d
  __int64 v29; // rcx
  int v30; // esi
  _DWORD *v31; // r14
  unsigned __int32 v32; // esi
  _DWORD *v33; // rbx
  unsigned __int32 v34; // r14d
  signed __int64 v35; // rdx
  int n2816_1; // [rsp+30h] [rbp-79h] BYREF
  __int64 v38; // [rsp+34h] [rbp-75h]
  int v39; // [rsp+3Ch] [rbp-6Dh]
  __int64 v40; // [rsp+40h] [rbp-69h]
  unsigned __int64 v41; // [rsp+48h] [rbp-61h]
  __int64 v42; // [rsp+50h] [rbp-59h]
  __int64 v43; // [rsp+58h] [rbp-51h]
  int n2816; // [rsp+80h] [rbp-29h] BYREF
  __int64 v45; // [rsp+84h] [rbp-25h]
  int v46; // [rsp+8Ch] [rbp-1Dh]
  __int64 v47; // [rsp+90h] [rbp-19h]
  unsigned __int64 v48; // [rsp+98h] [rbp-11h]
  __int64 v49; // [rsp+A0h] [rbp-9h]
  __int64 v50; // [rsp+A8h] [rbp-1h]
  char v51; // [rsp+110h] [rbp+67h]
  volatile signed __int64 *v52; // [rsp+120h] [rbp+77h]

  n2816 = 2816;
  v45 = 0;
  v46 = 0;
  v48 = 0;
  v49 = 0;
  v50 = 0;
  v47 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v4 = (volatile signed __int64 *)(a1 + 8);
  v5 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v6 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v51 = *(_BYTE *)(v6 + 2544);
  if ( !v51 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v7 = _InterlockedIncrement64(v4);
      if ( (*(_QWORD *)&v7 & 0x200000LL) != 0 )
        sub_1403CD0A0(
          a1 + 8,
          v7,
          (unsigned int)"CZoneSystem::InvalidatePreviousTransform",
          (unsigned int)"m_GlobalStateLock",
          1);
    }
  }
  v8 = *(_WORD *)(v5 + 8);
  if ( (v8 & 0x4000) != 0 )
    *(_DWORD *)(*(unsigned __int16 *)(22LL * (v8 & 0xF) + a1 + 10560366) + v5 + 112) = 0;
  v9 = v6 + 2704;
  v10 = sub_1403E4B00(v9);
  if ( !v10 )
    v10 = allocWithProfilerInfo(0x20u, 0);
  *(_BYTE *)(v10 + 24) = 9;
  *(_QWORD *)v10 = 0;
  *(_QWORD *)(v10 + 8) = v5;
  *(_QWORD *)(v10 + 16) = v9;
  v11 = *(_WORD *)(v5 + 8) & 0xF;
  v12 = (volatile signed __int64 *)(a1 + 24 + 8 * v11);
  v52 = v12;
  v13 = _InterlockedIncrement64(v12);
  if ( (*(_QWORD *)&v13 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      a1 + 24 + 8 * v11,
      v13,
      (unsigned int)"CZoneSystem::InvalidatePreviousTransform",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  v14 = *(_DWORD *)(v5 + 16);
  if ( v14 == -1 )
  {
    v15 = 0;
    goto LABEL_19;
  }
  if ( (_WORD)v14 )
  {
    v16 = (unsigned __int16)v14;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
    {
      v15 = 0;
      goto LABEL_19;
    }
  }
  else
  {
    v16 = 0;
  }
  v15 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
LABEL_19:
  v41 = 0;
  v42 = 0;
  n2816_1 = 2816;
  v38 = 0;
  v39 = 0;
  v43 = 0;
  v40 = 1;
  qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v17 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v18 = *(_QWORD *)v10;
      sub_14704B550(v17, v10);
      v10 = v18;
    }
    while ( v18 );
    goto LABEL_21;
  }
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v11 + 10485976));
  v19 = (_DWORD *)(v15 + 66224 * v11 + 1472);
  _m_prefetchw(v19 + 1);
  v20 = v19[1] | 1u;
  v21 = _InterlockedOr(v19 + 1, 1u);
  if ( (v21 & 1) == 0 )
  {
LABEL_27:
    *v19 = *(_DWORD *)(sub_1402C8360(v20) + 24);
    v23 = (_DWORD *)(v15 + 66224 * v11 + 1472);
    while ( 1 )
    {
      v24 = qword_15146BC68;
      v25 = 0;
      if ( v10 )
      {
        do
        {
          v26 = *(_QWORD *)v10;
          sub_14704B550(v24, v10);
          ++v25;
          v10 = v26;
        }
        while ( v26 );
      }
      v27 = v23[1];
      v28 = v23[2] & 0x7FFF;
      if ( (unsigned __int16)v27 >> 1 != v28 )
        goto LABEL_38;
      *v23 = -1;
      v29 = v27 & 0xFFFFFFFE;
      if ( v27 != _InterlockedCompareExchange(v23 + 1, v29, v27) )
        break;
      v10 = 0;
LABEL_42:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 4 * v11 + 10485976), -v25) == v25 )
        qword_1499F5478(qword_15146BC68 + 10485976 + 4 * v11);
      if ( !v10 )
      {
        v41 = __rdtsc();
        qword_149A05E08(&n2816_1);
        v12 = v52;
        goto LABEL_46;
      }
    }
    *v23 = *(_DWORD *)(sub_1402C8360(v29) + 24);
LABEL_38:
    ++v23[2];
    v33 = &v23[4 * (v28 & 0xFFF) + 4];
    if ( (v33[1] & 0x7FFF) != v28 )
      sub_1470B7790(v23, v33 + 1);
    v10 = *((_QWORD *)v33 + 1);
    v34 = _InterlockedExchange(v33, v28);
    if ( (v34 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v23, v33, v34);
    goto LABEL_42;
  }
  while ( 1 )
  {
    v22 = _InterlockedCompareExchange(v19 + 1, v21 + 2, v21);
    if ( v21 == v22 )
      break;
    if ( (v22 & 1) != 0 )
    {
      v21 = v22;
    }
    else
    {
      _m_prefetchw(v19 + 1);
      v20 = v19[1] | 1u;
      v21 = _InterlockedOr(v19 + 1, 1u);
      if ( (v21 & 1) == 0 )
        goto LABEL_27;
    }
  }
  v30 = (unsigned __int16)v21 >> 1;
  v31 = &v19[4 * (v30 & 0xFFF) + 4];
  if ( (*v31 & 0x7FFF) != (((_WORD)v30 - 4096) & 0x7FFF) )
    sub_1470B7790(v19, &v19[4 * (v30 & 0xFFF) + 4]);
  *((_QWORD *)v31 + 1) = v10;
  v32 = _InterlockedExchange(v31 + 1, v30);
  if ( (v32 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v19, v31 + 1, v32);
LABEL_21:
  v41 = __rdtsc();
  qword_149A05E08(&n2816_1);
LABEL_46:
  v35 = _InterlockedDecrement64(v12);
  if ( (v35 & 0x3FF) == 0 && (v35 & 0xFFFF0000FFC00000uLL) != 0 )
    sub_1403CD3A0(v12);
  if ( !v51 )
    sub_1402D42F0(v4);
  v48 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_14706C590 (0x14706C590) ---

// --- Function: sub_1470765D0 (0x1470765D0) ---
__int64 __fastcall sub_1470765D0(__int64 a1, unsigned int *a2, __int64 _RDI, __int128 *a4)
{
  __int128 v4; // xmm6
  __int128 v5; // xmm7
  __int128 v6; // xmm8
  __int128 v7; // xmm9
  __int128 v8; // xmm10
  __int128 v9; // xmm11
  __int128 v10; // xmm12
  __int128 v11; // xmm13
  __int128 v12; // xmm14
  __int128 v13; // xmm15
  unsigned int v16; // ecx
  __int64 n0x200000; // rax
  unsigned __int64 v18; // rax
  __int64 v19; // rcx
  volatile signed __int64 *v20; // rsi
  __int64 _RSI; // r13
  __int128 *v22; // r12
  __int64 v23; // r14
  __int64 v24; // r14
  int v25; // ebx
  signed __int64 v26; // rax
  int _RSI_1; // ecx
  int v28; // eax
  unsigned __int16 n30770_2; // ax
  char v30; // bl
  double v31; // xmm6_8
  double v32; // xmm5_8
  double v33; // xmm4_8
  __int16 v34; // ax
  __int64 v35; // rdi
  double v36; // xmm14_8
  double v37; // xmm15_8
  __int64 v38; // rax
  __int64 v39; // rcx
  double v40; // xmm13_8
  double v41; // xmm12_8
  double v42; // xmm11_8
  double v43; // xmm6_8
  double v44; // xmm5_8
  double v45; // xmm4_8
  double v46; // xmm2_8
  double v47; // xmm7_8
  double v48; // xmm8_8
  double v49; // kr00_8
  double v50; // xmm5_8
  double v51; // xmm0_8
  double v52; // xmm6_8
  double v53; // xmm1_8
  double v54; // xmm4_8
  double v55; // xmm9_8
  double v56; // xmm1_8
  double v57; // xmm6_8
  double v58; // xmm7_8
  double *v59; // rax
  double v60; // xmm8_8
  double v61; // xmm9_8
  double v64; // xmm12_8
  double v65; // xmm13_8
  double v67; // xmm5_8
  double v68; // xmm6_8
  double v69; // xmm10_8
  double v70; // kr00_8
  double v71; // xmm12_8
  double v72; // xmm2_8
  double v73; // xmm14_8
  double v74; // xmm15_8
  double v75; // xmm6_8
  double v76; // xmm13_8
  double v77; // xmm5_8
  double v78; // xmm9_8
  double v79; // xmm8_8
  double v80; // xmm10_8
  double v81; // xmm3_8
  double v82; // kr00_8
  double v83; // kr00_8
  double v84; // xmm9_8
  double v85; // xmm10_8
  double v86; // xmm8_8
  double v87; // xmm7_8
  double v88; // xmm6_8
  double v89; // xmm4_8
  double v90; // xmm5_8
  double v91; // xmm4_8
  double v92; // xmm1_8
  double v93; // xmm0_8
  double v94; // xmm3_8
  double v95; // xmm6_8
  double v96; // xmm5_8
  double v97; // xmm1_8
  double v98; // xmm4_8
  double v99; // xmm0_8
  const void *v100; // rax
  __int16 v102; // ax
  double *v103; // rcx
  double v104; // xmm11_8
  double v105; // xmm9_8
  double v106; // xmm8_8
  double v107; // xmm13_8
  double v108; // xmm12_8
  double v109; // xmm10_8
  double v110; // xmm7_8
  double v111; // xmm5_8
  double v112; // xmm6_8
  double v113; // xmm0_8
  double v114; // xmm7_8
  double v115; // xmm5_8
  double v116; // xmm3_8
  double v118; // xmm0_8
  double v119; // xmm5_8
  double v120; // xmm11_8
  double v121; // xmm8_8
  __int64 _RDI_1; // rbx
  const void *v124; // rdx
  __int16 v125; // ax
  double v126; // rdx
  unsigned __int16 n30770; // ax
  double v128; // rdi
  __int64 (__fastcall *v129)(_QWORD, char *, __int16 *); // rbx
  __int16 v130; // ax
  __int64 v131; // rbx
  __int64 v132; // rax
  __int64 n4; // rcx
  __int64 v134; // r13
  __int64 v135; // r13
  __int64 v136; // rdi
  double v137; // rax
  __m256i v138; // ymm0
  __int128 v139; // xmm1
  __int64 v140; // r13
  int v141; // edx
  __int64 v142; // rbx
  signed __int64 v143; // rdx
  int v144; // eax
  unsigned __int16 n30770_1; // [rsp+38h] [rbp-D0h]
  __int16 v146; // [rsp+3Ah] [rbp-CEh] BYREF
  double v147; // [rsp+40h] [rbp-C8h]
  double v148; // [rsp+48h] [rbp-C0h]
  double v149; // [rsp+50h] [rbp-B8h]
  double v150; // [rsp+58h] [rbp-B0h]
  __int64 v151; // [rsp+60h] [rbp-A8h] BYREF
  double v152; // [rsp+68h] [rbp-A0h]
  double v153; // [rsp+70h] [rbp-98h]
  double v154; // [rsp+78h] [rbp-90h]
  double v155; // [rsp+80h] [rbp-88h]
  double v156; // [rsp+88h] [rbp-80h]
  double v157; // [rsp+90h] [rbp-78h]
  double v158; // [rsp+98h] [rbp-70h]
  double v159; // [rsp+A0h] [rbp-68h]
  double v160; // [rsp+A8h] [rbp-60h]
  double v161; // [rsp+B0h] [rbp-58h]
  double v162; // [rsp+B8h] [rbp-50h]
  double v163; // [rsp+C0h] [rbp-48h]
  double v164; // [rsp+C8h] [rbp-40h]
  __int64 v165; // [rsp+D0h] [rbp-38h] BYREF
  double v166; // [rsp+D8h] [rbp-30h] BYREF
  double v167; // [rsp+E0h] [rbp-28h]
  double v168; // [rsp+E8h] [rbp-20h]
  double v169; // [rsp+F0h] [rbp-18h]
  __int128 v170; // [rsp+F8h] [rbp-10h]
  double v171; // [rsp+108h] [rbp+0h]
  double v172; // [rsp+110h] [rbp+8h]
  __int128 v173; // [rsp+118h] [rbp+10h] BYREF
  __int64 v174; // [rsp+128h] [rbp+20h]
  __m256 v175; // [rsp+130h] [rbp+28h] BYREF
  __int128 v176; // [rsp+150h] [rbp+48h]
  double _RBX_1; // [rsp+160h] [rbp+58h] BYREF
  double v178; // [rsp+168h] [rbp+60h]
  double v179; // [rsp+170h] [rbp+68h]
  double v180; // [rsp+178h] [rbp+70h]
  double v181; // [rsp+180h] [rbp+78h]
  double v182; // [rsp+188h] [rbp+80h]
  double v183; // [rsp+190h] [rbp+88h]
  __int64 v184; // [rsp+198h] [rbp+90h] BYREF
  double v185; // [rsp+1A0h] [rbp+98h]
  double v186; // [rsp+1A8h] [rbp+A0h]
  double v187; // [rsp+1B0h] [rbp+A8h]
  double v188; // [rsp+1B8h] [rbp+B0h]
  double v189; // [rsp+1C0h] [rbp+B8h]
  double v190; // [rsp+1C8h] [rbp+C0h]
  char v191[8]; // [rsp+1D0h] [rbp+C8h] BYREF
  int n3; // [rsp+1D8h] [rbp+D0h] BYREF
  __int64 v193; // [rsp+1E0h] [rbp+D8h]
  double v194; // [rsp+1E8h] [rbp+E0h]
  int n2; // [rsp+1F8h] [rbp+F0h] BYREF
  __int64 v196; // [rsp+200h] [rbp+F8h]
  double v197; // [rsp+208h] [rbp+100h]
  __int128 v198; // [rsp+238h] [rbp+130h]
  double v199; // [rsp+248h] [rbp+140h]
  double v200; // [rsp+250h] [rbp+148h]
  __int128 v201; // [rsp+258h] [rbp+150h]
  __int128 v202; // [rsp+268h] [rbp+160h]
  __int128 v203; // [rsp+278h] [rbp+170h]
  __int128 v204; // [rsp+288h] [rbp+180h]
  __int128 v205; // [rsp+298h] [rbp+190h]
  __int128 v206; // [rsp+2A8h] [rbp+1A0h]
  __int128 v207; // [rsp+2B8h] [rbp+1B0h]
  __int128 v208; // [rsp+2C8h] [rbp+1C0h]
  __int128 v209; // [rsp+2D8h] [rbp+1D0h]
  __int128 v210; // [rsp+2E8h] [rbp+1E0h]
  double v211; // [rsp+340h] [rbp+238h]
  char v212; // [rsp+340h] [rbp+238h]
  __int64 v213; // [rsp+340h] [rbp+238h]

  v16 = *a2;
  n0x200000 = *a2 & 0xFFFFFF;
  if ( (_DWORD)n0x200000 != 0xFFFFFF )
  {
    v18 = v16;
    v19 = v16 & 0xFFFFFF;
    v20 = (volatile signed __int64 *)(a1 + 8);
    v18 >>= 24;
    _RSI = 0;
    v22 = 0;
    v23 = *(unsigned __int16 *)(a1 + 2 * v18 + 10560336);
    v173 = 0;
    v174 = 0;
    v24 = *(_QWORD *)(a1 + 72 * v18 + 10559896) + v19 * v23;
    v25 = *(_DWORD *)(sub_1402C8360(v19) + 24);
    if ( *(_DWORD *)(a1 + 16) == v25 )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v26 = _InterlockedCompareExchange64(v20, 0x200000, 0);
      if ( v26 )
        sub_1403DE750(a1 + 8, v26, 0, (unsigned int)"CZoneSystem::MoveToZone", (__int64)"m_GlobalStateLock", 1);
      *(_DWORD *)(a1 + 16) = v25;
    }
    n0x200000 = sub_1470B7660(a1);
    _RSI_1 = *(_DWORD *)(v24 + 16);
    if ( _RSI_1 != -1 )
    {
      if ( !(_WORD)_RSI_1
        || (n0x200000 = *(_QWORD *)(a1 + 10486016),
            _RSI = (unsigned __int16)_RSI_1,
            *(_WORD *)(n0x200000 + 8LL * (unsigned __int16)_RSI_1 + 6) == HIWORD(_RSI_1)) )
      {
        n0x200000 = *(_QWORD *)(a1 + 10486016);
        _RSI = *(_QWORD *)(n0x200000 + 8 * _RSI) & 0xFFFFFFFFFFFFLL;
      }
      else
      {
        _RSI = 0;
      }
    }
    if ( _RSI == _RDI )
    {
      if ( a1 != -8 )
      {
        v28 = *(_DWORD *)(a1 + 20);
        if ( v28 )
        {
          n0x200000 = (unsigned int)(v28 - 1);
          *(_DWORD *)(a1 + 20) = n0x200000;
        }
        else
        {
          *(_DWORD *)(a1 + 16) = -1;
          n0x200000 = _InterlockedCompareExchange64(v20, 0, 0x200000);
          if ( n0x200000 != 0x200000 )
            n0x200000 = sub_1403DEBA0(a1 + 8, n0x200000);
        }
      }
LABEL_73:
      if ( (_QWORD)v173 )
        return sub_1403A4F10(&v173, v173, (v174 - v173) & 0xFFFFFFFFFFFFFFE0uLL);
      return n0x200000;
    }
    n30770_2 = *(_WORD *)(v24 + 8);
    v210 = v4;
    v209 = v5;
    v208 = v6;
    v207 = v7;
    v206 = v8;
    v205 = v9;
    v204 = v10;
    v203 = v11;
    v202 = v12;
    v201 = v13;
    n30770_1 = n30770_2;
    v30 = (unsigned __int8)n30770_2 >> 5;
    CZone::GetTransform_ws(_RSI, &_RBX_1, dword_149A0A48C);
    CZone::GetInvertedTransform_ws(_RDI, (__int64)&v184, dword_149A0A48C);
    v31 = v185 * v183 - v186 * v182 + v187 * v181;
    v32 = v181 * v186 - *(double *)&v184 * v183 + v187 * v182;
    v33 = *(double *)&v184 * v182 - v181 * v185 + v187 * v183;
    v162 = v179 * v185 - v178 * v186 + _RBX_1 * v187 + v180 * *(double *)&v184;
    v148 = _RBX_1 * v186 - v179 * *(double *)&v184 + v178 * v187 + v180 * v185;
    v211 = v178 * *(double *)&v184 - _RBX_1 * v185 + v179 * v187 + v180 * v186;
    v34 = *(_WORD *)(v24 + 8);
    v35 = v24 + 48;
    v36 = v162;
    v163 = v181 + v185 * v33 - v186 * v32 + v188 + v185 * v33 - v186 * v32;
    v37 = v148;
    v164 = v186 * v31 - *(double *)&v184 * v33 + v182 + v189 + v186 * v31 - *(double *)&v184 * v33;
    v149 = *(double *)&v184 * v32 - v185 * v31 + v183 + v190 + *(double *)&v184 * v32 - v185 * v31;
    v147 = v180 * v187 - _RBX_1 * *(double *)&v184 - v178 * v185 - v179 * v186;
    v38 = v34 & 0xF;
    v39 = *(unsigned __int16 *)(22 * v38 + a1 + 10560346);
    v40 = *(double *)(v39 + v24 + 48 + 48);
    v41 = *(double *)(v39 + v24 + 48 + 40);
    v42 = *(double *)(v39 + v24 + 48 + 32);
    v43 = v148 * v40 - v211 * v41 + v147 * v42;
    v44 = v211 * v42 - v162 * v40 + v147 * v41;
    v45 = v162 * v41 - v148 * v42 + v147 * v40;
    v46 = v211 * v43;
    v47 = *(double *)(v39 + v24 + 48 + 16);
    v48 = v148 * v45 - v211 * v44;
    v49 = v162 * v44;
    v50 = *(double *)(v39 + v24 + 48);
    v51 = v148 * v43;
    v52 = *(double *)(v39 + v24 + 48 + 8);
    v53 = v162 * v45;
    v54 = *(double *)(v39 + v24 + 48 + 24);
    v55 = v46 - v53;
    v166 = v148 * v47 - v52 * v211 + v50 * v147 + v162 * v54;
    v167 = v50 * v211 - v162 * v47 + v52 * v147 + v148 * v54;
    v168 = v162 * v52 - v148 * v50 + v47 * v147 + v54 * v211;
    v56 = v148 * v52;
    v57 = v211;
    v58 = v54 * v147 - v162 * v50 - v56 - v211 * v47;
    v160 = v48 + v163 + v42 + v48;
    v161 = v55 + v164 + v41 + v55;
    v171 = v40 + v49 - v51 + v49 - v51 + v149;
    v150 = *(double *)(v39 + v24 + 48 + 56);
    v172 = v150;
    v169 = v58;
    if ( (v30 & 1) != 0 )
    {
      v59 = (double *)(v35 + *(unsigned __int16 *)(22 * v38 + a1 + 10560348));
      v60 = *v59;
      v61 = v59[3];
      v152 = v59[1];
      v154 = v59[2];
      v153 = v59[4];
      v155 = v59[5];
      v159 = v60;
      v158 = v61;
      if ( v60 > v61 )
      {
        __asm
        {
          vmovupd ymm0, cs:ymmword_1480EFCC0
          vmovupd xmm1, cs:xmmword_1480EFC60
        }
        v64 = v166;
        v65 = v167;
        _XMM8 = *(unsigned __int64 *)&v160;
        __asm
        {
          vmovupd [rbp+220h+var_1F8], ymm0
          vmovupd [rbp+220h+var_1D8], xmm1
        }
LABEL_23:
        v100 = *(const void **)v24;
        *(double *)(v39 + v35 + 16) = v168;
        *(double *)(v39 + v35) = v64;
        *(double *)(v39 + v35 + 8) = v65;
        *(double *)(v39 + v35 + 24) = v58;
        __asm { vunpcklpd xmm0, xmm8, xmm9 }
        *(_OWORD *)(v39 + v35 + 32) = _XMM0;
        v170 = _XMM0;
        *(double *)(v39 + v35 + 48) = v171;
        *(double *)(v39 + v35 + 56) = v150;
        v148 = *(double *)&v100;
        v102 = *(_WORD *)(v24 + 8);
        if ( (v102 & 0x4000) != 0 )
        {
          v103 = (double *)(v35 + *(unsigned __int16 *)(22LL * (v102 & 0xF) + a1 + 10560366));
          v104 = v103[6];
          v105 = v103[5];
          v106 = v103[4];
          v107 = v103[2];
          v108 = v103[1];
          v109 = *v103;
          v110 = v104 * v37 - v105 * v57 + v106 * v147;
          v111 = v106 * v57 - v104 * v36 + v105 * v147;
          v112 = v37 * (v105 * v36 - v106 * v37 + v104 * v147) - v57 * v111;
          v113 = v110 * v37;
          v114 = v103[3];
          v115 = v36 * v111 - v113;
          v116 = v115 + v149;
          _XMM6 = COERCE_UNSIGNED_INT64(v106 + v112 + v112 + v163);
          v118 = v104 + v115;
          v119 = v103[7];
          v120 = v147;
          v121 = v116 + v118;
          *v103 = v37 * v107 - v211 * v108 + v147 * *v103 + v36 * v114;
          v103[1] = v211 * v109 - v36 * v107 + v120 * v108 + v37 * v114;
          v103[2] = v36 * v108 - v37 * v109 + v120 * v107 + v211 * v114;
          v103[3] = v120 * v114 - v36 * v109 - v37 * v108 - v211 * v107;
          v200 = v119;
          __asm { vunpcklpd xmm0, xmm6, xmm4 }
          *((_OWORD *)v103 + 2) = _XMM0;
          v103[6] = v121;
          v103[7] = v119;
          v102 = *(_WORD *)(v24 + 8);
          v199 = v121;
          v198 = _XMM0;
        }
        _RDI_1 = _RDI;
        *(_DWORD *)(v24 + 16) = *(_DWORD *)(_RDI + 12);
        if ( *(_WORD *)(v24 + 10) < 0xFFFCu )
        {
          v124 = *(const void **)v24;
          *(_WORD *)(v24 + 10) = -3;
          __asm { vzeroupper }
          LogTraceConditional(
            "MoveToZone won't work with ForcedVisAreas, changing VisAreas mode for object %p(%d) to IGNORE_VISAREAS",
            v124,
            v102 & 0xF);
        }
        __asm { vzeroupper }
        v157 = COERCE_DOUBLE(sub_14704E290(_RDI, v24, 0, (unsigned int)&v166, (__int64)&v175));
        v125 = *(_WORD *)(v24 + 8);
        *(_DWORD *)(v24 + 20) = (*(unsigned __int16 *)(*(_QWORD *)&v157 + 2848LL) << 16)
                              | ((LODWORD(v157) - *(_DWORD *)(_RDI + 480)) / 2896);
        if ( (v125 & 0x2000) != 0 )
        {
          if ( a4 )
          {
            v22 = a4;
          }
          else
          {
            v22 = &v173;
            *(_BYTE *)(*(_QWORD *)(sub_1402C8360(0x2000) + 16) + (v125 & 0xF) + 41LL) = 1;
          }
        }
        *(_QWORD *)&v126 = v35 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v24 + 8) & 0xF) + a1 + 10560360);
        v149 = v126;
        if ( (n30770_1 & 0x2000) == 0
          || !(unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, *(_QWORD *)&v126)
          || (*(_BYTE *)(v24 + 12) & 8) == 0
          || (v212 = 1, !*(_BYTE *)(v24 + 40)) )
        {
          v212 = 0;
        }
        n30770 = n30770_1;
        v128 = v148;
        if ( n30770_1 == 30770 )
        {
          v129 = *(__int64 (__fastcall **)(_QWORD, char *, __int16 *))(**(_QWORD **)&v148 + 832LL);
          v130 = word_14981CC14;
          if ( word_14981CC14 == -1 )
          {
            v130 = *(_WORD *)(*(__int64 (__fastcall **)(__int64, __int64 *, const char *))(*(_QWORD *)qword_149A0A318
                                                                                         + 16LL))(
                               qword_149A0A318,
                               &v151,
                               "IEntityAreaProxy");
            word_14981CC14 = v130;
          }
          v146 = v130;
          v131 = *(_QWORD *)v129(*(_QWORD *)&v148, v191, &v146);
          v165 = v131;
          if ( is_valid_handle_typeA(&v165) )
          {
            if ( v131 )
            {
              v132 = sub_1403B6A80(v131 & 0xFFFFFFFFFFFFLL);
              n4 = *(unsigned __int16 *)(v132 + 4);
              if ( (_WORD)n4 != 4
                && *(_WORD *)(v132 + 2) == (HIWORD(v131) & 0xFFF)
                && ((_WORD)n4 != 2 || *(_QWORD *)sub_1402C8360(n4)) )
              {
                check_handle_access_by_state(&v165);
              }
            }
          }
          n30770 = 30770;
          _RDI_1 = _RDI;
        }
        if ( v212 )
        {
          sub_1470A9BA0(_RSI, LODWORD(v128), n30770, LODWORD(v149), (__int64)v22);
          sub_1470A9980(_RDI_1, LODWORD(v128), n30770_1, LODWORD(v149), (__int64)v22);
        }
        if ( *(_BYTE *)(v24 + 40) && n30770_1 == 30770 )
        {
          v213 = sub_147060AD0(_RSI);
          v134 = sub_147060AD0(_RDI_1);
          if ( v213 && (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v213 + 1712LL))(v213) )
          {
            v193 = v213;
            n3 = 3;
            v194 = v128;
            sub_140431310(v22, &n3);
          }
          if ( v134 && (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v134 + 1712LL))(v134) )
          {
            n2 = 2;
            v196 = v134;
            v197 = v128;
            sub_140431310(v22, &n2);
          }
        }
        v135 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2592LL;
        v136 = sub_1403E4B00(v135);
        if ( !v136 )
          v136 = allocWithProfilerInfo(0x60u, 0);
        *(_BYTE *)(v136 + 24) = 2;
        *(_QWORD *)v136 = 0;
        *(_QWORD *)(v136 + 72) = 0;
        *(_QWORD *)(v136 + 80) = 0;
        *(_QWORD *)(v136 + 88) = 0;
        *(_QWORD *)(v136 + 56) = 0x8000000000000000uLL;
        *(_QWORD *)(v136 + 64) = 0x8000000000000000uLL;
        v137 = v157;
        v138 = (__m256i)v175;
        v139 = v176;
        *(_QWORD *)(v136 + 16) = v135;
        *(_QWORD *)(v136 + 8) = v24;
        *(__m256i *)(v136 + 48) = v138;
        *(double *)(v136 + 40) = v137;
        *(_OWORD *)(v136 + 80) = v139;
        *(_QWORD *)(v136 + 32) = _RDI_1;
        v140 = a1 + 8LL * (*(_WORD *)(v24 + 8) & 0xF);
        v141 = _InterlockedIncrement64((volatile signed __int64 *)(v140 + 24));
        if ( (*(_QWORD *)&v141 & 0x200000LL) != 0 )
        {
          __asm { vzeroupper }
          sub_1403CD0A0(
            v140 + 24,
            v141,
            (unsigned int)"CZoneSystem::MoveToZone",
            (unsigned int)"m_CullingLock[nTypeIndex]",
            1);
        }
        do
        {
          v142 = *(_QWORD *)v136;
          __asm { vzeroupper }
          n0x200000 = sub_14704B550(a1, v136);
          v136 = v142;
        }
        while ( v142 );
        v143 = _InterlockedDecrement64((volatile signed __int64 *)(v140 + 24));
        if ( (v143 & 0x3FF) == 0 )
        {
          n0x200000 = 0xFFFF0000FFC00000uLL;
          if ( (v143 & 0xFFFF0000FFC00000uLL) != 0 )
            n0x200000 = sub_1403CD3A0(v140 + 24);
        }
        if ( a1 != -8 )
        {
          v144 = *(_DWORD *)(a1 + 20);
          if ( v144 )
          {
            n0x200000 = (unsigned int)(v144 - 1);
            *(_DWORD *)(a1 + 20) = n0x200000;
          }
          else
          {
            *(_DWORD *)(a1 + 16) = -1;
            n0x200000 = _InterlockedCompareExchange64(v20, 0, 0x200000);
            if ( n0x200000 != 0x200000 )
              n0x200000 = sub_1403DEBA0(a1 + 8, n0x200000);
          }
        }
        if ( !a4 && v22 )
          n0x200000 = sub_14707E720(a1, *(unsigned __int16 *)(v24 + 8), v22);
        goto LABEL_73;
      }
    }
    else
    {
      v60 = -0.0;
      v61 = 0.0;
      v159 = -0.0;
      v155 = 0.0;
      v153 = 0.0;
      v158 = 0.0;
      v154 = -0.0;
      v152 = -0.0;
    }
    v67 = v166;
    v68 = v167;
    v69 = v168;
    v70 = v167 * (v69 + v69);
    v71 = v166 * (v69 + v69);
    v72 = v68 + v68;
    v73 = (v68 + v68) * v169;
    v74 = (v68 + v68) * v68;
    v75 = (v69 + v69) * v169;
    v76 = (v67 + v67) * v58;
    v156 = 1.0 - v67 * (v67 + v67);
    v77 = v69 * (v69 + v69);
    v78 = (v61 - v60) * 0.5;
    v79 = (v153 - v152) * 0.5;
    v80 = (v155 - v154) * 0.5;
    v81 = v156;
    v157 = (fabs(1.0 - v74 - v77) * v78 + fabs(v72 * v166 - v75) * v79 + fabs(v71 + v73) * v80) * v150;
    v156 = (fabs(v156 - v77) * v79 + fabs(v75 + v72 * v166) * v78 + fabs(v70 - v76) * v80) * v150;
    v82 = v70 + v76;
    v65 = v167;
    v83 = COERCE_DOUBLE(*(_QWORD *)&v82 & 0x7FFFFFFFFFFFFFFFLL) * v79 + fabs(v71 - v73) * v78 + fabs(v81 - v74) * v80;
    v84 = (v152 + v153) * 0.5;
    v85 = (v154 + v155) * 0.5;
    v86 = (v158 + v159) * 0.5;
    v64 = v166;
    v87 = v85 * v167 - v168 * v84 + v86 * v169;
    v88 = v86 * v168 - v166 * v85 + v84 * v169;
    v89 = v166 * v84 - v86 * v167 + v85 * v169;
    v90 = v89 * v167 - v88 * v168;
    v36 = v162;
    v91 = v87 * v168 - v89 * v166;
    v92 = v86 + v90;
    _XMM8 = *(unsigned __int64 *)&v160;
    v93 = v87 * v167;
    v58 = v169;
    v94 = v88 * v166 - v93;
    v95 = (v92 + v90) * v150 + v160;
    v96 = (v91 + v84 + v91) * v150 + v161;
    v97 = v95 - v157;
    v98 = (v94 + v85 + v94) * v150 + v171;
    v37 = v148;
    *(double *)&v175.m256_f32[2] = v96 - v156;
    v99 = v95 + v157;
    v57 = v178 * *(double *)&v184 - _RBX_1 * v185 + v179 * v187 + v180 * v186;
    *(double *)v175.m256_f32 = v97;
    *(double *)&v175.m256_f32[6] = v99;
    *(double *)&v175.m256_f32[4] = v98 - v83 * v150;
    *((double *)&v176 + 1) = v98 + v83 * v150;
    *(double *)&v176 = v96 + v156;
    goto LABEL_23;
  }
  return n0x200000;
}

// --- End Function: sub_1470765D0 (0x1470765D0) ---

// --- Function: sub_14707A870 (0x14707A870) ---
__int64 __fastcall sub_14707A870(__int64 a1, __int64 a2, __int128 *a3)
{
  __int64 result; // rax
  __int64 v7; // rcx
  __int128 *v8; // r15
  __int64 v9; // rdi
  int v10; // ebx
  signed __int64 v11; // rax
  int i; // eax
  int v13; // eax
  __int64 v14; // rax
  signed __int64 n0x200000; // rax
  __int128 v16; // [rsp+30h] [rbp-49h] BYREF
  __int64 v17; // [rsp+40h] [rbp-39h]
  int n2816; // [rsp+50h] [rbp-29h] BYREF
  __int64 v19; // [rsp+54h] [rbp-25h]
  int v20; // [rsp+5Ch] [rbp-1Dh]
  __int64 v21; // [rsp+60h] [rbp-19h]
  unsigned __int64 v22; // [rsp+68h] [rbp-11h]
  __int64 v23; // [rsp+70h] [rbp-9h]
  __int64 v24; // [rsp+78h] [rbp-1h]
  char v25; // [rsp+E8h] [rbp+6Fh]
  int v26; // [rsp+F8h] [rbp+7Fh] BYREF

  result = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1904LL))(a2);
  if ( (_DWORD)result != -1 )
  {
    result = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1912LL))(a2);
    if ( (_DWORD)result != -1 )
    {
      v19 = 0;
      v20 = 0;
      v22 = 0;
      v23 = 0;
      v24 = 0;
      n2816 = 2816;
      v21 = 1;
      qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
      v17 = 0;
      v16 = 0;
      if ( a3 )
      {
        v8 = a3;
      }
      else
      {
        v8 = &v16;
        *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v7) + 16) + 43LL) = 1;
      }
      v9 = qword_15146BC68;
      v25 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
      if ( !v25 )
      {
        if ( *(_DWORD *)(v9 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
        {
          ++*(_DWORD *)(v9 + 20);
        }
        else
        {
          v10 = _InterlockedIncrement64((volatile signed __int64 *)(v9 + 8));
          if ( (*(_QWORD *)&v10 & 0x200000LL) != 0 )
            sub_1403CD0A0(
              v9 + 8,
              v10,
              (unsigned int)"CZoneSystem::OnAreaUnhide",
              (unsigned int)"g_pZoneSystem->m_GlobalStateLock",
              1);
        }
      }
      v11 = _InterlockedCompareExchange64((volatile signed __int64 *)(a1 + 40), 0x200000, 0);
      if ( v11 )
        sub_1403DE750(
          a1 + 40,
          v11,
          0,
          (unsigned int)"CZoneSystem::OnAreaUnhide",
          (__int64)"m_CullingLock[nTypeIndex]",
          1);
      for ( i = *(_DWORD *)(a1 + 10485984); i; i = *(_DWORD *)(a1 + 10485984) )
      {
        v26 = i;
        qword_1499F5468(a1 + 10485984, &v26, 4, 0xFFFFFFFFLL);
      }
      v13 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1904LL))(a2);
      v14 = sub_1470657C0(a1, v13);
      sub_14707A220(v14, a2, v8);
      if ( a1 != -40 )
      {
        n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)(a1 + 40), 0, 0x200000);
        if ( n0x200000 != 0x200000 )
          sub_1403DEBA0(a1 + 40, n0x200000);
      }
      if ( !v25 )
        sub_1402D42F0(v9 + 8);
      if ( !a3 && v8 )
        sub_14707E720(a1, 30770, v8);
      if ( (_QWORD)v16 )
      {
        sub_1403A4F10(&v16, v16, (v17 - v16) & 0xFFFFFFFFFFFFFFE0uLL);
        v16 = 0;
        v17 = 0;
      }
      v22 = __rdtsc();
      return qword_149A05E08(&n2816);
    }
  }
  return result;
}

// --- End Function: sub_14707A870 (0x14707A870) ---

// --- Function: sub_14707AB00 (0x14707AB00) ---
__int64 __fastcall sub_14707AB00(__int64 a1, int *a2, __int128 *a3)
{
  __int128 *v3; // r12
  __int64 v6; // rcx
  int v7; // eax
  unsigned __int64 v8; // r13
  unsigned __int64 v9; // r13
  _QWORD *ThreadLocalStoragePointer; // rax
  char v11; // al
  int v12; // edx
  int v13; // ecx
  __int64 v14; // rdx
  __int64 *v15; // r15
  __int64 v16; // rdi
  __int64 v17; // rdi
  __int16 v18; // bx
  __int64 v19; // rsi
  __int16 v20; // ax
  __int64 v21; // rcx
  int *v22; // r14
  int *v23; // rbx
  int v24; // edx
  __int64 v25; // r8
  __int64 v26; // rax
  __int64 v27; // rsi
  __int64 v28; // rax
  unsigned __int64 *v29; // rsi
  __int64 v30; // rbx
  __int64 v31; // rax
  unsigned __int64 v32; // r8
  __int64 v33; // rcx
  int *v34; // r14
  int *v35; // rbx
  int v36; // eax
  __int64 v37; // r8
  __int64 v38; // rax
  __int64 v39; // rdi
  __int64 *v40; // rsi
  __int64 *v41; // rbx
  __int64 v42; // r14
  __int64 v43; // rdi
  __int64 v44; // rax
  __int64 v45; // rax
  __int64 v46; // rax
  __int128 v48; // [rsp+38h] [rbp-D0h] BYREF
  __int64 v49; // [rsp+48h] [rbp-C0h]
  __int128 v50; // [rsp+50h] [rbp-B8h] BYREF
  __int64 v51; // [rsp+60h] [rbp-A8h]
  _QWORD v52[2]; // [rsp+68h] [rbp-A0h] BYREF
  __int64 v53; // [rsp+80h] [rbp-88h]
  unsigned __int64 v54; // [rsp+88h] [rbp-80h]
  int n2816; // [rsp+98h] [rbp-70h] BYREF
  __int64 v56; // [rsp+9Ch] [rbp-6Ch]
  int v57; // [rsp+A4h] [rbp-64h]
  __int64 v58; // [rsp+A8h] [rbp-60h]
  unsigned __int64 v59; // [rsp+B0h] [rbp-58h]
  __int64 v60; // [rsp+B8h] [rbp-50h]
  __int64 v61; // [rsp+C0h] [rbp-48h]
  __m256 v62; // [rsp+E8h] [rbp-20h] BYREF
  __m256 v63; // [rsp+108h] [rbp+0h] BYREF
  char v65; // [rsp+180h] [rbp+78h]
  __int128 *v67; // [rsp+190h] [rbp+88h] BYREF

  v3 = a3;
  n2816 = 2816;
  v56 = 0;
  v57 = 0;
  v59 = 0;
  v60 = 0;
  v61 = 0;
  v58 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v6 = *((unsigned __int8 *)a2 + 3);
  v7 = *a2;
  v51 = 0;
  v8 = (v7 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v6 + 10560336);
  v50 = 0;
  v9 = *(_QWORD *)(a1 + 72 * v6 + 10559896) + v8;
  ThreadLocalStoragePointer = NtCurrentTeb()->ThreadLocalStoragePointer;
  v52[0] = v9;
  v11 = *(_BYTE *)(ThreadLocalStoragePointer[TlsIndex] + 2544LL);
  v65 = v11;
  if ( !v11 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v12 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v12 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v12, (unsigned int)"CZoneSystem::OnEntityHide", (unsigned int)"m_GlobalStateLock", 1);
    }
    v11 = 0;
  }
  if ( !*(_BYTE *)(v9 + 40) )
  {
    if ( !v11 )
      sub_1402D42F0(a1 + 8);
    goto LABEL_67;
  }
  v13 = *(_DWORD *)(v9 + 16);
  v14 = 0xFFFFFFFFFFFFLL;
  v15 = *(__int64 **)v9;
  if ( v13 == -1 )
  {
    v16 = 0;
    goto LABEL_17;
  }
  if ( (_WORD)v13 )
  {
    v17 = (unsigned __int16)v13;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v13 + 6) != HIWORD(v13) )
    {
      v16 = 0;
      goto LABEL_17;
    }
  }
  else
  {
    v17 = 0;
  }
  v16 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v17) & 0xFFFFFFFFFFFFLL;
LABEL_17:
  v18 = *(_WORD *)(v9 + 8);
  v19 = v18 & 0xF;
  v53 = v19;
  v54 = v9 + *(unsigned __int16 *)(22 * v19 + qword_15146BC68 + 10560360) + 48LL;
  if ( !v3 )
  {
    v3 = &v50;
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(22 * v19) + 16) + v19 + 41) = 1;
  }
  v20 = *(_WORD *)(v9 + 8);
  v49 = 0;
  v48 = 0;
  LOWORD(v62.m256_f32[6]) = v18;
  v67 = v3;
  v21 = *(unsigned __int16 *)(22LL * (v20 & 0xF) + a1 + 10560362);
  LODWORD(v62.m256_f32[0]) = 1;
  *(_QWORD *)&v62.m256_f32[4] = v15;
  v22 = *(int **)(v21 + v9 + 56);
  v23 = *(int **)(v21 + v9 + 48);
  if ( v23 != v22 )
  {
    while ( 1 )
    {
      v24 = *v23;
      if ( !(unsigned __int16)*v23 )
        break;
      v25 = (unsigned __int16)v24;
      if ( *(_WORD *)(2896LL * (unsigned __int16)v24 + *(_QWORD *)(v16 + 480) + 2848) == HIWORD(v24) )
        goto LABEL_24;
      v26 = 0;
LABEL_25:
      v27 = v26 + 2824;
      if ( (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v26 + 2824) + 1864LL))(
             *(_QWORD *)(v26 + 2824),
             0) )
      {
        sub_1402A8C60(&v48, v27);
      }
      if ( ++v23 == v22 )
        goto LABEL_28;
    }
    v25 = 0;
LABEL_24:
    v26 = *(_QWORD *)(v16 + 480) + 2896 * v25;
    goto LABEL_25;
  }
LABEL_28:
  v28 = (*(__int64 (__fastcall **)(__int64 *, __int64))(*v15 + 1608))(v15, v14);
  v29 = (unsigned __int64 *)(*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v28 + 8LL))(v28);
  if ( is_valid_handle_typeB((unsigned __int64 *)(v16 + 400)) && is_valid_handle_typeB((unsigned __int64 *)(v16 + 400)) )
    v30 = *(_QWORD *)(v16 + 400) & 0xFFFFFFFFFFFFLL;
  else
    v30 = 0;
  if ( v29 )
  {
    do
    {
      if ( !v29[55] || !v30 || (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v30 + 792LL))(v30) )
        break;
      v31 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v30 + 1680LL))(v30);
      v32 = *(_QWORD *)(qword_15146BC68 + 72LL * *(unsigned __int8 *)(v31 + 3) + 10559896)
          + (*(_DWORD *)v31 & 0xFFFFFF)
          * (unsigned __int64)*(unsigned __int16 *)(qword_15146BC68 + 2LL * *(unsigned __int8 *)(v31 + 3) + 10560336);
      v33 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v32 + 8) & 0xF) + qword_15146BC68 + 10560362);
      v34 = *(int **)(v33 + v32 + 56);
      v35 = *(int **)(v33 + v32 + 48);
      if ( v35 != v34 )
      {
        while ( 1 )
        {
          v36 = *v35;
          if ( !(unsigned __int16)*v35 )
            break;
          v37 = (unsigned __int16)v36;
          if ( *(_WORD *)(2896LL * (unsigned __int16)v36 + v29[60] + 2848) == HIWORD(v36) )
            goto LABEL_41;
          v38 = 0;
LABEL_42:
          v39 = v38 + 2824;
          if ( (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v38 + 2824) + 1864LL))(
                 *(_QWORD *)(v38 + 2824),
                 0) )
          {
            sub_1402A8C60(&v48, v39);
          }
          if ( ++v35 == v34 )
            goto LABEL_45;
        }
        v37 = 0;
LABEL_41:
        v38 = v29[60] + 2896 * v37;
        goto LABEL_42;
      }
LABEL_45:
      v30 = is_valid_handle_typeB(v29 + 50) && is_valid_handle_typeB(v29 + 50) ? v29[50] & 0xFFFFFFFFFFFFLL : 0LL;
      v29 = (unsigned __int64 *)v29[55];
    }
    while ( v29 );
    v3 = v67;
    v9 = v52[0];
  }
  v40 = (__int64 *)*((_QWORD *)&v48 + 1);
  v41 = (__int64 *)v48;
  if ( (_QWORD)v48 != *((_QWORD *)&v48 + 1) )
  {
    v42 = v53;
    do
    {
      v43 = *v41;
      v44 = *v15;
      *(_QWORD *)&v62.m256_f32[2] = *v41;
      v45 = (*(__int64 (__fastcall **)(__int64 *))(v44 + 1640))(v15);
      if ( v45 )
      {
        v67 = v3;
        v52[0] = &v63;
        v52[1] = &v67;
        v63 = v62;
        __asm { vzeroupper }
        sub_1470111D0(v45, v42, v52);
      }
      if ( (*(_BYTE *)(v9 + 12) & 8) != 0 )
      {
        v46 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v43 + 1640LL))(v43);
        if ( (unsigned __int8)sub_147048430(v54, v46) )
          sub_140431310(v3, &v62);
      }
      ++v41;
    }
    while ( v41 != v40 );
    v41 = (__int64 *)v48;
  }
  if ( v41 )
  {
    sub_1403A4F10(&v48, v41, (v49 - (_QWORD)v41) & 0xFFFFFFFFFFFFFFF8uLL);
    v48 = 0;
    v49 = 0;
  }
  if ( !v65 )
    sub_1402D42F0(a1 + 8);
  if ( !a3 && v3 )
    sub_14707E720(a1, *(unsigned __int16 *)(v9 + 8), v3);
LABEL_67:
  if ( (_QWORD)v50 )
  {
    sub_1403A4F10(&v50, v50, (v51 - v50) & 0xFFFFFFFFFFFFFFE0uLL);
    v50 = 0;
    v51 = 0;
  }
  v59 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_14707AB00 (0x14707AB00) ---

// --- Function: sub_14707B0C0 (0x14707B0C0) ---
__int64 __fastcall sub_14707B0C0(__int64 a1, int *a2, __int128 *a3)
{
  __int128 *v4; // r12
  __int64 v6; // rcx
  int v7; // eax
  unsigned __int64 v8; // r13
  unsigned __int64 v9; // r13
  _QWORD *ThreadLocalStoragePointer; // rax
  char v11; // al
  int v12; // edi
  int v13; // ecx
  __int64 v14; // rdx
  __int64 v15; // r15
  __int64 v16; // rdi
  __int64 v17; // rdi
  __int16 v18; // bx
  __int64 v19; // rsi
  __int16 v20; // ax
  __int64 v21; // rcx
  int *v22; // r14
  int *v23; // rbx
  int v24; // edx
  __int64 v25; // r8
  __int64 v26; // rax
  __int64 v27; // rsi
  __int64 v28; // rax
  unsigned __int64 *v29; // rsi
  __int64 v30; // rbx
  __int64 v31; // rax
  unsigned __int64 v32; // r8
  __int64 v33; // rcx
  int *v34; // r14
  int *v35; // rbx
  int v36; // eax
  __int64 v37; // r8
  __int64 v38; // rax
  __int64 v39; // rdi
  _QWORD *v40; // rsi
  _QWORD *v41; // rbx
  __int64 v42; // r14
  __int64 v43; // rdi
  __int64 v44; // rax
  __int64 v45; // rax
  __int128 v47; // [rsp+38h] [rbp-D0h] BYREF
  __int64 v48; // [rsp+48h] [rbp-C0h]
  __int128 v49; // [rsp+50h] [rbp-B8h] BYREF
  __int64 v50; // [rsp+60h] [rbp-A8h]
  _QWORD v51[2]; // [rsp+68h] [rbp-A0h] BYREF
  __int64 v52; // [rsp+80h] [rbp-88h]
  unsigned __int64 v53; // [rsp+88h] [rbp-80h]
  int n2816; // [rsp+98h] [rbp-70h] BYREF
  __int64 v55; // [rsp+9Ch] [rbp-6Ch]
  int v56; // [rsp+A4h] [rbp-64h]
  __int64 v57; // [rsp+A8h] [rbp-60h]
  unsigned __int64 v58; // [rsp+B0h] [rbp-58h]
  __int64 v59; // [rsp+B8h] [rbp-50h]
  __int64 v60; // [rsp+C0h] [rbp-48h]
  __m256 v61; // [rsp+E8h] [rbp-20h] BYREF
  __m256 v62; // [rsp+108h] [rbp+0h] BYREF
  char v64; // [rsp+180h] [rbp+78h]
  __int128 *v66; // [rsp+190h] [rbp+88h] BYREF

  v4 = a3;
  n2816 = 2816;
  v55 = 0;
  v56 = 0;
  v58 = 0;
  v59 = 0;
  v60 = 0;
  v57 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v6 = *((unsigned __int8 *)a2 + 3);
  v7 = *a2;
  v50 = 0;
  v8 = (v7 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v6 + 10560336);
  v49 = 0;
  v9 = *(_QWORD *)(a1 + 72 * v6 + 10559896) + v8;
  ThreadLocalStoragePointer = NtCurrentTeb()->ThreadLocalStoragePointer;
  v51[0] = v9;
  v11 = *(_BYTE *)(ThreadLocalStoragePointer[TlsIndex] + 2544LL);
  v64 = v11;
  if ( !v11 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v12 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v12 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v12, (unsigned int)"CZoneSystem::OnEntityUnhide", (unsigned int)"m_GlobalStateLock", 1);
    }
    v11 = 0;
  }
  if ( !*(_BYTE *)(v9 + 40) )
  {
    if ( !v11 )
      sub_1402D42F0(a1 + 8);
    goto LABEL_68;
  }
  v13 = *(_DWORD *)(v9 + 16);
  v14 = 0xFFFFFFFFFFFFLL;
  v15 = *(_QWORD *)v9;
  if ( v13 == -1 )
  {
    v16 = 0;
    goto LABEL_17;
  }
  if ( (_WORD)v13 )
  {
    v17 = (unsigned __int16)v13;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v13 + 6) != HIWORD(v13) )
    {
      v16 = 0;
      goto LABEL_17;
    }
  }
  else
  {
    v17 = 0;
  }
  v16 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v17) & 0xFFFFFFFFFFFFLL;
LABEL_17:
  v18 = *(_WORD *)(v9 + 8);
  v19 = v18 & 0xF;
  v52 = v19;
  v53 = v9 + *(unsigned __int16 *)(22 * v19 + qword_15146BC68 + 10560360) + 48LL;
  if ( !v4 )
  {
    v4 = &v49;
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(22 * v19) + 16) + v19 + 41) = 1;
  }
  v20 = *(_WORD *)(v9 + 8);
  v48 = 0;
  v47 = 0;
  LOWORD(v61.m256_f32[6]) = v18;
  v66 = v4;
  v21 = *(unsigned __int16 *)(22LL * (v20 & 0xF) + a1 + 10560362);
  v61.m256_f32[0] = 0.0;
  *(_QWORD *)&v61.m256_f32[4] = v15;
  v22 = *(int **)(v21 + v9 + 56);
  v23 = *(int **)(v21 + v9 + 48);
  if ( v23 != v22 )
  {
    while ( 1 )
    {
      v24 = *v23;
      if ( !(unsigned __int16)*v23 )
        break;
      v25 = (unsigned __int16)v24;
      if ( *(_WORD *)(2896LL * (unsigned __int16)v24 + *(_QWORD *)(v16 + 480) + 2848) == HIWORD(v24) )
        goto LABEL_24;
      v26 = 0;
LABEL_25:
      v27 = v26 + 2824;
      if ( (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v26 + 2824) + 1864LL))(
             *(_QWORD *)(v26 + 2824),
             0) )
      {
        sub_1402A8C60(&v47, v27);
      }
      if ( ++v23 == v22 )
        goto LABEL_28;
    }
    v25 = 0;
LABEL_24:
    v26 = *(_QWORD *)(v16 + 480) + 2896 * v25;
    goto LABEL_25;
  }
LABEL_28:
  v28 = (*(__int64 (__fastcall **)(__int64, __int64))(*(_QWORD *)v15 + 1608LL))(v15, v14);
  v29 = (unsigned __int64 *)(*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v28 + 8LL))(v28);
  if ( is_valid_handle_typeB((unsigned __int64 *)(v16 + 400)) && is_valid_handle_typeB((unsigned __int64 *)(v16 + 400)) )
    v30 = *(_QWORD *)(v16 + 400) & 0xFFFFFFFFFFFFLL;
  else
    v30 = 0;
  if ( v29 )
  {
    do
    {
      if ( !v29[55] || !v30 || (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v30 + 792LL))(v30) )
        break;
      v31 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v30 + 1680LL))(v30);
      v32 = *(_QWORD *)(qword_15146BC68 + 72LL * *(unsigned __int8 *)(v31 + 3) + 10559896)
          + (*(_DWORD *)v31 & 0xFFFFFF)
          * (unsigned __int64)*(unsigned __int16 *)(qword_15146BC68 + 2LL * *(unsigned __int8 *)(v31 + 3) + 10560336);
      v33 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v32 + 8) & 0xF) + qword_15146BC68 + 10560362);
      v34 = *(int **)(v33 + v32 + 56);
      v35 = *(int **)(v33 + v32 + 48);
      if ( v35 != v34 )
      {
        while ( 1 )
        {
          v36 = *v35;
          if ( !(unsigned __int16)*v35 )
            break;
          v37 = (unsigned __int16)v36;
          if ( *(_WORD *)(2896LL * (unsigned __int16)v36 + v29[60] + 2848) == HIWORD(v36) )
            goto LABEL_41;
          v38 = 0;
LABEL_42:
          v39 = v38 + 2824;
          if ( (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v38 + 2824) + 1864LL))(
                 *(_QWORD *)(v38 + 2824),
                 0) )
          {
            sub_1402A8C60(&v47, v39);
          }
          if ( ++v35 == v34 )
            goto LABEL_45;
        }
        v37 = 0;
LABEL_41:
        v38 = v29[60] + 2896 * v37;
        goto LABEL_42;
      }
LABEL_45:
      v30 = is_valid_handle_typeB(v29 + 50) && is_valid_handle_typeB(v29 + 50) ? v29[50] & 0xFFFFFFFFFFFFLL : 0LL;
      v29 = (unsigned __int64 *)v29[55];
    }
    while ( v29 );
    v4 = v66;
    v9 = v51[0];
  }
  v40 = (_QWORD *)*((_QWORD *)&v47 + 1);
  v41 = (_QWORD *)v47;
  if ( (_QWORD)v47 != *((_QWORD *)&v47 + 1) )
  {
    v42 = v52;
    do
    {
      *(_QWORD *)&v61.m256_f32[2] = *v41;
      v43 = *(_QWORD *)&v61.m256_f32[2];
      if ( (*(unsigned __int8 (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v43 + 1864LL))(v43, 0) )
      {
        v44 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v15 + 1640LL))(v15);
        if ( v44 )
        {
          v66 = v4;
          v51[0] = &v62;
          v51[1] = &v66;
          v62 = v61;
          __asm { vzeroupper }
          sub_1470111D0(v44, v42, v51);
        }
        if ( (*(_BYTE *)(v9 + 12) & 8) != 0 )
        {
          v45 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v43 + 1640LL))(v43);
          if ( (unsigned __int8)sub_147048430(v53, v45) )
            sub_140431310(v4, &v61);
        }
      }
      ++v41;
    }
    while ( v41 != v40 );
    v41 = (_QWORD *)v47;
  }
  if ( v41 )
  {
    sub_1403A4F10(&v47, v41, (v48 - (_QWORD)v41) & 0xFFFFFFFFFFFFFFF8uLL);
    v47 = 0;
    v48 = 0;
  }
  if ( !v64 )
    sub_1402D42F0(a1 + 8);
  if ( !a3 && v4 )
    sub_14707E720(a1, *(unsigned __int16 *)(v9 + 8), v4);
LABEL_68:
  if ( (_QWORD)v49 )
  {
    sub_1403A4F10(&v49, v49, (v50 - v49) & 0xFFFFFFFFFFFFFFE0uLL);
    v49 = 0;
    v50 = 0;
  }
  v58 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_14707B0C0 (0x14707B0C0) ---

// --- Function: sub_14707E2C0 (0x14707E2C0) ---
void __fastcall sub_14707E2C0(__int64 a1)
{
  _QWORD *v2; // rax
  _QWORD *v3; // rax
  _QWORD *v4; // rax
  __int64 (__fastcall *p_sub_147031480)(); // [rsp+20h] [rbp-79h] BYREF
  __int64 (__fastcall *n2)(); // [rsp+28h] [rbp-71h]
  _QWORD *v7; // [rsp+30h] [rbp-69h]
  __int64 (__fastcall *p_sub_1470318F0)(); // [rsp+38h] [rbp-61h] BYREF
  __int64 (__fastcall *n2_1)(); // [rsp+40h] [rbp-59h]
  _QWORD *v10; // [rsp+48h] [rbp-51h]
  __int64 (__fastcall *p_sub_147031B30)(); // [rsp+50h] [rbp-49h] BYREF
  __int64 (__fastcall *n2_2)(); // [rsp+58h] [rbp-41h]
  _QWORD *v13; // [rsp+60h] [rbp-39h]
  char v14; // [rsp+90h] [rbp-9h]

  if ( !BYTE1(qword_149A0A866) )
  {
    sub_1402B38B0(&p_sub_147031480, 11, 4, "AnimatedVisAreaUpdate");
    v14 = 1;
    if ( (unsigned __int64)n2 >= 2 )
    {
      ((void (__fastcall *)(__int64, __int64 (__fastcall **)(), _QWORD))n2)(2, &p_sub_147031480, 0);
      n2 = 0;
    }
    p_sub_147031480 = 0;
    v2 = (_QWORD *)sub_1402A63D0(8);
    if ( v2 )
    {
      *v2 = a1;
      v7 = v2;
    }
    else
    {
      v7 = 0;
    }
    p_sub_147031480 = sub_147031480;
    n2 = sub_147032430;
    if ( (unsigned __int64)n2_1 >= 2 )
    {
      ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_1)(2, &p_sub_1470318F0);
      n2_1 = 0;
    }
    p_sub_1470318F0 = 0;
    v3 = (_QWORD *)sub_1402A63D0(8);
    if ( v3 )
    {
      *v3 = a1;
      v10 = v3;
    }
    else
    {
      v10 = 0;
    }
    p_sub_1470318F0 = sub_1470318F0;
    n2_1 = sub_1470331B0;
    if ( (unsigned __int64)n2_2 >= 2 )
    {
      ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_2)(2, &p_sub_147031B30);
      n2_2 = 0;
    }
    p_sub_147031B30 = 0;
    v4 = (_QWORD *)sub_1402A63D0(8);
    if ( v4 )
    {
      *v4 = a1;
      v13 = v4;
    }
    else
    {
      v13 = 0;
    }
    p_sub_147031B30 = sub_147031B30;
    n2_2 = sub_147033790;
    (*(void (__fastcall **)(__int64, __int64 (__fastcall **)()))(*(_QWORD *)qword_149A0A388 + 32LL))(
      qword_149A0A388,
      &p_sub_147031480);
    sub_1402B6940(&p_sub_147031480);
  }
}

// --- End Function: sub_14707E2C0 (0x14707E2C0) ---

// --- Function: sub_14707E720 (0x14707E720) ---
__int64 __fastcall sub_14707E720(__int64 a1, char a2, __int64 *a3)
{
  __int64 v6; // rcx
  __int64 v7; // rbx
  __int64 v8; // rdi
  int n2816; // [rsp+30h] [rbp-58h] BYREF
  __int64 v11; // [rsp+34h] [rbp-54h]
  int v12; // [rsp+3Ch] [rbp-4Ch]
  __int64 v13; // [rsp+40h] [rbp-48h]
  unsigned __int64 v14; // [rsp+48h] [rbp-40h]
  __int64 v15; // [rsp+50h] [rbp-38h]
  __int64 v16; // [rsp+58h] [rbp-30h]
  char v17; // [rsp+98h] [rbp+10h] BYREF

  n2816 = 2816;
  v11 = 0;
  v12 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v13 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v6) + 16) + (a2 & 0xF) + 41LL) = 0;
  sub_147012F70(a1, a3);
  v7 = *a3;
  v8 = a3[1];
  if ( *a3 != v8 )
  {
    do
    {
      if ( *(_DWORD *)v7 )
      {
        switch ( *(_DWORD *)v7 )
        {
          case 1:
            (*(void (__fastcall **)(_QWORD, _QWORD, _QWORD))(**(_QWORD **)(v7 + 8) + 1888LL))(
              *(_QWORD *)(v7 + 8),
              *(_QWORD *)(v7 + 16),
              *(unsigned __int16 *)(v7 + 24));
            break;
          case 2:
            (*(void (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v7 + 8) + 1720LL))(
              *(_QWORD *)(v7 + 8),
              *(_QWORD *)(v7 + 16));
            break;
          case 3:
            (*(void (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v7 + 8) + 1728LL))(
              *(_QWORD *)(v7 + 8),
              *(_QWORD *)(v7 + 16));
            break;
        }
      }
      else
      {
        (*(void (__fastcall **)(_QWORD, _QWORD, _QWORD))(**(_QWORD **)(v7 + 8) + 1880LL))(
          *(_QWORD *)(v7 + 8),
          *(_QWORD *)(v7 + 16),
          *(unsigned __int16 *)(v7 + 24));
      }
      v7 += 32;
    }
    while ( v7 != v8 );
  }
  sub_147016CA0(a3, 0, &v17);
  v14 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_14707E720 (0x14707E720) ---

// --- Function: sub_14707E860 (0x14707E860) ---
__int64 __fastcall sub_14707E860(__int64 a1, __int64 a2, __int64 *a3)
{
  __int64 v5; // rbx
  __int64 v6; // rdi
  int n2816; // [rsp+30h] [rbp-58h] BYREF
  __int64 v9; // [rsp+34h] [rbp-54h]
  int v10; // [rsp+3Ch] [rbp-4Ch]
  __int64 v11; // [rsp+40h] [rbp-48h]
  unsigned __int64 v12; // [rsp+48h] [rbp-40h]
  __int64 v13; // [rsp+50h] [rbp-38h]
  __int64 v14; // [rsp+58h] [rbp-30h]

  n2816 = 2816;
  v9 = 0;
  v10 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v11 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  sub_1470130E0(a1, a3);
  v5 = *a3;
  v6 = a3[1];
  if ( *a3 != v6 )
  {
    do
    {
      if ( *(_DWORD *)v5 )
      {
        switch ( *(_DWORD *)v5 )
        {
          case 1:
            (*(void (__fastcall **)(_QWORD, _QWORD, _QWORD))(**(_QWORD **)(v5 + 8) + 1888LL))(
              *(_QWORD *)(v5 + 8),
              *(_QWORD *)(v5 + 16),
              *(unsigned __int16 *)(v5 + 24));
            break;
          case 2:
            (*(void (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v5 + 8) + 1720LL))(
              *(_QWORD *)(v5 + 8),
              *(_QWORD *)(v5 + 16));
            break;
          case 3:
            (*(void (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v5 + 8) + 1728LL))(
              *(_QWORD *)(v5 + 8),
              *(_QWORD *)(v5 + 16));
            break;
        }
      }
      else
      {
        (*(void (__fastcall **)(_QWORD, _QWORD, _QWORD))(**(_QWORD **)(v5 + 8) + 1880LL))(
          *(_QWORD *)(v5 + 8),
          *(_QWORD *)(v5 + 16),
          *(unsigned __int16 *)(v5 + 24));
      }
      v5 += 32;
    }
    while ( v5 != v6 );
  }
  a3[1] = *a3;
  v12 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_14707E860 (0x14707E860) ---

// --- Function: sub_147081A80 (0x147081A80) ---
__int64 __fastcall sub_147081A80(__int64 a1, __int64 a2, __int64 a3)
{
  _QWORD v7[2]; // [rsp+20h] [rbp-48h] BYREF
  char n7; // [rsp+30h] [rbp-38h]
  __int64 v9; // [rsp+38h] [rbp-30h]
  __int64 v10; // [rsp+40h] [rbp-28h]
  __int64 v11; // [rsp+48h] [rbp-20h]
  __int64 v12; // [rsp+50h] [rbp-18h]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  v7[1] = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v7[0] = sub_14702ED40(a1, a2);
  n7 = 7;
  sub_147068C70(a1, v7[0], a2);
  return sub_14704A770(a1, a2, v7, a3);
}

// --- End Function: sub_147081A80 (0x147081A80) ---

// --- Function: sub_147081B10 (0x147081B10) ---
__int64 __fastcall sub_147081B10(__int64 a1, __int64 a2, __int64 a3, __int64 a4)
{
  __int64 v8; // rbx
  bool v9; // zf
  _QWORD *v11; // rbx
  _QWORD *i; // rsi
  __int64 v13; // rsi
  __int64 v14; // rax
  int v15; // r9d
  __int64 v16; // [rsp+50h] [rbp-58h] BYREF
  __int64 v17; // [rsp+58h] [rbp-50h]
  char n6; // [rsp+60h] [rbp-48h]
  __int64 v19; // [rsp+68h] [rbp-40h]
  __int64 v20; // [rsp+70h] [rbp-38h]
  __int64 v21; // [rsp+78h] [rbp-30h]
  __int64 v22; // [rsp+80h] [rbp-28h]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  if ( (*(_BYTE *)(a2 + 1) & 0x10) != 0 )
  {
    v8 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    if ( *(_BYTE *)(a2 + 776) )
      v16 = a3;
    else
      v16 = sub_14702ED40(a1, a2);
    v9 = *(_BYTE *)(a2 + 776) == 0;
    n6 = 6;
    if ( v9 )
      v8 = a3;
    v17 = v8;
    return sub_14704A770(a1, a2, &v16, a4);
  }
  else
  {
    v11 = *(_QWORD **)(a2 + 664);
    for ( i = *(_QWORD **)(a2 + 672); v11 != i; ++v11 )
      (*(void (__fastcall **)(__int64, _QWORD))(*(_QWORD *)qword_149A0A388 + 72LL))(qword_149A0A388, *v11);
    if ( *(_BYTE *)(a2 + 776) )
    {
      v13 = a3;
    }
    else
    {
      v14 = sub_14702ED40(a1, a2);
      LOBYTE(v15) = 2;
      v13 = v14;
      sub_147037EB0(a1, v14, a3, v15, a2, -1, -1, -1, -1);
    }
    v20 = *(unsigned int *)(v13 + 700);
    v17 = 0;
    v21 = 0;
    v22 = 0;
    v19 = 0;
    v16 = v13;
    n6 = 6;
    return sub_14704A770(a1, a2, &v16, a4);
  }
}

// --- End Function: sub_147081B10 (0x147081B10) ---

// --- Function: sub_147081CB0 (0x147081CB0) ---
__int64 __fastcall sub_147081CB0(__int64 a1, __int64 a2, __int64 a3, __int64 a4, __int64 a5, __int64 a6)
{
  __int64 v10; // rdi
  __int64 v11; // rax
  int v12; // r9d
  _QWORD v14[2]; // [rsp+50h] [rbp-58h] BYREF
  char n6; // [rsp+60h] [rbp-48h]
  __int64 v16; // [rsp+68h] [rbp-40h]
  __int64 v17; // [rsp+70h] [rbp-38h]
  __int64 v18; // [rsp+78h] [rbp-30h]
  __int64 v19; // [rsp+80h] [rbp-28h]

  if ( *(_QWORD *)(a2 + 664) != *(_QWORD *)(a2 + 672) )
    LogFatalError("Sub-part queries with explicit ranges don't support query dependencies!");
  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  if ( *(_BYTE *)(a2 + 776) )
  {
    v10 = a3;
  }
  else
  {
    v11 = sub_14702ED40(a1, a2);
    LOBYTE(v12) = 2;
    v10 = v11;
    sub_147037EB0(a1, v11, a3, v12, a2, a4, a5, -1, -1);
  }
  v14[0] = v10;
  v14[1] = 0;
  v18 = 0;
  v19 = 0;
  n6 = 6;
  v16 = a4;
  v17 = a5;
  return sub_14704A770(a1, a2, v14, a6);
}

// --- End Function: sub_147081CB0 (0x147081CB0) ---

// --- Function: sub_147081DC0 (0x147081DC0) ---
__int64 __fastcall sub_147081DC0(__int64 a1, __int64 a2, __int64 a3, __int64 a4)
{
  __int64 v8; // rbx
  bool v9; // zf
  _QWORD *v11; // rbx
  _QWORD *i; // rsi
  __int64 v13; // rsi
  __int64 v14; // rax
  int v15; // r9d
  __int64 v16; // [rsp+50h] [rbp-58h] BYREF
  __int64 v17; // [rsp+58h] [rbp-50h]
  char n4; // [rsp+60h] [rbp-48h]
  __int64 v19; // [rsp+68h] [rbp-40h]
  __int64 v20; // [rsp+70h] [rbp-38h]
  __int64 v21; // [rsp+78h] [rbp-30h]
  __int64 v22; // [rsp+80h] [rbp-28h]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  if ( (*(_BYTE *)(a2 + 1) & 0x10) != 0 )
  {
    v8 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    if ( *(_BYTE *)(a2 + 776) )
      v16 = a3;
    else
      v16 = sub_14702ED40(a1, a2);
    v9 = *(_BYTE *)(a2 + 776) == 0;
    n4 = 4;
    if ( v9 )
      v8 = a3;
    v17 = v8;
    return sub_14704A770(a1, a2, &v16, a4);
  }
  else
  {
    v11 = *(_QWORD **)(a2 + 664);
    for ( i = *(_QWORD **)(a2 + 672); v11 != i; ++v11 )
      (*(void (__fastcall **)(__int64, _QWORD))(*(_QWORD *)qword_149A0A388 + 72LL))(qword_149A0A388, *v11);
    if ( *(_BYTE *)(a2 + 776) )
    {
      v13 = a3;
    }
    else
    {
      v14 = sub_14702ED40(a1, a2);
      LOBYTE(v15) = 2;
      v13 = v14;
      sub_147037EB0(a1, v14, a3, v15, a2, -1, -1, -1, -1);
    }
    v22 = *(unsigned int *)(v13 + 704);
    v17 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v16 = v13;
    n4 = 4;
    return sub_14704A770(a1, a2, &v16, a4);
  }
}

// --- End Function: sub_147081DC0 (0x147081DC0) ---

// --- Function: sub_147081F60 (0x147081F60) ---
__int64 __fastcall sub_147081F60(__int64 a1, __int64 a2, __int64 a3, __int64 a4, __int64 a5, __int64 a6)
{
  __int64 v10; // rdi
  __int64 v11; // rax
  int v12; // r9d
  _QWORD v14[2]; // [rsp+50h] [rbp-58h] BYREF
  char n4; // [rsp+60h] [rbp-48h]
  __int64 v16; // [rsp+68h] [rbp-40h]
  __int64 v17; // [rsp+70h] [rbp-38h]
  __int64 v18; // [rsp+78h] [rbp-30h]
  __int64 v19; // [rsp+80h] [rbp-28h]

  if ( *(_QWORD *)(a2 + 664) != *(_QWORD *)(a2 + 672) )
    LogFatalError("Sub-part queries with explicit ranges don't support query dependencies!");
  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  if ( *(_BYTE *)(a2 + 776) )
  {
    v10 = a3;
  }
  else
  {
    v11 = sub_14702ED40(a1, a2);
    LOBYTE(v12) = 4;
    v10 = v11;
    sub_147037EB0(a1, v11, a3, v12, a2, -1, -1, a4, a5);
  }
  v14[0] = v10;
  v14[1] = 0;
  v16 = 0;
  v17 = 0;
  n4 = 4;
  v18 = a4;
  v19 = a5;
  return sub_14704A770(a1, a2, v14, a6);
}

// --- End Function: sub_147081F60 (0x147081F60) ---

// --- Function: sub_147082070 (0x147082070) ---
__int64 __fastcall sub_147082070(__int64 a1, __int64 a2, __int128 *a3)
{
  __int64 v6; // r15
  __int128 *v7; // rdi
  __int64 v8; // r8
  __int128 *v9; // rax
  __int64 v10; // rdx
  __int64 v11; // rcx
  __int64 v12; // r8
  __int64 v13; // rax
  __int64 v14; // r12
  signed __int64 Size; // r12
  unsigned __int64 v16; // rbx
  __int64 v17; // rbx
  char *v18; // rax
  char *v19; // rbx
  _QWORD *v20; // rax
  void (__fastcall *v21)(_QWORD, __int128 *, __int128 *); // rax
  __int64 v22; // rax
  __int64 v23; // rbx
  _OWORD *v24; // rdx
  void (__fastcall *n2_2)(__int64, __int128 *); // r9
  _QWORD *v26; // rax
  __int64 v27; // rsi
  __int64 v28; // rbx
  __int64 v29; // rdi
  bool v31; // [rsp+30h] [rbp-D0h]
  __int128 v32; // [rsp+38h] [rbp-C8h] BYREF
  __int128 v33; // [rsp+48h] [rbp-B8h] BYREF
  __int64 v34; // [rsp+58h] [rbp-A8h]
  __int128 v35; // [rsp+60h] [rbp-A0h] BYREF
  __int64 v36; // [rsp+70h] [rbp-90h]
  void *Src; // [rsp+78h] [rbp-88h]
  __int64 (__fastcall *p_sub_1470314F0)(); // [rsp+80h] [rbp-80h] BYREF
  __int64 (__fastcall *n2)(); // [rsp+88h] [rbp-78h]
  _QWORD *v40; // [rsp+90h] [rbp-70h]
  __int64 (__fastcall *p_sub_1470319F0)(); // [rsp+98h] [rbp-68h] BYREF
  __int64 (__fastcall *n2_1)(); // [rsp+A0h] [rbp-60h]
  __int64 v43; // [rsp+A8h] [rbp-58h]
  __int64 (__fastcall *p_sub_147031B80)(); // [rsp+B0h] [rbp-50h] BYREF
  __int64 (__fastcall *n2_3)(); // [rsp+B8h] [rbp-48h]
  _QWORD *v46; // [rsp+C0h] [rbp-40h]
  _QWORD v47[2]; // [rsp+D0h] [rbp-30h] BYREF
  __int64 v48; // [rsp+E0h] [rbp-20h]
  _BYTE v49[24]; // [rsp+E8h] [rbp-18h] BYREF
  __int64 v50; // [rsp+100h] [rbp+0h]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  v6 = sub_14702ED40(a1, a2);
  sub_147068C70(a1, v6, a2);
  v7 = &v35;
  v8 = *(_QWORD *)(a2 + 792);
  v31 = (*(_BYTE *)(a2 + 1) & 0x10) != 0;
  v9 = *(__int128 **)(a2 + 768);
  v36 = 0;
  if ( v9 )
    v7 = v9;
  v35 = 0;
  sub_146A65140(&p_sub_1470314F0, 11, v8, "%s [QueryZoneData]", a2 + 800);
  v13 = *(_QWORD *)(a2 + 688);
  v14 = *(_QWORD *)(a2 + 672);
  *(_QWORD *)&v33 = 0;
  v50 = v13;
  Size = v14 - *(_QWORD *)(a2 + 664);
  Src = *(void **)(a2 + 664);
  v16 = Size >> 3;
  v32 = 0;
  if ( (unsigned __int64)Size >= 8 )
  {
    if ( v16 > 0x1FFFFFFFFFFFFFFFLL )
      unknown_libname_10(v11, v10, v12);
    v17 = 8 * v16;
    v18 = (char *)sub_140393750(&v32, v17);
    v19 = &v18[v17];
    *(_QWORD *)&v33 = v19;
    *(_QWORD *)&v32 = v18;
    *((_QWORD *)&v32 + 1) = v18;
    memmove(v18, Src, Size);
    *((_QWORD *)&v32 + 1) = v19;
  }
  if ( *(_QWORD *)v49 )
    sub_1403A4F10(v49, *(_QWORD *)v49, (*(_QWORD *)&v49[16] - *(_QWORD *)v49) & 0xFFFFFFFFFFFFFFF8uLL);
  *(_QWORD *)&v49[16] = v33;
  *(_OWORD *)v49 = v32;
  if ( (unsigned __int64)n2 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2)(2, &p_sub_1470314F0);
    n2 = 0;
  }
  p_sub_1470314F0 = 0;
  v20 = (_QWORD *)sub_1402A63D0(16);
  if ( v20 )
  {
    *v20 = a1;
    v20[1] = v6;
    v40 = v20;
  }
  else
  {
    v40 = 0;
  }
  *(_QWORD *)&v32 = a1;
  p_sub_1470314F0 = sub_1470314F0;
  n2 = sub_147032550;
  v21 = (void (__fastcall *)(_QWORD, __int128 *, __int128 *))*((_QWORD *)a3 + 1);
  *((_QWORD *)&v32 + 1) = v6;
  v34 = 0;
  v33 = 0;
  if ( v21 == (void (__fastcall *)(_QWORD, __int128 *, __int128 *))1 )
  {
    v33 = *a3;
  }
  else if ( v21 )
  {
    v21(0, &v33, a3);
  }
  if ( (unsigned __int64)n2_1 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_1)(2, &p_sub_1470319F0);
    n2_1 = 0;
  }
  p_sub_1470319F0 = 0;
  v22 = sub_1402A63D0(40);
  v23 = v22;
  if ( v22 )
  {
    v24 = (_OWORD *)(v22 + 16);
    *(_OWORD *)v22 = v32;
    *(_QWORD *)(v22 + 16) = 0;
    *(_QWORD *)(v22 + 24) = 0;
    *(_QWORD *)(v22 + 32) = 0;
    n2_2 = (void (__fastcall *)(__int64, __int128 *))*((_QWORD *)&v33 + 1);
    if ( *((_QWORD *)&v33 + 1) == 1 )
    {
      *v24 = v33;
      n2_2 = (void (__fastcall *)(__int64, __int128 *))*((_QWORD *)&v33 + 1);
      v43 = v22;
    }
    else
    {
      if ( *((_QWORD *)&v33 + 1) )
      {
        (*((void (__fastcall **)(_QWORD, _OWORD *, __int128 *))&v33 + 1))(0, v24, &v33);
        n2_2 = (void (__fastcall *)(__int64, __int128 *))*((_QWORD *)&v33 + 1);
      }
      v43 = v23;
    }
  }
  else
  {
    n2_2 = (void (__fastcall *)(__int64, __int128 *))*((_QWORD *)&v33 + 1);
    v43 = 0;
  }
  p_sub_1470319F0 = sub_1470319F0;
  n2_1 = sub_1470332D0;
  if ( (unsigned __int64)n2_2 >= 2 )
    n2_2(2, &v33);
  if ( (unsigned __int64)n2_3 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_3)(2, &p_sub_147031B80);
    n2_3 = 0;
  }
  p_sub_147031B80 = 0;
  v26 = (_QWORD *)sub_1402A63D0(16);
  if ( v26 )
  {
    *v26 = a1;
    v26[1] = v6;
    v46 = v26;
  }
  else
  {
    v46 = 0;
  }
  p_sub_147031B80 = sub_147031B80;
  n2_3 = sub_1470338B0;
  if ( *((_QWORD *)v7 + 1) == *((_QWORD *)v7 + 2) )
  {
    sub_146A59C50(v7, *((_QWORD *)v7 + 1), &p_sub_1470314F0);
  }
  else
  {
    sub_146A64F80(*((_QWORD *)v7 + 1), &p_sub_1470314F0);
    *((_QWORD *)v7 + 1) += 216LL;
  }
  if ( *(_QWORD *)(a2 + 768) )
    v27 = -1;
  else
    v27 = (*(__int64 (__fastcall **)(__int64, __int128 *, bool))(*(_QWORD *)qword_149A0A388 + 48LL))(
            qword_149A0A388,
            &v35,
            v31);
  if ( *(_QWORD *)v49 )
  {
    sub_1403A4F10(v49, *(_QWORD *)v49, (*(_QWORD *)&v49[16] - *(_QWORD *)v49) & 0xFFFFFFFFFFFFFFF8uLL);
    memset(v49, 0, sizeof(v49));
  }
  if ( v47[0] )
  {
    sub_1403A4F10(v47, v47[0], (v48 - v47[0]) & 0xFFFFFFFFFFFFFFFCuLL);
    v47[0] = 0;
    v47[1] = 0;
    v48 = 0;
  }
  if ( (unsigned __int64)n2_3 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_3)(2, &p_sub_147031B80);
    n2_3 = 0;
  }
  p_sub_147031B80 = 0;
  if ( (unsigned __int64)n2_1 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2_1)(2, &p_sub_1470319F0);
    n2_1 = 0;
  }
  p_sub_1470319F0 = 0;
  if ( (unsigned __int64)n2 >= 2 )
  {
    ((void (__fastcall *)(__int64, __int64 (__fastcall **)()))n2)(2, &p_sub_1470314F0);
    n2 = 0;
  }
  v28 = v35;
  p_sub_1470314F0 = 0;
  if ( (_QWORD)v35 )
  {
    v29 = *((_QWORD *)&v35 + 1);
    if ( (_QWORD)v35 != *((_QWORD *)&v35 + 1) )
    {
      do
      {
        sub_146A66AA0(v28);
        v28 += 216;
      }
      while ( v28 != v29 );
      v28 = v35;
    }
    sub_1403A4F10(&v35, v28, 216 * ((v36 - v28) / 216));
  }
  return v27;
}

// --- End Function: sub_147082070 (0x147082070) ---

// --- Function: sub_147082540 (0x147082540) ---
__int64 __fastcall sub_147082540(__int64 a1, __int64 a2, __int64 *a3)
{
  __int64 v6; // rax
  __int64 v7; // rbx
  __int64 v9; // [rsp+20h] [rbp-58h] BYREF
  void (__fastcall *n2)(__int64, __int64 *, _QWORD); // [rsp+28h] [rbp-50h]
  __int64 v11; // [rsp+30h] [rbp-48h]
  _QWORD v12[2]; // [rsp+38h] [rbp-40h] BYREF
  char v13; // [rsp+48h] [rbp-30h]
  __int64 v14; // [rsp+50h] [rbp-28h]
  __int64 v15; // [rsp+58h] [rbp-20h]
  __int64 v16; // [rsp+60h] [rbp-18h]
  __int64 v17; // [rsp+68h] [rbp-10h]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  v12[1] = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v6 = sub_14702ED40(a1, a2);
  v12[0] = v6;
  v13 = 1;
  *a3 = v6;
  sub_147068C70(a1, v6, a2);
  v9 = 0;
  n2 = 0;
  v11 = 0;
  v7 = sub_14704A770(a1, a2, v12, &v9);
  if ( (unsigned __int64)n2 >= 2 )
    n2(2, &v9, 0);
  return v7;
}

// --- End Function: sub_147082540 (0x147082540) ---

// --- Function: sub_147082610 (0x147082610) ---
__int64 __fastcall sub_147082610(__int64 a1, __int64 a2, __int64 *a3)
{
  __int64 v6; // rax
  __int64 v7; // rbx
  __int64 v9; // [rsp+20h] [rbp-58h] BYREF
  void (__fastcall *n2)(__int64, __int64 *, _QWORD); // [rsp+28h] [rbp-50h]
  __int64 v11; // [rsp+30h] [rbp-48h]
  _QWORD v12[2]; // [rsp+38h] [rbp-40h] BYREF
  char n3; // [rsp+48h] [rbp-30h]
  __int64 v14; // [rsp+50h] [rbp-28h]
  __int64 v15; // [rsp+58h] [rbp-20h]
  __int64 v16; // [rsp+60h] [rbp-18h]
  __int64 v17; // [rsp+68h] [rbp-10h]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  v12[1] = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v6 = sub_14702ED40(a1, a2);
  v12[0] = v6;
  n3 = 3;
  *a3 = v6;
  sub_147068C70(a1, v6, a2);
  v9 = 0;
  n2 = 0;
  v11 = 0;
  v7 = sub_14704A770(a1, a2, v12, &v9);
  if ( (unsigned __int64)n2 >= 2 )
    n2(2, &v9, 0);
  return v7;
}

// --- End Function: sub_147082610 (0x147082610) ---

// --- Function: sub_1470826E0 (0x1470826E0) ---
__int64 __fastcall sub_1470826E0(__int64 a1, __int64 a2, __int64 a3, __int64 *a4)
{
  __int64 v8; // rax
  __int64 v9; // rcx
  bool v10; // zf
  __int64 v11; // rbx
  _QWORD *v12; // rbx
  _QWORD *i; // rsi
  __int64 v14; // rsi
  __int64 v15; // rax
  int v16; // r9d
  __int64 v18; // [rsp+50h] [rbp-9h] BYREF
  void (__fastcall *n2_1)(__int64, __int64 *); // [rsp+58h] [rbp-1h]
  __int64 v20; // [rsp+60h] [rbp+7h]
  __int64 v21; // [rsp+68h] [rbp+Fh] BYREF
  __int64 v22; // [rsp+70h] [rbp+17h]
  char n2; // [rsp+78h] [rbp+1Fh]
  __int64 v24; // [rsp+80h] [rbp+27h]
  __int64 v25; // [rsp+88h] [rbp+2Fh]
  __int64 v26; // [rsp+90h] [rbp+37h]
  __int64 v27; // [rsp+98h] [rbp+3Fh]

  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  if ( (*(_BYTE *)(a2 + 1) & 0x10) != 0 )
  {
    v24 = 0;
    v25 = 0;
    v26 = 0;
    v27 = 0;
    if ( *(_BYTE *)(a2 + 776) )
      v8 = a3;
    else
      v8 = sub_14702ED40(a1, a2);
    v9 = 0;
    v21 = v8;
    v10 = *(_BYTE *)(a2 + 776) == 0;
    n2 = 2;
    if ( v10 )
      v9 = a3;
    *a4 = v8;
    v22 = v9;
    v18 = 0;
    n2_1 = 0;
    v20 = 0;
    v11 = sub_14704A770(a1, a2, &v21, &v18);
    if ( (unsigned __int64)n2_1 >= 2 )
LABEL_17:
      n2_1(2, &v18);
  }
  else
  {
    v12 = *(_QWORD **)(a2 + 664);
    for ( i = *(_QWORD **)(a2 + 672); v12 != i; ++v12 )
      (*(void (__fastcall **)(__int64, _QWORD))(*(_QWORD *)qword_149A0A388 + 72LL))(qword_149A0A388, *v12);
    if ( *(_BYTE *)(a2 + 776) )
    {
      v14 = a3;
    }
    else
    {
      v15 = sub_14702ED40(a1, a2);
      LOBYTE(v16) = 2;
      v14 = v15;
      sub_147037EB0(a1, v15, a3, v16, a2, -1, -1, -1, -1);
    }
    v25 = *(unsigned int *)(v14 + 700);
    v22 = 0;
    v26 = 0;
    v27 = 0;
    v24 = 0;
    v18 = 0;
    n2_1 = 0;
    v20 = 0;
    v21 = v14;
    n2 = 2;
    *a4 = v14;
    v11 = sub_14704A770(a1, a2, &v21, &v18);
    if ( (unsigned __int64)n2_1 >= 2 )
      goto LABEL_17;
  }
  return v11;
}

// --- End Function: sub_1470826E0 (0x1470826E0) ---

// --- Function: sub_1470828D0 (0x1470828D0) ---
__int64 __fastcall sub_1470828D0(__int64 a1, __int64 a2, int a3, __int64 a4, __int64 a5, _QWORD *a6)
{
  _QWORD *v10; // rdi
  __int64 v11; // rax
  int v12; // r9d
  __int64 v13; // rbx
  __int64 v15; // [rsp+50h] [rbp-68h] BYREF
  void (__fastcall *n2_1)(__int64, __int64 *); // [rsp+58h] [rbp-60h]
  __int64 v17; // [rsp+60h] [rbp-58h]
  _QWORD v18[2]; // [rsp+68h] [rbp-50h] BYREF
  char n2; // [rsp+78h] [rbp-40h]
  __int64 v20; // [rsp+80h] [rbp-38h]
  __int64 v21; // [rsp+88h] [rbp-30h]
  __int64 v22; // [rsp+90h] [rbp-28h]
  __int64 v23; // [rsp+98h] [rbp-20h]

  if ( *(_QWORD *)(a2 + 664) != *(_QWORD *)(a2 + 672) )
    LogFatalError("Sub-part queries with explicit ranges don't support query dependencies!");
  if ( !*(_BYTE *)(sub_1402C8360(a1) + 37) )
    is_thread_flag_57_or_38_set();
  if ( *(_BYTE *)(a2 + 776) )
  {
    v10 = a6;
  }
  else
  {
    v11 = sub_14702ED40(a1, a2);
    LOBYTE(v12) = 2;
    v10 = (_QWORD *)v11;
    sub_147037EB0(a1, v11, a3, v12, a2, a4, a5, -1, -1);
  }
  *a6 = v10;
  v18[1] = 0;
  v22 = 0;
  v23 = 0;
  v15 = 0;
  n2_1 = 0;
  v17 = 0;
  v18[0] = v10;
  n2 = 2;
  v20 = a4;
  v21 = a5;
  v13 = sub_14704A770(a1, a2, v18, &v15);
  if ( (unsigned __int64)n2_1 >= 2 )
    n2_1(2, &v15);
  return v13;
}

// --- End Function: sub_1470828D0 (0x1470828D0) ---

// --- Function: sub_14708B1B0 (0x14708B1B0) ---
__int64 __fastcall sub_14708B1B0(__int64 a1, int *a2, _DWORD *a3, int a4, __int64 *a5, __int64 a6)
{
  __int64 n0x200000; // rax
  __int64 v10; // r12
  __int64 v11; // r15
  char v12; // r8
  __int64 v13; // r13
  int v14; // ebx
  signed __int64 v15; // rax
  int v16; // ecx
  __int64 v17; // rcx
  _QWORD *v18; // rbx
  __int64 v19; // rdx
  volatile signed __int64 *v20; // r14
  int v21; // edx
  int v22; // ecx
  __int64 v23; // rbx
  __int64 v24; // rdx
  _QWORD *v25; // rsi
  __int64 v26; // rdi
  _QWORD *v27; // rbx
  _DWORD *v28; // rbx
  __int64 v29; // rcx
  signed __int32 v30; // edi
  signed __int32 v31; // eax
  __int64 v32; // r15
  int v33; // r14d
  _QWORD *v34; // rdi
  signed __int32 v35; // eax
  int v36; // r15d
  __int64 v37; // rcx
  int v38; // edi
  _DWORD *v39; // r14
  unsigned __int32 v40; // edi
  _DWORD *v41; // rdi
  unsigned __int32 v42; // r15d
  signed __int64 v43; // rdx
  int v44; // eax
  __int64 *v45; // [rsp+38h] [rbp-69h]
  __int128 v46; // [rsp+40h] [rbp-61h] BYREF
  __int64 v47; // [rsp+50h] [rbp-51h]
  int n2816; // [rsp+58h] [rbp-49h] BYREF
  __int64 v49; // [rsp+5Ch] [rbp-45h]
  int v50; // [rsp+64h] [rbp-3Dh]
  __int64 v51; // [rsp+68h] [rbp-39h]
  unsigned __int64 v52; // [rsp+70h] [rbp-31h]
  __int64 v53; // [rsp+78h] [rbp-29h]
  __int64 v54; // [rsp+80h] [rbp-21h]
  __int128 v55; // [rsp+A8h] [rbp+7h] BYREF
  unsigned int v56; // [rsp+B8h] [rbp+17h]
  __int64 savedregs; // [rsp+F0h] [rbp+4Fh] BYREF

  n0x200000 = (__int64)&savedregs;
  v10 = a1;
  if ( *a2 == -1 || *a3 == -1 )
    return n0x200000;
  v11 = (__int64)a5;
  v47 = 0;
  v46 = 0;
  if ( a5 )
  {
    v45 = a5;
  }
  else
  {
    a1 = *(_QWORD *)(sub_1402C8360(a1) + 16);
    v45 = (__int64 *)&v46;
    *(_BYTE *)(a1 + 43) = 1;
  }
  v12 = a6;
  v13 = v10 + 8;
  if ( !(_BYTE)a6 )
  {
    v14 = *(_DWORD *)(sub_1402C8360(a1) + 24);
    if ( *(_DWORD *)(v10 + 16) == v14 )
    {
      ++*(_DWORD *)(v10 + 20);
    }
    else
    {
      v15 = _InterlockedCompareExchange64((volatile signed __int64 *)v13, 0x200000, 0);
      if ( v15 )
        sub_1403DE750(v10 + 8, v15, 0, (unsigned int)"CZoneSystem::RefreshAreaEntry", (__int64)"m_GlobalStateLock", 1);
      *(_DWORD *)(v10 + 16) = v14;
    }
    sub_1470B7660(v10);
    v12 = 0;
  }
  v16 = *a2;
  v56 = 0;
  v55 = 0;
  if ( v16 == -1 )
  {
    LODWORD(v17) = 0;
    v18 = (_QWORD *)(v10 + 10486016);
    goto LABEL_20;
  }
  if ( (_WORD)v16 )
  {
    v19 = (unsigned __int16)v16;
    v18 = (_QWORD *)(v10 + 10486016);
    if ( *(_WORD *)(*(_QWORD *)(v10 + 10486016) + 8LL * (unsigned __int16)v16 + 6) != HIWORD(v16) )
    {
      LODWORD(v17) = 0;
      goto LABEL_20;
    }
  }
  else
  {
    v19 = 0;
    v18 = (_QWORD *)(v10 + 10486016);
  }
  v17 = *(_QWORD *)(*v18 + 8 * v19) & 0xFFFFFFFFFFFFLL;
LABEL_20:
  sub_14708AFB0(v17, *a3, a4, (unsigned int)&v55, (__int64)v45, v12);
  v20 = (volatile signed __int64 *)(v10 + 40);
  v21 = _InterlockedIncrement64((volatile signed __int64 *)(v10 + 40));
  if ( (*(_QWORD *)&v21 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      v10 + 40,
      v21,
      (unsigned int)"CZoneSystem::RefreshAreaEntry",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  v22 = *a2;
  if ( *a2 == -1 )
  {
    n0x200000 = 0;
    v23 = 0;
    goto LABEL_29;
  }
  if ( (_WORD)v22 )
  {
    v24 = (unsigned __int16)v22;
    if ( *(_WORD *)(*v18 + 8LL * (unsigned __int16)v22 + 6) != HIWORD(v22) )
    {
      n0x200000 = 0;
      v23 = 0;
      goto LABEL_29;
    }
  }
  else
  {
    v24 = 0;
  }
  v23 = *(_QWORD *)(*v18 + 8 * v24) & 0xFFFFFFFFFFFFLL;
  n0x200000 = 0;
LABEL_29:
  v25 = (_QWORD *)v55;
  if ( (_QWORD)v55 )
  {
    n2816 = 2816;
    v49 = 0;
    v50 = 0;
    v52 = 0;
    v53 = 0;
    v54 = 0;
    v51 = 1;
    qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
    v26 = qword_15146BC68;
    if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
    {
      do
      {
        v27 = (_QWORD *)*v25;
        sub_14704B550(v26, v25);
        v25 = v27;
      }
      while ( v27 );
      v52 = __rdtsc();
      n0x200000 = qword_149A05E08(&n2816);
      goto LABEL_59;
    }
    _InterlockedAdd((volatile signed __int32 *)(qword_15146BC68 + 10485984), v56);
    v28 = (_DWORD *)(v23 + 133920);
    _m_prefetchw(v28 + 1);
    v29 = v28[1] | 1u;
    v30 = _InterlockedOr(v28 + 1, 1u);
    if ( (v30 & 1) != 0 )
    {
      while ( 1 )
      {
        v31 = _InterlockedCompareExchange(v28 + 1, v30 + 2, v30);
        if ( v30 == v31 )
          break;
        if ( (v31 & 1) != 0 )
        {
          v30 = v31;
        }
        else
        {
          _m_prefetchw(v28 + 1);
          v29 = v28[1] | 1u;
          v30 = _InterlockedOr(v28 + 1, 1u);
          if ( (v30 & 1) == 0 )
            goto LABEL_38;
        }
      }
      v38 = (unsigned __int16)v30 >> 1;
      v39 = &v28[4 * (v38 & 0xFFF) + 4];
      if ( (*v39 & 0x7FFF) != (((_WORD)v38 - 4096) & 0x7FFF) )
        sub_1470B7790(v28, &v28[4 * (v38 & 0xFFF) + 4]);
      *((_QWORD *)v39 + 1) = v25;
      v40 = _InterlockedExchange(v39 + 1, v38);
      if ( (v40 & 0xFFFF8000) != 0 )
        sub_1407E2F90(v28, v39 + 1, v40);
      v52 = __rdtsc();
      n0x200000 = qword_149A05E08(&n2816);
LABEL_58:
      v20 = (volatile signed __int64 *)(v10 + 40);
      goto LABEL_59;
    }
LABEL_38:
    *v28 = *(_DWORD *)(sub_1402C8360(v29) + 24);
    while ( 1 )
    {
      v32 = qword_15146BC68;
      v33 = 0;
      do
      {
        v34 = (_QWORD *)*v25;
        sub_14704B550(v32, v25);
        ++v33;
        v25 = v34;
      }
      while ( v34 );
      v35 = v28[1];
      v36 = v28[2] & 0x7FFF;
      if ( (unsigned __int16)v35 >> 1 != v36 )
        goto LABEL_50;
      *v28 = -1;
      v37 = v35 & 0xFFFFFFFE;
      if ( v35 != _InterlockedCompareExchange(v28 + 1, v37, v35) )
        break;
      v25 = 0;
LABEL_54:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 10485984), -v33) == v33 )
        qword_1499F5478(qword_15146BC68 + 10485984);
      if ( !v25 )
      {
        v52 = __rdtsc();
        n0x200000 = qword_149A05E08(&n2816);
        v11 = (__int64)a5;
        v13 = v10 + 8;
        goto LABEL_58;
      }
    }
    *v28 = *(_DWORD *)(sub_1402C8360(v37) + 24);
LABEL_50:
    ++v28[2];
    v41 = &v28[4 * (v36 & 0xFFF) + 4];
    if ( (v41[1] & 0x7FFF) != v36 )
      sub_1470B7790(v28, v41 + 1);
    v25 = (_QWORD *)*((_QWORD *)v41 + 1);
    v42 = _InterlockedExchange(v41, v36);
    if ( (v42 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v28, v41, v42);
    goto LABEL_54;
  }
LABEL_59:
  v43 = _InterlockedDecrement64(v20);
  if ( (v43 & 0x3FF) == 0 )
  {
    n0x200000 = 0xFFFF0000FFC00000uLL;
    if ( (v43 & 0xFFFF0000FFC00000uLL) != 0 )
      n0x200000 = sub_1403CD3A0(v20);
  }
  if ( v13 && !(_BYTE)a6 )
  {
    v44 = *(_DWORD *)(v13 + 12);
    if ( v44 )
    {
      n0x200000 = (unsigned int)(v44 - 1);
      *(_DWORD *)(v13 + 12) = n0x200000;
    }
    else
    {
      *(_DWORD *)(v13 + 8) = -1;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v13, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        n0x200000 = sub_1403DEBA0(v13, n0x200000);
    }
  }
  if ( !v11 )
    n0x200000 = sub_14707E720(v10, 50, v45);
  if ( (_QWORD)v46 )
    return sub_1403A4F10(&v46, v46, (v47 - v46) & 0xFFFFFFFFFFFFFFE0uLL);
  return n0x200000;
}

// --- End Function: sub_14708B1B0 (0x14708B1B0) ---

// --- Function: sub_147090440 (0x147090440) ---
__int64 __fastcall sub_147090440(__int64 a1, int *a2, int *a3, __int64 *a4, __int64 *a5)
{
  __int64 n0x200000; // rax
  __int64 v9; // r12
  __int64 *v10; // rax
  __int64 v11; // r13
  int v12; // ebx
  signed __int64 v13; // rax
  int v14; // ecx
  __int64 v15; // rdi
  __int64 v16; // rdi
  __int64 v17; // rbx
  int v18; // esi
  __int64 v19; // r8
  __int64 v20; // rsi
  __int64 *v21; // r15
  int v22; // ecx
  __int64 v23; // rbx
  __int64 v24; // rbx
  _QWORD *v25; // rsi
  __int64 v26; // rdi
  _QWORD *v27; // rbx
  __int64 v28; // rdi
  __int64 v29; // rcx
  signed __int32 v30; // ebx
  signed __int32 v31; // eax
  __int64 v32; // r15
  int v33; // r14d
  _QWORD *v34; // rbx
  signed __int32 v35; // eax
  int v36; // r15d
  __int64 v37; // rcx
  int v38; // ebx
  __int64 v39; // r14
  unsigned __int32 v40; // ebx
  __int64 v41; // rbx
  unsigned __int32 v42; // r15d
  int v43; // eax
  __int64 *v44; // [rsp+38h] [rbp-D0h]
  __int128 v45; // [rsp+40h] [rbp-C8h] BYREF
  __int64 v46; // [rsp+50h] [rbp-B8h]
  int n2816_1; // [rsp+58h] [rbp-B0h] BYREF
  __int64 v48; // [rsp+5Ch] [rbp-ACh]
  int v49; // [rsp+64h] [rbp-A4h]
  __int64 v50; // [rsp+68h] [rbp-A0h]
  unsigned __int64 v51; // [rsp+70h] [rbp-98h]
  __int64 v52; // [rsp+78h] [rbp-90h]
  __int64 v53; // [rsp+80h] [rbp-88h]
  __int128 v54; // [rsp+A8h] [rbp-60h] BYREF
  unsigned int v55; // [rsp+B8h] [rbp-50h]
  int n2816; // [rsp+C8h] [rbp-40h] BYREF
  __int64 v57; // [rsp+CCh] [rbp-3Ch]
  int v58; // [rsp+D4h] [rbp-34h]
  __int64 v59; // [rsp+D8h] [rbp-30h]
  unsigned __int64 v60; // [rsp+E0h] [rbp-28h]
  __int64 v61; // [rsp+E8h] [rbp-20h]
  __int64 v62; // [rsp+F0h] [rbp-18h]
  __int64 savedregs; // [rsp+140h] [rbp+38h] BYREF

  n0x200000 = (__int64)&savedregs;
  v9 = a1;
  if ( *a2 == -1 || *a3 == -1 )
    return n0x200000;
  v46 = 0;
  v10 = a5;
  v45 = 0;
  if ( !a5 )
  {
    a1 = *(_QWORD *)(sub_1402C8360(a1) + 16);
    v10 = (__int64 *)&v45;
    *(_BYTE *)(a1 + 43) = 1;
  }
  v44 = v10;
  v11 = v9 + 8;
  v12 = *(_DWORD *)(sub_1402C8360(a1) + 24);
  if ( *(_DWORD *)(v9 + 16) == v12 )
  {
    ++*(_DWORD *)(v9 + 20);
  }
  else
  {
    v13 = _InterlockedCompareExchange64((volatile signed __int64 *)v11, 0x200000, 0);
    if ( v13 )
      sub_1403DE750(
        v9 + 8,
        v13,
        0,
        (unsigned int)"CZoneSystem::RegisterTagToTrackForArea_EditorOnly",
        (__int64)"m_GlobalStateLock",
        1);
    *(_DWORD *)(v9 + 16) = v12;
  }
  sub_1470B7660(v9);
  v14 = *a2;
  v55 = 0;
  v54 = 0;
  if ( v14 == -1 )
  {
    v15 = 0;
    goto LABEL_17;
  }
  if ( (_WORD)v14 )
  {
    v16 = (unsigned __int16)v14;
    if ( *(_WORD *)(*(_QWORD *)(v9 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
    {
      v15 = 0;
      goto LABEL_17;
    }
  }
  else
  {
    v16 = 0;
  }
  v15 = *(_QWORD *)(*(_QWORD *)(v9 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
LABEL_17:
  v17 = *a4;
  v18 = *a3;
  n2816 = 2816;
  v57 = 0;
  v58 = 0;
  v60 = 0;
  v61 = 0;
  v62 = 0;
  v59 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  if ( (_WORD)v18 )
  {
    v19 = (unsigned __int16)v18;
    if ( *(_WORD *)(2896LL * (unsigned __int16)v18 + *(_QWORD *)(v15 + 480) + 2848) != HIWORD(v18) )
    {
      v20 = 0;
      goto LABEL_22;
    }
  }
  else
  {
    v19 = 0;
  }
  v20 = *(_QWORD *)(v15 + 480) + 2896 * v19;
LABEL_22:
  v21 = v44;
  if ( (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v20 + 2824) + 1864LL))(
         *(_QWORD *)(v20 + 2824),
         0) )
  {
    sub_1470909F0(v15, v20, v17, (_DWORD)v44, 0);
  }
  sub_14708BA20(v15, v20, (unsigned int)&v54, (_DWORD)v44, 0);
  v60 = __rdtsc();
  qword_149A05E08(&n2816);
  v22 = *a2;
  if ( *a2 == -1 )
  {
    n0x200000 = 0;
    v23 = 0;
    goto LABEL_31;
  }
  if ( (_WORD)v22 )
  {
    v24 = (unsigned __int16)v22;
    if ( *(_WORD *)(*(_QWORD *)(v9 + 10486016) + 8LL * (unsigned __int16)v22 + 6) != HIWORD(v22) )
    {
      n0x200000 = 0;
      v23 = 0;
      goto LABEL_31;
    }
  }
  else
  {
    v24 = 0;
  }
  v23 = *(_QWORD *)(*(_QWORD *)(v9 + 10486016) + 8 * v24) & 0xFFFFFFFFFFFFLL;
  n0x200000 = 0;
LABEL_31:
  v25 = (_QWORD *)v54;
  if ( (_QWORD)v54 )
  {
    n2816_1 = 2816;
    v48 = 0;
    v49 = 0;
    v51 = 0;
    v52 = 0;
    v53 = 0;
    v50 = 1;
    qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
    v26 = qword_15146BC68;
    if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
    {
      do
      {
        v27 = (_QWORD *)*v25;
        sub_14704B550(v26, v25);
        v25 = v27;
      }
      while ( v27 );
      v51 = __rdtsc();
      n0x200000 = qword_149A05E08(&n2816_1);
      goto LABEL_61;
    }
    _InterlockedAdd((volatile signed __int32 *)(qword_15146BC68 + 10485984), v55);
    v28 = v23 + 133920;
    _m_prefetchw((const void *)(v23 + 133924));
    v29 = *(_DWORD *)(v23 + 133924) | 1u;
    v30 = _InterlockedOr((volatile signed __int32 *)(v23 + 133924), 1u);
    if ( (v30 & 1) != 0 )
    {
      while ( 1 )
      {
        v31 = _InterlockedCompareExchange((volatile signed __int32 *)(v28 + 4), v30 + 2, v30);
        if ( v30 == v31 )
          break;
        if ( (v31 & 1) != 0 )
        {
          v30 = v31;
        }
        else
        {
          _m_prefetchw((const void *)(v28 + 4));
          v29 = *(_DWORD *)(v28 + 4) | 1u;
          v30 = _InterlockedOr((volatile signed __int32 *)(v28 + 4), 1u);
          if ( (v30 & 1) == 0 )
            goto LABEL_40;
        }
      }
      v38 = (unsigned __int16)v30 >> 1;
      v39 = v28 + 16 * ((v38 & 0xFFF) + 1LL);
      if ( (*(_DWORD *)v39 & 0x7FFF) != (((_WORD)v38 - 4096) & 0x7FFF) )
        sub_1470B7790(v28, v28 + 16 * ((v38 & 0xFFF) + 1LL));
      *(_QWORD *)(v39 + 8) = v25;
      v40 = _InterlockedExchange((volatile __int32 *)(v39 + 4), v38);
      if ( (v40 & 0xFFFF8000) != 0 )
        sub_1407E2F90(v28, v39 + 4, v40);
      v51 = __rdtsc();
      n0x200000 = qword_149A05E08(&n2816_1);
LABEL_60:
      v21 = v44;
      goto LABEL_61;
    }
LABEL_40:
    *(_DWORD *)v28 = *(_DWORD *)(sub_1402C8360(v29) + 24);
    while ( 1 )
    {
      v32 = qword_15146BC68;
      v33 = 0;
      do
      {
        v34 = (_QWORD *)*v25;
        sub_14704B550(v32, v25);
        ++v33;
        v25 = v34;
      }
      while ( v34 );
      v35 = *(_DWORD *)(v28 + 4);
      v36 = *(_DWORD *)(v28 + 8) & 0x7FFF;
      if ( (unsigned __int16)v35 >> 1 != v36 )
        goto LABEL_52;
      *(_DWORD *)v28 = -1;
      v37 = v35 & 0xFFFFFFFE;
      if ( v35 != _InterlockedCompareExchange((volatile signed __int32 *)(v28 + 4), v37, v35) )
        break;
      v25 = 0;
LABEL_56:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 10485984), -v33) == v33 )
        qword_1499F5478(qword_15146BC68 + 10485984);
      if ( !v25 )
      {
        v51 = __rdtsc();
        n0x200000 = qword_149A05E08(&n2816_1);
        v11 = v9 + 8;
        goto LABEL_60;
      }
    }
    *(_DWORD *)v28 = *(_DWORD *)(sub_1402C8360(v37) + 24);
LABEL_52:
    ++*(_DWORD *)(v28 + 8);
    v41 = v28 + 16 * ((v36 & 0xFFF) + 1LL);
    if ( (*(_DWORD *)(v41 + 4) & 0x7FFF) != v36 )
      sub_1470B7790(v28, v41 + 4);
    v25 = *(_QWORD **)(v41 + 8);
    v42 = _InterlockedExchange((volatile __int32 *)v41, v36);
    if ( (v42 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v28, v41, v42);
    goto LABEL_56;
  }
LABEL_61:
  if ( v11 )
  {
    v43 = *(_DWORD *)(v11 + 12);
    if ( v43 )
    {
      n0x200000 = (unsigned int)(v43 - 1);
      *(_DWORD *)(v11 + 12) = n0x200000;
    }
    else
    {
      *(_DWORD *)(v11 + 8) = -1;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v11, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        n0x200000 = sub_1403DEBA0(v11, n0x200000);
    }
  }
  if ( !a5 )
    n0x200000 = sub_14707E720(v9, 50, v21);
  if ( (_QWORD)v45 )
    return sub_1403A4F10(&v45, v45, (v46 - v45) & 0xFFFFFFFFFFFFFFE0uLL);
  return n0x200000;
}

// --- End Function: sub_147090440 (0x147090440) ---

// --- Function: sub_147090D90 (0x147090D90) ---
__int64 __fastcall sub_147090D90(__int64 a1, __int64 a2, char a3)
{
  __int64 v6; // rcx
  unsigned __int64 v7; // r15
  __int64 v8; // rax
  __int64 v9; // rcx
  int v10; // edx
  int v11; // ecx
  __int64 v12; // r13
  __int64 v13; // rdx
  _QWORD *v14; // rdi
  __int64 v15; // rcx
  __int64 v16; // rbx
  __int64 v17; // rsi
  __int64 v18; // r12
  __int64 v19; // r15
  __int64 v20; // rax
  __int64 v21; // r14
  __int64 v22; // rdi
  char v23; // al
  __int64 v24; // rdx
  __int64 v25; // rax
  __int64 v26; // rdi
  volatile signed __int64 *v27; // r15
  int v28; // edx
  _QWORD *v29; // rsi
  __int64 v30; // rdi
  _QWORD *v31; // rbx
  signed __int64 v32; // rdx
  __int64 v34; // r12
  _DWORD *v35; // rbx
  signed __int32 v36; // eax
  __int64 v37; // rcx
  signed __int32 v38; // ett
  signed __int32 v39; // edi
  signed __int32 v40; // eax
  __int64 v41; // r15
  __int64 v42; // r14
  int v43; // edi
  _QWORD *v44; // rbx
  signed __int32 v45; // eax
  int v46; // r14d
  __int64 v47; // rcx
  int v48; // edi
  _DWORD *v49; // r14
  unsigned __int32 v50; // edi
  __int64 v51; // rbx
  unsigned __int32 v52; // r14d
  unsigned __int64 v53; // [rsp+38h] [rbp-D0h] BYREF
  unsigned __int64 v54; // [rsp+40h] [rbp-C8h]
  __int128 v55; // [rsp+48h] [rbp-C0h] BYREF
  __int64 v56; // [rsp+58h] [rbp-B0h]
  __int64 v57; // [rsp+60h] [rbp-A8h] BYREF
  __int128 *v58; // [rsp+68h] [rbp-A0h] BYREF
  volatile signed __int64 *v59; // [rsp+70h] [rbp-98h]
  __int64 v60; // [rsp+78h] [rbp-90h] BYREF
  _BYTE *v61; // [rsp+80h] [rbp-88h] BYREF
  int n2816_1; // [rsp+88h] [rbp-80h] BYREF
  __int64 v63; // [rsp+8Ch] [rbp-7Ch]
  int v64; // [rsp+94h] [rbp-74h]
  __int64 v65; // [rsp+98h] [rbp-70h]
  unsigned __int64 v66; // [rsp+A0h] [rbp-68h]
  __int64 v67; // [rsp+A8h] [rbp-60h]
  __int64 v68; // [rsp+B0h] [rbp-58h]
  int n2816_2; // [rsp+D8h] [rbp-30h] BYREF
  __int64 v70; // [rsp+DCh] [rbp-2Ch]
  int v71; // [rsp+E4h] [rbp-24h]
  __int64 v72; // [rsp+E8h] [rbp-20h]
  unsigned __int64 v73; // [rsp+F0h] [rbp-18h]
  __int64 v74; // [rsp+F8h] [rbp-10h]
  __int64 v75; // [rsp+100h] [rbp-8h]
  __int128 v76; // [rsp+128h] [rbp+20h] BYREF
  unsigned int v77; // [rsp+138h] [rbp+30h]
  int n2816; // [rsp+148h] [rbp+40h] BYREF
  __int64 v79; // [rsp+14Ch] [rbp+44h]
  int v80; // [rsp+154h] [rbp+4Ch]
  __int64 v81; // [rsp+158h] [rbp+50h]
  unsigned __int64 v82; // [rsp+160h] [rbp+58h]
  __int64 v83; // [rsp+168h] [rbp+60h]
  __int64 v84; // [rsp+170h] [rbp+68h]
  _QWORD v85[10]; // [rsp+198h] [rbp+90h] BYREF
  _BYTE v86[24]; // [rsp+1E8h] [rbp+E0h] BYREF
  int n2; // [rsp+200h] [rbp+F8h] BYREF
  __int64 v88; // [rsp+208h] [rbp+100h]
  __int64 v89; // [rsp+210h] [rbp+108h]
  __int64 v91; // [rsp+280h] [rbp+178h] BYREF
  __int16 v92; // [rsp+288h] [rbp+180h] BYREF

  n2816 = 2816;
  v79 = 0;
  v80 = 0;
  v82 = 0;
  v83 = 0;
  v84 = 0;
  v81 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v6 = *(unsigned __int8 *)(a2 + 3);
  v54 = *(_QWORD *)(a1 + 72 * v6 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v6 + 10560336);
  v7 = v54;
  v55 = 0;
  v56 = 0;
  v8 = sub_1402C8360(v6);
  v9 = *(_WORD *)(v54 + 8) & 0xF;
  *(_BYTE *)(*(_QWORD *)(v8 + 16) + v9 + 41) = 1;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(v9) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v10 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v10 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        a1 + 8,
        v10,
        (unsigned int)"CZoneSystem::RegisterWithExternalSystems",
        (unsigned int)"m_GlobalStateLock",
        1);
  }
  v11 = *(_DWORD *)(v7 + 16);
  *(_BYTE *)(v7 + 40) = 1;
  if ( v11 == -1 )
  {
    v12 = 0;
    goto LABEL_12;
  }
  if ( (_WORD)v11 )
  {
    v13 = (unsigned __int16)v11;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v11 + 6) != HIWORD(v11) )
    {
      v12 = 0;
      goto LABEL_12;
    }
  }
  else
  {
    v13 = 0;
  }
  v12 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v13) & 0xFFFFFFFFFFFFLL;
LABEL_12:
  v14 = (_QWORD *)(v12 + 400);
  if ( is_valid_handle_typeB((unsigned __int64 *)(v12 + 400)) )
  {
    if ( is_valid_handle_typeB((unsigned __int64 *)(v12 + 400)) )
      v15 = *v14 & 0xFFFFFFFFFFFFLL;
    else
      v15 = 0;
    v16 = *(_WORD *)(v7 + 8) & 0xF;
    v17 = *(_QWORD *)v7;
    v18 = (unsigned int)v16;
    v19 = v16;
    *(_BYTE *)(v54 + 12) = a3;
    if ( v15 && (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v15 + 1712LL))(v15) )
    {
      n2 = 2;
      if ( is_valid_handle_typeB((unsigned __int64 *)(v12 + 400))
        && is_valid_handle_typeB((unsigned __int64 *)(v12 + 400)) )
      {
        v20 = *v14 & 0xFFFFFFFFFFFFLL;
      }
      else
      {
        v20 = 0;
      }
      v88 = v20;
      v89 = v17;
      sub_140431310(&v55, &n2);
    }
  }
  else
  {
    v16 = *(_WORD *)(v7 + 8) & 0xF;
    *(_BYTE *)(v7 + 12) = a3;
    v18 = (unsigned int)v16;
    v19 = (unsigned int)v16;
  }
  v21 = v16;
  v77 = 0;
  v76 = 0;
  sub_14705B980(a1, v86, v54);
  v53 = v54;
  v58 = &v55;
  n2816_1 = 2816;
  v63 = 0;
  v64 = 0;
  v66 = 0;
  v67 = 0;
  v68 = 0;
  v65 = 1;
  qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  LOWORD(v91) = *(_WORD *)(v54 + 8);
  v57 = *(_QWORD *)v54;
  v60 = v57;
  LOBYTE(v92) = (*(__int64 (**)(void))(*(_QWORD *)v57 + 1640LL))() != 0;
  v22 = v53 + 48 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v53 + 8) & 0xF) + qword_15146BC68 + 10560360);
  if ( *(_BYTE *)(v54 + 40) )
  {
    v23 = sub_1403A5D40(qword_15146BC68 + 10560592, v22);
    if ( (_BYTE)v92 )
    {
      if ( !v23 )
      {
LABEL_31:
        v85[0] = v12;
        v24 = *(_QWORD *)(v12 + 744) - *(_QWORD *)(v12 + 736);
        v85[1] = &v57;
        v85[2] = &v91;
        v85[3] = v86;
        v85[4] = &v60;
        v85[6] = &v92;
        v85[7] = &v53;
        v85[8] = &v76;
        v85[9] = &v58;
        v61 = v86;
        v25 = (__int64)(*(_QWORD *)(v12 + 720) - *(_QWORD *)(v12 + 712)) >> 6;
        v85[5] = v22;
        if ( v25 != v24 >> 1 )
          sub_14700E8C0(v12 + 712, *(unsigned __int16 *)(v12 + 764), &v61, v85);
        goto LABEL_33;
      }
    }
    else if ( !v23 )
    {
      goto LABEL_33;
    }
    if ( (*(_BYTE *)(v53 + 12) & 8) != 0 )
      sub_1470A9980(v12, v57, (unsigned __int16)v91, v22, (__int64)v58);
    goto LABEL_31;
  }
LABEL_33:
  v66 = __rdtsc();
  qword_149A05E08(&n2816_1);
  v26 = a1;
  v27 = (volatile signed __int64 *)(a1 + 8 * (v19 + 3));
  v59 = v27;
  v28 = _InterlockedIncrement64(v27);
  if ( (*(_QWORD *)&v28 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      (_DWORD)v27,
      v28,
      (unsigned int)"CZoneSystem::RegisterWithExternalSystems",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  v29 = (_QWORD *)v76;
  if ( (_QWORD)v76 )
  {
    n2816_2 = 2816;
    v70 = 0;
    v71 = 0;
    v73 = 0;
    v74 = 0;
    v75 = 0;
    v72 = 1;
    qword_149A05E00(&n2816_2, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
    v30 = qword_15146BC68;
    if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
    {
      do
      {
        v31 = (_QWORD *)*v29;
        sub_14704B550(v30, v29);
        v29 = v31;
      }
      while ( v31 );
LABEL_38:
      v73 = __rdtsc();
      qword_149A05E08(&n2816_2);
      v26 = a1;
      goto LABEL_39;
    }
    v34 = 4 * v18 + 10485976;
    _InterlockedAdd((volatile signed __int32 *)(v34 + qword_15146BC68), v77);
    v35 = (_DWORD *)(v12 + 66224 * v16 + 1472);
    _m_prefetchw(v35 + 1);
    v36 = v35[1];
    do
    {
      v37 = v36 | 1u;
      v38 = v36;
      v36 = _InterlockedCompareExchange(v35 + 1, v37, v36);
    }
    while ( v38 != v36 );
    v39 = v36;
    if ( (v36 & 1) != 0 )
    {
      while ( 1 )
      {
        v40 = _InterlockedCompareExchange(v35 + 1, v39 + 2, v39);
        if ( v39 == v40 )
          break;
        if ( (v40 & 1) != 0 )
        {
          v39 = v40;
        }
        else
        {
          _m_prefetchw(v35 + 1);
          v37 = v35[1] | 1u;
          v39 = _InterlockedOr(v35 + 1, 1u);
          if ( (v39 & 1) == 0 )
            goto LABEL_52;
        }
      }
      v48 = (unsigned __int16)v39 >> 1;
      v49 = &v35[4 * (v48 & 0xFFF) + 4];
      if ( (*v49 & 0x7FFF) != (((_WORD)v48 - 4096) & 0x7FFF) )
        sub_1470B7790(v35, &v35[4 * (v48 & 0xFFF) + 4]);
      *((_QWORD *)v49 + 1) = v29;
      v50 = _InterlockedExchange(v49 + 1, v48);
      if ( (v50 & 0xFFFF8000) != 0 )
        sub_1407E2F90(v35, v49 + 1, v50);
      goto LABEL_38;
    }
LABEL_52:
    v41 = v12 + 1472 + 66224 * v21;
    *v35 = *(_DWORD *)(sub_1402C8360(v37) + 24);
    while ( 1 )
    {
      v42 = qword_15146BC68;
      v43 = 0;
      do
      {
        v44 = (_QWORD *)*v29;
        sub_14704B550(v42, v29);
        ++v43;
        v29 = v44;
      }
      while ( v44 );
      v45 = *(_DWORD *)(v41 + 4);
      v46 = *(_DWORD *)(v41 + 8) & 0x7FFF;
      if ( (unsigned __int16)v45 >> 1 != v46 )
        goto LABEL_63;
      *(_DWORD *)v41 = -1;
      v47 = v45 & 0xFFFFFFFE;
      if ( v45 != _InterlockedCompareExchange((volatile signed __int32 *)(v41 + 4), v47, v45) )
        break;
      v29 = 0;
LABEL_67:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v34), -v43) == v43 )
        qword_1499F5478(v34 + qword_15146BC68);
      if ( !v29 )
      {
        v73 = __rdtsc();
        qword_149A05E08(&n2816_2);
        v27 = v59;
        v26 = a1;
        goto LABEL_39;
      }
    }
    *(_DWORD *)v41 = *(_DWORD *)(sub_1402C8360(v47) + 24);
LABEL_63:
    ++*(_DWORD *)(v41 + 8);
    v51 = v41 + 16 * ((v46 & 0xFFF) + 1LL);
    if ( (*(_DWORD *)(v51 + 4) & 0x7FFF) != v46 )
      sub_1470B7790(v41, v51 + 4);
    v29 = *(_QWORD **)(v51 + 8);
    v52 = _InterlockedExchange((volatile __int32 *)v51, v46);
    if ( (v52 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v41, v51, v52);
    goto LABEL_67;
  }
LABEL_39:
  v32 = _InterlockedDecrement64(v27);
  if ( (v32 & 0x3FF) == 0 && (v32 & 0xFFFF0000FFC00000uLL) != 0 )
    sub_1403CD3A0(v27);
  sub_1402D42F0(v26 + 8);
  sub_14707E720(v26, *(_WORD *)(v54 + 8), (__int64 *)&v55);
  if ( (_QWORD)v55 )
  {
    sub_1403A4F10(&v55, v55, (v56 - v55) & 0xFFFFFFFFFFFFFFE0uLL);
    v55 = 0;
    v56 = 0;
  }
  v82 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_147090D90 (0x147090D90) ---

// --- Function: sub_147093D70 (0x147093D70) ---
__int64 __fastcall sub_147093D70(__int64 a1, int *a2, _DWORD *a3, __int64 *a4)
{
  __int64 n0x200000; // rax
  __int64 v8; // rdi
  __int64 *v9; // rbp
  volatile signed __int64 *v10; // rbx
  int v11; // r12d
  signed __int64 v12; // rax
  int v13; // ecx
  __int64 v14; // rcx
  __int64 v15; // rdx
  int v16; // eax
  __int128 v17; // [rsp+30h] [rbp-48h] BYREF
  __int64 v18; // [rsp+40h] [rbp-38h]
  _UNKNOWN *retaddr; // [rsp+78h] [rbp+0h] BYREF

  n0x200000 = (__int64)&retaddr;
  v8 = a1;
  if ( *a2 == -1 || *a3 == -1 )
    return n0x200000;
  v18 = 0;
  v17 = 0;
  if ( a4 )
  {
    v9 = a4;
  }
  else
  {
    v9 = (__int64 *)&v17;
    a1 = *(_QWORD *)(sub_1402C8360(a1) + 16);
    *(_BYTE *)(a1 + 43) = 1;
  }
  v10 = (volatile signed __int64 *)(v8 + 8);
  v11 = *(_DWORD *)(sub_1402C8360(a1) + 24);
  if ( *(_DWORD *)(v8 + 16) == v11 )
  {
    ++*(_DWORD *)(v8 + 20);
  }
  else
  {
    v12 = _InterlockedCompareExchange64(v10, 0x200000, 0);
    if ( v12 )
      sub_1403DE750(v8 + 8, v12, 0, (unsigned int)"CZoneSystem::RemoveAreaEntry", (__int64)"m_GlobalStateLock", 1);
    *(_DWORD *)(v8 + 16) = v11;
  }
  sub_1470B7660(v8);
  v13 = *a2;
  if ( *a2 != -1 )
  {
    if ( (_WORD)v13 )
    {
      v15 = (unsigned __int16)v13;
      if ( *(_WORD *)(*(_QWORD *)(v8 + 10486016) + 8LL * (unsigned __int16)v13 + 6) != HIWORD(v13) )
      {
        v14 = 0;
        goto LABEL_18;
      }
    }
    else
    {
      v15 = 0;
    }
    v14 = *(_QWORD *)(*(_QWORD *)(v8 + 10486016) + 8 * v15) & 0xFFFFFFFFFFFFLL;
    goto LABEL_18;
  }
  v14 = 0;
LABEL_18:
  n0x200000 = sub_147093670(v14, (unsigned int)*a3, v9);
  *a2 = -1;
  *a3 = -1;
  if ( v8 != -8 )
  {
    v16 = *(_DWORD *)(v8 + 20);
    if ( v16 )
    {
      n0x200000 = (unsigned int)(v16 - 1);
      *(_DWORD *)(v8 + 20) = n0x200000;
    }
    else
    {
      *(_DWORD *)(v8 + 16) = -1;
      n0x200000 = _InterlockedCompareExchange64(v10, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        n0x200000 = sub_1403DEBA0(v8 + 8, n0x200000);
    }
  }
  if ( !a4 )
    n0x200000 = sub_14707E720(v8, 50, v9);
  _InterlockedDecrement((volatile signed __int32 *)(v8 + 10560664));
  if ( (_QWORD)v17 )
    return sub_1403A4F10(&v17, v17, (v18 - v17) & 0xFFFFFFFFFFFFFFE0uLL);
  return n0x200000;
}

// --- End Function: sub_147093D70 (0x147093D70) ---

// --- Function: sub_147094EE0 (0x147094EE0) ---
__int64 __fastcall sub_147094EE0(__int64 a1, __int64 a2, __int64 *a3, char a4)
{
  __int64 *v4; // rsi
  __int64 v7; // rcx
  unsigned __int64 v8; // rdi
  __int64 v9; // r14
  volatile signed __int64 *v10; // r12
  int v11; // edx
  volatile signed __int64 *v12; // r15
  signed __int64 v13; // rax
  int v14; // eax
  __int64 v15; // rbx
  __int64 v16; // rbx
  int v17; // ecx
  _QWORD *v18; // rsi
  __int64 v19; // rdi
  _QWORD *v20; // rbx
  __int64 v21; // r12
  _DWORD *v22; // rdi
  __int64 v23; // rcx
  signed __int32 v24; // ebx
  signed __int32 v25; // eax
  __int64 v26; // r15
  int v27; // r14d
  _QWORD *v28; // rbx
  signed __int32 v29; // eax
  int v30; // r15d
  __int64 v31; // rcx
  _DWORD *v32; // rbx
  unsigned __int32 v33; // r15d
  signed __int64 n0x200000; // rax
  int v36; // ebx
  _DWORD *v37; // rsi
  unsigned __int32 v38; // ebx
  __int64 *v39; // [rsp+30h] [rbp-D0h]
  __int128 v40; // [rsp+38h] [rbp-C8h] BYREF
  __int64 v41; // [rsp+48h] [rbp-B8h]
  volatile signed __int64 *v42; // [rsp+58h] [rbp-A8h]
  __int128 v43; // [rsp+60h] [rbp-A0h] BYREF
  unsigned int v44; // [rsp+70h] [rbp-90h]
  int n2816_1; // [rsp+80h] [rbp-80h] BYREF
  __int64 v46; // [rsp+84h] [rbp-7Ch]
  int v47; // [rsp+8Ch] [rbp-74h]
  __int64 v48; // [rsp+90h] [rbp-70h]
  unsigned __int64 v49; // [rsp+98h] [rbp-68h]
  __int64 v50; // [rsp+A0h] [rbp-60h]
  __int64 v51; // [rsp+A8h] [rbp-58h]
  int n2816; // [rsp+D0h] [rbp-30h] BYREF
  __int64 v53; // [rsp+D4h] [rbp-2Ch]
  int v54; // [rsp+DCh] [rbp-24h]
  __int64 v55; // [rsp+E0h] [rbp-20h]
  unsigned __int64 v56; // [rsp+E8h] [rbp-18h]
  __int64 v57; // [rsp+F0h] [rbp-10h]
  __int64 v58; // [rsp+F8h] [rbp-8h]
  __int16 v59; // [rsp+170h] [rbp+70h]
  int v60; // [rsp+178h] [rbp+78h] BYREF
  __int64 *v61; // [rsp+180h] [rbp+80h]
  char v62; // [rsp+188h] [rbp+88h]

  v62 = a4;
  v61 = a3;
  n2816 = 2816;
  v4 = a3;
  v53 = 0;
  v54 = 0;
  v56 = 0;
  v57 = 0;
  v58 = 0;
  v55 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v7 = *(unsigned __int8 *)(a2 + 3);
  v8 = *(_QWORD *)(a1 + 72 * v7 + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v7 + 10560336);
  if ( !*(_BYTE *)(v8 + 40) )
    goto LABEL_51;
  v9 = *(_WORD *)(v8 + 8) & 0xF;
  v59 = *(_WORD *)(v8 + 8);
  v41 = 0;
  v40 = 0;
  if ( !v4 )
  {
    v4 = (__int64 *)&v40;
    v7 = *(_QWORD *)(sub_1402C8360(v7) + 16);
    *(_BYTE *)(v7 + v9 + 41) = 1;
  }
  v39 = v4;
  v10 = (volatile signed __int64 *)(a1 + 8);
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(v7) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v11 = _InterlockedIncrement64(v10);
    if ( (*(_QWORD *)&v11 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        a1 + 8,
        v11,
        (unsigned int)"CZoneSystem::RemoveObjectFromAllAreas",
        (unsigned int)"m_GlobalStateLock",
        1);
  }
  v12 = (volatile signed __int64 *)(a1 + 24 + 8 * v9);
  v42 = v12;
  if ( !v62 )
  {
    v13 = _InterlockedCompareExchange64(v12, 0x200000, 0);
    if ( v13 )
      sub_1403DE750(
        a1 + 24 + 8 * v9,
        v13,
        0,
        (unsigned int)"CZoneSystem::RemoveObjectFromAllAreas",
        (__int64)"m_CullingLock[nTypeIndex]",
        1);
    v14 = *(_DWORD *)(a1 + 4 * v9 + 10485976);
    if ( v14 )
    {
      v15 = 4 * v9;
      do
      {
        v60 = v14;
        qword_1499F5468(v15 + a1 + 10485976, &v60, 4, 0xFFFFFFFFLL);
        v14 = *(_DWORD *)(v15 + a1 + 10485976);
      }
      while ( v14 );
    }
  }
  v16 = 0;
  v44 = 0;
  v43 = 0;
  sub_147095470(a1, v8, v4, &v43);
  v17 = *(_DWORD *)(v8 + 16);
  if ( v17 != -1 )
  {
    if ( !(_WORD)v17
      || (v16 = (unsigned __int16)v17,
          *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v17 + 6) == HIWORD(v17)) )
    {
      v16 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
    }
    else
    {
      v16 = 0;
    }
  }
  v18 = (_QWORD *)v43;
  if ( (_QWORD)v43 )
  {
    n2816_1 = 2816;
    v46 = 0;
    v47 = 0;
    v49 = 0;
    v50 = 0;
    v51 = 0;
    v48 = 1;
    qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
    v19 = qword_15146BC68;
    if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
    {
      do
      {
        v20 = (_QWORD *)*v18;
        sub_14704B550(v19, v18);
        v18 = v20;
      }
      while ( v20 );
      v49 = __rdtsc();
      qword_149A05E08(&n2816_1);
      goto LABEL_43;
    }
    v21 = 4 * v9 + 10485976;
    _InterlockedAdd((volatile signed __int32 *)(v21 + qword_15146BC68), v44);
    v22 = (_DWORD *)(v16 + 66224 * v9 + 1472);
    _m_prefetchw(v22 + 1);
    v23 = v22[1] | 1u;
    v24 = _InterlockedOr(v22 + 1, 1u);
    if ( (v24 & 1) != 0 )
    {
      while ( 1 )
      {
        v25 = _InterlockedCompareExchange(v22 + 1, v24 + 2, v24);
        if ( v24 == v25 )
          break;
        if ( (v25 & 1) != 0 )
        {
          v24 = v25;
        }
        else
        {
          _m_prefetchw(v22 + 1);
          v23 = v22[1] | 1u;
          v24 = _InterlockedOr(v22 + 1, 1u);
          if ( (v24 & 1) == 0 )
            goto LABEL_28;
        }
      }
      v36 = (unsigned __int16)v24 >> 1;
      v37 = &v22[4 * (v36 & 0xFFF) + 4];
      if ( (*v37 & 0x7FFF) != (((_WORD)v36 - 4096) & 0x7FFF) )
        sub_1470B7790(v22, &v22[4 * (v36 & 0xFFF) + 4]);
      *((_QWORD *)v37 + 1) = v43;
      v38 = _InterlockedExchange(v37 + 1, v36);
      if ( (v38 & 0xFFFF8000) != 0 )
        sub_1407E2F90(v22, v37 + 1, v38);
      v49 = __rdtsc();
      qword_149A05E08(&n2816_1);
LABEL_42:
      v10 = (volatile signed __int64 *)(a1 + 8);
      goto LABEL_43;
    }
LABEL_28:
    *v22 = *(_DWORD *)(sub_1402C8360(v23) + 24);
    while ( 1 )
    {
      v26 = qword_15146BC68;
      v27 = 0;
      do
      {
        v28 = (_QWORD *)*v18;
        sub_14704B550(v26, v18);
        ++v27;
        v18 = v28;
      }
      while ( v28 );
      v29 = v22[1];
      v30 = v22[2] & 0x7FFF;
      if ( (unsigned __int16)v29 >> 1 != v30 )
        goto LABEL_34;
      *v22 = -1;
      v31 = v29 & 0xFFFFFFFE;
      if ( v29 != _InterlockedCompareExchange(v22 + 1, v31, v29) )
        break;
LABEL_38:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v21), -v27) == v27 )
        qword_1499F5478(v21 + qword_15146BC68);
      if ( !v18 )
      {
        v49 = __rdtsc();
        qword_149A05E08(&n2816_1);
        v12 = v42;
        goto LABEL_42;
      }
    }
    *v22 = *(_DWORD *)(sub_1402C8360(v31) + 24);
LABEL_34:
    ++v22[2];
    v32 = &v22[4 * (v30 & 0xFFF) + 4];
    if ( (v32[1] & 0x7FFF) != v30 )
      sub_1470B7790(v22, v32 + 1);
    v18 = (_QWORD *)*((_QWORD *)v32 + 1);
    v33 = _InterlockedExchange(v32, v30);
    if ( (v33 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v22, v32, v33);
    goto LABEL_38;
  }
LABEL_43:
  if ( v12 )
  {
    if ( !v62 )
    {
      n0x200000 = _InterlockedCompareExchange64(v12, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        sub_1403DEBA0(v12, n0x200000);
    }
  }
  sub_1402D42F0(v10);
  if ( !v61 )
    sub_14707E720(a1, v59, v39);
  if ( (_QWORD)v40 )
  {
    sub_1403A4F10(&v40, v40, (v41 - v40) & 0xFFFFFFFFFFFFFFE0uLL);
    v40 = 0;
    v41 = 0;
  }
LABEL_51:
  v56 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_147094EE0 (0x147094EE0) ---

// --- Function: sub_147096120 (0x147096120) ---
char __fastcall sub_147096120(__int64 a1, __int64 a2, _QWORD *a3, __int64 *a4, __int64 a5)
{
  __int64 v10; // rax
  unsigned __int8 v11; // si
  __int64 v12; // rdx
  unsigned __int64 v13; // r14
  _WORD *v14; // rbx
  int v15; // edx
  int v16; // ecx
  _WORD *v17; // rax
  __int64 v18; // r14
  __int64 v19; // rdx
  __int64 v20; // r12
  bool v21; // r13
  char v22; // bl
  char v23; // al
  __int64 v24; // r13
  int v25; // eax
  unsigned __int8 v26; // bl
  __int64 v27; // rsi
  int v28; // eax
  int v29; // ebx
  __int64 v30; // rdi
  __int64 v31; // rsi
  __int64 v32; // rdi
  __int64 v33; // rbx
  _DWORD *v34; // rbx
  __int64 v35; // rcx
  signed __int32 v36; // edi
  signed __int32 v37; // eax
  __int64 v38; // rax
  __int64 v39; // r13
  __int64 v40; // r15
  int v41; // r14d
  int v42; // edi
  _DWORD *v43; // r14
  unsigned __int32 v44; // edi
  __int64 v45; // rdi
  signed __int32 v46; // eax
  int v47; // r15d
  __int64 v48; // rcx
  _DWORD *v49; // rdi
  unsigned __int32 v50; // r15d
  char v51; // [rsp+40h] [rbp-C0h]
  char v52; // [rsp+41h] [rbp-BFh]
  _WORD *v53; // [rsp+48h] [rbp-B8h]
  unsigned __int64 v54; // [rsp+50h] [rbp-B0h]
  __int64 *v55; // [rsp+58h] [rbp-A8h]
  _BYTE v56[4]; // [rsp+60h] [rbp-A0h] BYREF
  _BYTE v57[4]; // [rsp+64h] [rbp-9Ch] BYREF
  __int64 v58; // [rsp+68h] [rbp-98h] BYREF
  __int64 v59; // [rsp+70h] [rbp-90h]
  _BYTE v60[4]; // [rsp+78h] [rbp-88h] BYREF
  int v61; // [rsp+7Ch] [rbp-84h] BYREF
  __int64 v62; // [rsp+80h] [rbp-80h]
  __int128 v63; // [rsp+88h] [rbp-78h] BYREF
  __int64 v64; // [rsp+98h] [rbp-68h]
  int n2816; // [rsp+A0h] [rbp-60h] BYREF
  __int64 v66; // [rsp+A4h] [rbp-5Ch]
  int v67; // [rsp+ACh] [rbp-54h]
  __int64 v68; // [rsp+B0h] [rbp-50h]
  unsigned __int64 v69; // [rsp+B8h] [rbp-48h]
  __int64 v70; // [rsp+C0h] [rbp-40h]
  __int64 v71; // [rsp+C8h] [rbp-38h]
  __m256 v72; // [rsp+F0h] [rbp-10h] BYREF
  unsigned __int8 v74; // [rsp+160h] [rbp+60h]

  if ( *(_WORD *)a3 == 0xFFFF )
    return 0;
  v10 = sub_1403614E0(v60, a3);
  v11 = sub_1403A5D40(qword_15146BC68 + 10560592, v10);
  sub_140374510(v60);
  v12 = *(unsigned __int8 *)(a2 + 3);
  v13 = *(_QWORD *)(a1 + 72 * v12 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v12 + 10560336);
  v54 = v13;
  v64 = 0;
  v63 = 0;
  v14 = (_WORD *)(v13 + 8);
  if ( a4 )
  {
    v55 = a4;
  }
  else
  {
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(9 * v12) + 16) + (*v14 & 0xF) + 41LL) = 1;
    v55 = (__int64 *)&v63;
  }
  v53 = (_WORD *)(v13 + 8);
  v58 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v51 = *(_BYTE *)(v58 + 2544);
  if ( !v51 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(2544) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
      v53 = (_WORD *)(v13 + 8);
    }
    else
    {
      v15 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      v53 = (_WORD *)(v13 + 8);
      if ( (*(_QWORD *)&v15 & 0x200000LL) != 0 )
      {
        sub_1403CD0A0(a1 + 8, v15, (unsigned int)"CZoneSystem::RemoveTag", (unsigned int)"m_GlobalStateLock", 1);
        v53 = (_WORD *)(v13 + 8);
      }
    }
  }
  v16 = *(_DWORD *)(v13 + 16);
  if ( v16 != -1 )
  {
    if ( (_WORD)v16 )
    {
      v19 = (unsigned __int16)v16;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v16 + 6) != HIWORD(v16) )
      {
        v18 = 0;
LABEL_18:
        v53 = v14;
        v17 = v14;
        goto LABEL_19;
      }
    }
    else
    {
      v19 = 0;
    }
    v18 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v19) & 0xFFFFFFFFFFFFLL;
    goto LABEL_18;
  }
  v17 = v53;
  v18 = 0;
LABEL_19:
  v20 = *v17 & 0xF;
  v62 = a1 + 24 + 8LL * (unsigned int)v20;
  sub_14702BB40(v54, a5, v62, v11);
  sub_140361520(v57, v54 + 48 + *(unsigned __int16 *)(22LL * (*v53 & 0xF) + a1 + 10560360));
  v21 = (*v53 & 0x2000) != 0;
  v22 = *(_BYTE *)(v54 + 40);
  v59 = v54 + 48 + *(unsigned __int16 *)(22LL * (*v53 & 0xF) + a1 + 10560360);
  v23 = sub_1403BC2B0(v59, a3);
  if ( !v22 || !v21 )
  {
LABEL_27:
    if ( v11 )
      sub_1403A5650(v62);
    goto LABEL_29;
  }
  if ( v11 )
  {
    if ( v23 )
    {
      v24 = a1;
      v74 = 1;
      v25 = *(_DWORD *)(a1 + 4 * v20 + 10485976);
      if ( v25 )
      {
        v74 = 1;
        do
        {
          v61 = v25;
          qword_1499F5468(4 * v20 + a1 + 10485976, &v61, 4, 0xFFFFFFFFLL);
          v25 = *(_DWORD *)(a1 + 4 * v20 + 10485976);
        }
        while ( v25 );
      }
      sub_147094EE0(a1, a2, v55, 1);
      v26 = 1;
      goto LABEL_30;
    }
    goto LABEL_27;
  }
LABEL_29:
  v24 = a1;
  v26 = 0;
  v74 = 0;
LABEL_30:
  v27 = v59;
  v52 = sub_1403D04E0(v59, *a3);
  if ( v26 )
  {
    sub_14708C540(v24, a2, v55, v26);
    if ( (*(_BYTE *)(v54 + 12) & 8) != 0 )
    {
      if ( (unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, v27) )
      {
        LODWORD(v72.m256_f32[0]) = 1;
        LOWORD(v72.m256_f32[6]) = *v53;
        *(_QWORD *)&v72.m256_f32[4] = *(_QWORD *)v54;
        v29 = sub_1470656A0(v24, a2);
        sub_1403614E0(v56, a3);
        __asm { vzeroupper }
        sub_1470A9D70(v29, *(_QWORD *)v54, (unsigned __int16)*v53, (unsigned int)&v72, v27, (__int64)v56, (__int64)v55);
        sub_140374510(v56);
      }
      else
      {
        v28 = sub_1470656A0(v24, a2);
        sub_1470A9BA0(v28, *(_QWORD *)v54, (unsigned __int16)*v53, (unsigned int)v57, (__int64)v55);
      }
    }
  }
  v30 = v58 + 2752;
  v31 = sub_1403E4B00(v58 + 2752);
  if ( !v31 )
    v31 = allocWithProfilerInfo(0x28u, 0);
  *(_BYTE *)(v31 + 24) = 12;
  *(_QWORD *)v31 = 0;
  *(_QWORD *)(v31 + 8) = 0;
  *(_QWORD *)(v31 + 16) = 0;
  sub_140361940(v31 + 32);
  *(_QWORD *)(v31 + 8) = v54;
  *(_QWORD *)(v31 + 16) = v30;
  sub_1403614E0(&v58, a3);
  sub_14037B4F0(v31 + 32, &v58);
  sub_140374510(&v58);
  n2816 = 2816;
  v66 = 0;
  v67 = 0;
  v69 = 0;
  v70 = 0;
  v71 = 0;
  v68 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v32 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v33 = *(_QWORD *)v31;
      sub_14704B550(v32, v31);
      v31 = v33;
    }
    while ( v33 );
    goto LABEL_39;
  }
  v59 = 4 * v20 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v20 + 10485976));
  v34 = (_DWORD *)(v18 + 66224 * v20 + 1472);
  _m_prefetchw(v34 + 1);
  v35 = v34[1] | 1u;
  v36 = _InterlockedOr(v34 + 1, 1u);
  if ( (v36 & 1) != 0 )
  {
    while ( 1 )
    {
      v37 = _InterlockedCompareExchange(v34 + 1, v36 + 2, v36);
      if ( v36 == v37 )
        break;
      if ( (v37 & 1) != 0 )
      {
        v36 = v37;
      }
      else
      {
        _m_prefetchw(v34 + 1);
        v35 = v34[1] | 1u;
        v36 = _InterlockedOr(v34 + 1, 1u);
        if ( (v36 & 1) == 0 )
          goto LABEL_45;
      }
    }
    v42 = (unsigned __int16)v36 >> 1;
    v43 = &v34[4 * (v42 & 0xFFF) + 4];
    if ( (*v43 & 0x7FFF) != (((_WORD)v42 - 4096) & 0x7FFF) )
      sub_1470B7790(v34, &v34[4 * (v42 & 0xFFF) + 4]);
    *((_QWORD *)v43 + 1) = v31;
    v44 = _InterlockedExchange(v43 + 1, v42);
    if ( (v44 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v34, v43 + 1, v44);
LABEL_39:
    v69 = __rdtsc();
    qword_149A05E08(&n2816);
    goto LABEL_66;
  }
LABEL_45:
  v38 = sub_1402C8360(v35);
  v39 = v59;
  *v34 = *(_DWORD *)(v38 + 24);
  do
  {
    v40 = qword_15146BC68;
    if ( v31 )
    {
      v41 = 0;
      do
      {
        v45 = *(_QWORD *)v31;
        sub_14704B550(v40, v31);
        ++v41;
        v31 = v45;
      }
      while ( v45 );
    }
    else
    {
      v41 = 0;
    }
    v46 = v34[1];
    v47 = v34[2] & 0x7FFF;
    if ( (unsigned __int16)v46 >> 1 == v47 )
    {
      *v34 = -1;
      v48 = v46 & 0xFFFFFFFE;
      if ( v46 == _InterlockedCompareExchange(v34 + 1, v48, v46) )
      {
        v31 = 0;
        goto LABEL_62;
      }
      *v34 = *(_DWORD *)(sub_1402C8360(v48) + 24);
    }
    ++v34[2];
    v49 = &v34[4 * (v47 & 0xFFF) + 4];
    if ( (v49[1] & 0x7FFF) != v47 )
      sub_1470B7790(v34, v49 + 1);
    v31 = *((_QWORD *)v49 + 1);
    v50 = _InterlockedExchange(v49, v47);
    if ( (v50 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v34, v49, v50);
LABEL_62:
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v39), -v41) == v41 )
      qword_1499F5478(v39 + qword_15146BC68);
  }
  while ( v31 );
  v69 = __rdtsc();
  qword_149A05E08(&n2816);
  v24 = a1;
LABEL_66:
  sub_1470918C0(v54, a5, v62, v74);
  sub_140374510(v57);
  if ( !v51 )
    sub_1402D42F0(v24 + 8);
  if ( !a4 )
    sub_14707E720(v24, *v53, v55);
  if ( (_QWORD)v63 )
    sub_1403A4F10(&v63, v63, (v64 - v63) & 0xFFFFFFFFFFFFFFE0uLL);
  return v52;
}

// --- End Function: sub_147096120 (0x147096120) ---

// --- Function: sub_147096E80 (0x147096E80) ---
__int64 __fastcall sub_147096E80(__int64 a1, int *a2, _DWORD *a3, _QWORD *a4, __int64 *a5)
{
  __int64 n0x200000; // rax
  __int64 v9; // rsi
  __int64 *v10; // r15
  volatile signed __int64 *v11; // rdi
  int v12; // r14d
  signed __int64 v13; // rax
  int v14; // ecx
  __int64 v15; // rcx
  __int64 v16; // rdx
  _QWORD *v17; // rdx
  _QWORD *v18; // rbx
  int v19; // eax
  __int128 v20; // [rsp+30h] [rbp-48h] BYREF
  __int64 v21; // [rsp+40h] [rbp-38h]
  __int128 v22; // [rsp+48h] [rbp-30h] BYREF
  int v23; // [rsp+58h] [rbp-20h]
  _UNKNOWN *retaddr; // [rsp+78h] [rbp+0h] BYREF

  n0x200000 = (__int64)&retaddr;
  v9 = a1;
  if ( *a2 == -1 || *a3 == -1 )
    return n0x200000;
  v20 = 0;
  v21 = 0;
  if ( a5 )
  {
    v10 = a5;
  }
  else
  {
    v10 = (__int64 *)&v20;
    a1 = *(_QWORD *)(sub_1402C8360(a1) + 16);
    *(_BYTE *)(a1 + 43) = 1;
  }
  v11 = (volatile signed __int64 *)(v9 + 8);
  v12 = *(_DWORD *)(sub_1402C8360(a1) + 24);
  if ( *(_DWORD *)(v9 + 16) == v12 )
  {
    ++*(_DWORD *)(v9 + 20);
  }
  else
  {
    v13 = _InterlockedCompareExchange64(v11, 0x200000, 0);
    if ( v13 )
      sub_1403DE750(
        v9 + 8,
        v13,
        0,
        (unsigned int)"CZoneSystem::RemoveTagToTrackFromArea",
        (__int64)"m_GlobalStateLock",
        1);
    *(_DWORD *)(v9 + 16) = v12;
  }
  sub_1470B7660(v9);
  v14 = *a2;
  v23 = 0;
  v22 = 0;
  if ( v14 != -1 )
  {
    if ( (_WORD)v14 )
    {
      v16 = (unsigned __int16)v14;
      if ( *(_WORD *)(*(_QWORD *)(v9 + 10486016) + 8LL * (unsigned __int16)v14 + 6) != HIWORD(v14) )
      {
        LODWORD(v15) = 0;
        goto LABEL_18;
      }
    }
    else
    {
      v16 = 0;
    }
    v15 = *(_QWORD *)(*(_QWORD *)(v9 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
    goto LABEL_18;
  }
  LODWORD(v15) = 0;
LABEL_18:
  n0x200000 = sub_1470968E0(v15, *a3, *a4, (unsigned int)&v22, (char)v10);
  v17 = (_QWORD *)v22;
  if ( (_QWORD)v22 )
  {
    do
    {
      v18 = (_QWORD *)*v17;
      n0x200000 = sub_14704B550(v9, v17);
      v17 = v18;
    }
    while ( v18 );
  }
  if ( v9 != -8 )
  {
    v19 = *(_DWORD *)(v9 + 20);
    if ( v19 )
    {
      n0x200000 = (unsigned int)(v19 - 1);
      *(_DWORD *)(v9 + 20) = n0x200000;
    }
    else
    {
      *(_DWORD *)(v9 + 16) = -1;
      n0x200000 = _InterlockedCompareExchange64(v11, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        n0x200000 = sub_1403DEBA0(v9 + 8, n0x200000);
    }
  }
  if ( !a5 )
    n0x200000 = sub_14707E720(v9, 50, v10);
  if ( (_QWORD)v20 )
    return sub_1403A4F10(&v20, v20, (v21 - v20) & 0xFFFFFFFFFFFFFFE0uLL);
  return n0x200000;
}

// --- End Function: sub_147096E80 (0x147096E80) ---

// --- Function: sub_147097070 (0x147097070) ---
char __fastcall sub_147097070(__int64 a1, __int64 a2, __int64 a3, __int64 *a4, __int64 a5)
{
  unsigned __int8 v10; // r15
  __int64 v11; // rdx
  unsigned __int64 v12; // r12
  _WORD *v13; // rdi
  int v14; // edx
  int v15; // ecx
  __int64 v16; // rdx
  unsigned __int64 v17; // rbx
  bool v18; // r12
  __int64 v19; // r13
  char v20; // al
  unsigned __int8 v21; // bl
  __int64 v22; // r12
  __int64 v23; // r15
  int v24; // eax
  unsigned __int64 v25; // r12
  int v26; // eax
  int v27; // eax
  char v28; // al
  __int64 v29; // r14
  __int64 v30; // rdi
  __int64 v31; // rsi
  __int64 v32; // rbx
  __int64 v33; // r13
  __int64 v34; // r14
  _DWORD *v35; // rbx
  __int64 v36; // rcx
  signed __int32 v37; // esi
  signed __int32 v38; // eax
  _DWORD *v39; // r15
  __int64 v40; // r14
  int v41; // esi
  __int64 v42; // rbx
  signed __int32 v43; // eax
  int v44; // r14d
  __int64 v45; // rcx
  int v46; // esi
  _DWORD *v47; // r14
  unsigned __int32 v48; // esi
  _DWORD *v49; // rbx
  unsigned __int32 v50; // r14d
  unsigned __int8 v51; // [rsp+40h] [rbp-C0h]
  char v52; // [rsp+41h] [rbp-BFh]
  char v53; // [rsp+42h] [rbp-BEh]
  _BYTE v54[4]; // [rsp+44h] [rbp-BCh] BYREF
  __int64 v55; // [rsp+48h] [rbp-B8h]
  __int64 *v56; // [rsp+50h] [rbp-B0h]
  __int64 v57; // [rsp+58h] [rbp-A8h]
  unsigned __int64 v58; // [rsp+60h] [rbp-A0h]
  int v59; // [rsp+68h] [rbp-98h] BYREF
  _BYTE v60[16]; // [rsp+70h] [rbp-90h] BYREF
  __int64 v61; // [rsp+80h] [rbp-80h]
  __int128 v62; // [rsp+88h] [rbp-78h] BYREF
  __int64 v63; // [rsp+98h] [rbp-68h]
  int n2816; // [rsp+A0h] [rbp-60h] BYREF
  __int64 v65; // [rsp+A4h] [rbp-5Ch]
  int v66; // [rsp+ACh] [rbp-54h]
  __int64 v67; // [rsp+B0h] [rbp-50h]
  unsigned __int64 v68; // [rsp+B8h] [rbp-48h]
  __int64 v69; // [rsp+C0h] [rbp-40h]
  __int64 v70; // [rsp+C8h] [rbp-38h]
  _BYTE v71[16]; // [rsp+F0h] [rbp-10h] BYREF
  __m256 v72; // [rsp+100h] [rbp+0h] BYREF
  char v73[16]; // [rsp+120h] [rbp+20h] BYREF

  if ( !(unsigned __int8)sub_1403BC2D0(a3) )
    return 1;
  v10 = sub_1403A5D40(qword_15146BC68 + 10560592, a3);
  v11 = *(unsigned __int8 *)(a2 + 3);
  v12 = *(_QWORD *)(a1 + 72 * v11 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v11 + 10560336);
  v58 = v12;
  v63 = 0;
  v62 = 0;
  if ( a4 )
  {
    v56 = a4;
  }
  else
  {
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(9 * v11) + 16) + (*(_WORD *)(v12 + 8) & 0xF) + 41LL) = 1;
    v56 = (__int64 *)&v62;
  }
  v13 = (_WORD *)(v12 + 8);
  v61 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v53 = *(_BYTE *)(v61 + 2544);
  if ( !v53 )
  {
    v13 = (_WORD *)(v12 + 8);
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(2544) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v14 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v14 & 0x200000LL) != 0 )
      {
        sub_1403CD0A0(a1 + 8, v14, (unsigned int)"CZoneSystem::RemoveTags", (unsigned int)"m_GlobalStateLock", 1);
        v13 = (_WORD *)(v12 + 8);
      }
    }
  }
  v15 = *(_DWORD *)(v12 + 16);
  if ( v15 != -1 )
  {
    if ( (_WORD)v15 )
    {
      v16 = (unsigned __int16)v15;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v15 + 6) != HIWORD(v15) )
      {
        v57 = 0;
LABEL_18:
        v13 = (_WORD *)(v12 + 8);
        goto LABEL_19;
      }
    }
    else
    {
      v16 = 0;
    }
    v57 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v16) & 0xFFFFFFFFFFFFLL;
    goto LABEL_18;
  }
  v57 = 0;
LABEL_19:
  v55 = *v13 & 0xF;
  sub_14702BB40(v12, a5, a1 + 8 * (v55 + 3), v10);
  v17 = v12 + 48;
  sub_140361520(v54, v12 + 48 + *(unsigned __int16 *)(22LL * (*v13 & 0xF) + a1 + 10560360));
  v18 = (*v13 & 0x2000) != 0;
  v19 = v17 + *(unsigned __int16 *)(22LL * (*v13 & 0xF) + a1 + 10560360);
  LOBYTE(v17) = *(_BYTE *)(v58 + 40);
  v20 = sub_1403BC200(v19, a3);
  if ( (_BYTE)v17 && v18 && v10 && v20 )
  {
    v21 = 1;
    v51 = 1;
LABEL_24:
    v22 = v55;
    v23 = a1;
    goto LABEL_25;
  }
  v21 = 0;
  v51 = 0;
  if ( !v10 )
    goto LABEL_24;
  v22 = v55;
  v23 = a1;
  sub_1403A5650(a1 + 8 * (v55 + 3));
  v51 = 0;
LABEL_25:
  if ( (unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, a3) )
  {
    sub_1403E3E40(a3, v60);
    sub_1403E6BC0(a3, v71);
    while ( (unsigned __int8)sub_1403813A0(v60, v71) )
    {
      sub_140381EC0(v60, v73);
      sub_140381F10(v60);
    }
  }
  if ( v21 )
  {
    v24 = *(_DWORD *)(v23 + 4 * v22 + 10485976);
    if ( v24 )
    {
      do
      {
        v59 = v24;
        qword_1499F5468(v23 + 4 * (v22 + 2621494), &v59, 4, 0xFFFFFFFFLL);
        v24 = *(_DWORD *)(v23 + 4 * v22 + 10485976);
      }
      while ( v24 );
      v21 = v51;
    }
    sub_147094EE0(v23, a2, v56, v51);
    v52 = sub_1403D0510(v19, a3);
    sub_14708C540(v23, a2, v56, v21);
    v25 = v58;
    v51 = v21;
    if ( (*(_BYTE *)(v58 + 12) & 8) != 0 )
    {
      if ( (unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, v19) )
      {
        LOWORD(v72.m256_f32[6]) = *v13;
        *(_QWORD *)&v72.m256_f32[4] = *(_QWORD *)v25;
        LODWORD(v72.m256_f32[0]) = 1;
        v27 = sub_1470656A0(v23, a2);
        __asm { vzeroupper }
        sub_1470A9D70(v27, *(_QWORD *)v25, (unsigned __int16)*v13, (unsigned int)&v72, v19, a3, (__int64)v56);
      }
      else
      {
        v26 = sub_1470656A0(v23, a2);
        sub_1470A9BA0(v26, *(_QWORD *)v25, (unsigned __int16)*v13, (unsigned int)v54, (__int64)v56);
      }
      v51 = v21;
    }
  }
  else
  {
    v28 = sub_1403D0510(v19, a3);
    v25 = v58;
    v52 = v28;
  }
  v29 = v61 + 2752;
  v30 = sub_1403E4B00(v61 + 2752);
  if ( !v30 )
    v30 = allocWithProfilerInfo(0x28u, 0);
  *(_BYTE *)(v30 + 24) = 12;
  *(_QWORD *)v30 = 0;
  *(_QWORD *)(v30 + 8) = 0;
  *(_QWORD *)(v30 + 16) = 0;
  sub_140361940(v30 + 32);
  *(_QWORD *)(v30 + 8) = v25;
  *(_QWORD *)(v30 + 16) = v29;
  sub_14037B530(v30 + 32, a3);
  n2816 = 2816;
  v65 = 0;
  v66 = 0;
  v68 = 0;
  v69 = 0;
  v70 = 0;
  v67 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v31 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v32 = *(_QWORD *)v30;
      sub_14704B550(v31, v30);
      v30 = v32;
    }
    while ( v32 );
    goto LABEL_44;
  }
  v33 = v55;
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v55 + 10485976));
  v34 = v57;
  v35 = (_DWORD *)(66224 * v33 + v57 + 1472);
  _m_prefetchw(v35 + 1);
  v36 = v35[1] | 1u;
  v37 = _InterlockedOr(v35 + 1, 1u);
  if ( (v37 & 1) != 0 )
  {
    while ( 1 )
    {
      v38 = _InterlockedCompareExchange(v35 + 1, v37 + 2, v37);
      if ( v37 == v38 )
        break;
      if ( (v38 & 1) != 0 )
      {
        v37 = v38;
      }
      else
      {
        _m_prefetchw(v35 + 1);
        v36 = v35[1] | 1u;
        v37 = _InterlockedOr(v35 + 1, 1u);
        if ( (v37 & 1) == 0 )
          goto LABEL_50;
      }
    }
    v46 = (unsigned __int16)v37 >> 1;
    v47 = &v35[4 * (v46 & 0xFFF) + 4];
    if ( (*v47 & 0x7FFF) != (((_WORD)v46 - 4096) & 0x7FFF) )
      sub_1470B7790(v35, &v35[4 * (v46 & 0xFFF) + 4]);
    *((_QWORD *)v47 + 1) = v30;
    v48 = _InterlockedExchange(v47 + 1, v46);
    if ( (v48 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v35, v47 + 1, v48);
LABEL_44:
    v68 = __rdtsc();
    qword_149A05E08(&n2816);
    goto LABEL_69;
  }
LABEL_50:
  *v35 = *(_DWORD *)(sub_1402C8360(v36) + 24);
  v39 = (_DWORD *)(v34 + 66224 * v33 + 1472);
  do
  {
    v40 = qword_15146BC68;
    v41 = 0;
    if ( v30 )
    {
      do
      {
        v42 = *(_QWORD *)v30;
        sub_14704B550(v40, v30);
        ++v41;
        v30 = v42;
      }
      while ( v42 );
    }
    v43 = v39[1];
    v44 = v39[2] & 0x7FFF;
    if ( (unsigned __int16)v43 >> 1 == v44 )
    {
      *v39 = -1;
      v45 = v43 & 0xFFFFFFFE;
      if ( v43 == _InterlockedCompareExchange(v39 + 1, v45, v43) )
      {
        v30 = 0;
        goto LABEL_65;
      }
      *v39 = *(_DWORD *)(sub_1402C8360(v45) + 24);
    }
    ++v39[2];
    v49 = &v39[4 * (v44 & 0xFFF) + 4];
    if ( (v49[1] & 0x7FFF) != v44 )
      sub_1470B7790(v39, v49 + 1);
    v30 = *((_QWORD *)v49 + 1);
    v50 = _InterlockedExchange(v49, v44);
    if ( (v50 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v39, v49, v50);
LABEL_65:
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 4 * v33 + 10485976), -v41) == v41 )
      qword_1499F5478(qword_15146BC68 + 10485976 + 4 * v33);
  }
  while ( v30 );
  v68 = __rdtsc();
  qword_149A05E08(&n2816);
  v25 = v58;
LABEL_69:
  sub_1470918C0(v25, a5, a1 + 8 * v55 + 24, v51);
  sub_140374510(v54);
  if ( !v53 )
    sub_1402D42F0(a1 + 8);
  if ( !a4 )
    sub_14707E720(a1, *(_WORD *)(v25 + 8), v56);
  if ( (_QWORD)v62 )
    sub_1403A4F10(&v62, v62, (v63 - v62) & 0xFFFFFFFFFFFFFFE0uLL);
  return v52;
}

// --- End Function: sub_147097070 (0x147097070) ---

// --- Function: sub_14709EBB0 (0x14709EBB0) ---
unsigned __int64 __fastcall sub_14709EBB0(__int64 a1, __int64 a2, __int64 a3)
{
  int v3; // ebx
  int v7; // edx
  signed __int64 v8; // rax
  int i; // eax
  int v10; // eax
  __int64 v11; // rax
  signed __int64 n0x200000; // rax
  __int64 v13; // r9
  unsigned __int64 result; // rax
  __int64 v15; // r8
  __int128 v16; // [rsp+30h] [rbp-48h] BYREF
  __int64 v17; // [rsp+40h] [rbp-38h]
  int v18; // [rsp+80h] [rbp+8h] BYREF

  v3 = 0;
  v16 = 0;
  v17 = 0;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v7 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v7 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        a1 + 8,
        v7,
        (unsigned int)"CZoneSystem::SendEnterAreaEventsToListener",
        (unsigned int)"m_GlobalStateLock",
        1);
  }
  v8 = _InterlockedCompareExchange64((volatile signed __int64 *)(a1 + 40), 0x200000, 0);
  if ( v8 )
    sub_1403DE750(
      a1 + 40,
      v8,
      0,
      (unsigned int)"CZoneSystem::SendEnterAreaEventsToListener",
      (__int64)"m_CullingLock[nTypeIndex]",
      1);
  for ( i = *(_DWORD *)(a1 + 10485984); i; i = *(_DWORD *)(a1 + 10485984) )
  {
    v18 = i;
    qword_1499F5468(a1 + 10485984, &v18, 4, 0xFFFFFFFFLL);
  }
  v10 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1904LL))(a2);
  v11 = sub_1470657C0(a1, v10);
  sub_147082DB0(v11, a2, &v16);
  if ( a1 != -40 )
  {
    n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)(a1 + 40), 0, 0x200000);
    if ( n0x200000 != 0x200000 )
      sub_1403DEBA0(a1 + 40, n0x200000);
  }
  sub_1402D42F0(a1 + 8);
  v13 = v16;
  result = (unsigned __int64)((unsigned __int128)((__int64)(*((_QWORD *)&v16 + 1) - v16) * (__int128)0x4924924924924925LL) >> 64) >> 63;
  if ( (*((_QWORD *)&v16 + 1) - (_QWORD)v16) / 56LL )
  {
    v15 = 0;
    do
    {
      (*(void (__fastcall **)(__int64, __int64))(*(_QWORD *)a3 + 752LL))(a3, v13 + 56 * v15);
      ++v3;
      v13 = v16;
      v15 = v3;
      result = 0x4924924924924925LL * (*((_QWORD *)&v16 + 1) - v16);
    }
    while ( v3 < (unsigned __int64)((*((_QWORD *)&v16 + 1) - (_QWORD)v16) / 56LL) );
  }
  if ( v13 )
    return sub_1403A4F10(&v16, v13, 56 * ((v17 - v13) / 56));
  return result;
}

// --- End Function: sub_14709EBB0 (0x14709EBB0) ---

// --- Function: sub_14709EDB0 (0x14709EDB0) ---
unsigned __int64 __fastcall sub_14709EDB0(__int64 a1, __int64 a2, __int64 a3)
{
  int v3; // ebx
  int v7; // edx
  signed __int64 v8; // rax
  int i; // eax
  int v10; // eax
  __int64 v11; // rax
  signed __int64 n0x200000; // rax
  __int64 v13; // r9
  unsigned __int64 result; // rax
  __int64 v15; // r8
  __int128 v16; // [rsp+30h] [rbp-48h] BYREF
  __int64 v17; // [rsp+40h] [rbp-38h]
  int v18; // [rsp+80h] [rbp+8h] BYREF

  v3 = 0;
  v16 = 0;
  v17 = 0;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v7 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v7 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        a1 + 8,
        v7,
        (unsigned int)"CZoneSystem::SendLeaveAreaEventsToListener",
        (unsigned int)"m_GlobalStateLock",
        1);
  }
  v8 = _InterlockedCompareExchange64((volatile signed __int64 *)(a1 + 40), 0x200000, 0);
  if ( v8 )
    sub_1403DE750(
      a1 + 40,
      v8,
      0,
      (unsigned int)"CZoneSystem::SendLeaveAreaEventsToListener",
      (__int64)"m_CullingLock[nTypeIndex]",
      1);
  for ( i = *(_DWORD *)(a1 + 10485984); i; i = *(_DWORD *)(a1 + 10485984) )
  {
    v18 = i;
    qword_1499F5468(a1 + 10485984, &v18, 4, 0xFFFFFFFFLL);
  }
  v10 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)a2 + 1904LL))(a2);
  v11 = sub_1470657C0(a1, v10);
  sub_147082F30(v11, a2, &v16);
  if ( a1 != -40 )
  {
    n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)(a1 + 40), 0, 0x200000);
    if ( n0x200000 != 0x200000 )
      sub_1403DEBA0(a1 + 40, n0x200000);
  }
  sub_1402D42F0(a1 + 8);
  v13 = v16;
  result = (unsigned __int64)((unsigned __int128)((__int64)(*((_QWORD *)&v16 + 1) - v16) * (__int128)0x4924924924924925LL) >> 64) >> 63;
  if ( (*((_QWORD *)&v16 + 1) - (_QWORD)v16) / 56LL )
  {
    v15 = 0;
    do
    {
      (*(void (__fastcall **)(__int64, __int64))(*(_QWORD *)a3 + 752LL))(a3, v13 + 56 * v15);
      ++v3;
      v13 = v16;
      v15 = v3;
      result = 0x4924924924924925LL * (*((_QWORD *)&v16 + 1) - v16);
    }
    while ( v3 < (unsigned __int64)((*((_QWORD *)&v16 + 1) - (_QWORD)v16) / 56LL) );
  }
  if ( v13 )
    return sub_1403A4F10(&v16, v13, 56 * ((v17 - v13) / 56));
  return result;
}

// --- End Function: sub_14709EDB0 (0x14709EDB0) ---

// --- Function: sub_1470A1280 (0x1470A1280) ---
__int64 __fastcall sub_1470A1280(__int64 a1, __int64 a2, __int64 a3, __int64 *a4, __int64 a5)
{
  __int64 v6; // r15
  unsigned __int64 v8; // r14
  __int16 v9; // bx
  __int64 v10; // rcx
  int v11; // edx
  int v12; // eax
  __int64 v13; // rdx
  __int64 v14; // rbx
  volatile signed __int64 *v15; // rcx
  signed __int64 v16; // rax
  __int64 v17; // rdi
  int v18; // ebx
  signed __int64 v19; // rax
  unsigned __int64 v20; // r12
  char v21; // di
  char v22; // si
  bool v23; // r14
  int v24; // eax
  __int64 v25; // rbx
  __int64 v26; // r9
  char v27; // al
  char v28; // bl
  int v29; // eax
  unsigned __int64 v30; // rdi
  __int64 *v31; // rsi
  int v32; // eax
  __int64 v33; // rax
  unsigned __int64 v34; // rbx
  int v35; // eax
  __int64 *v36; // rdi
  int v37; // r8d
  __int64 v38; // rdx
  int v39; // eax
  int v40; // r8d
  __int64 v41; // rdx
  __int64 v42; // rsi
  __int64 v43; // rdi
  unsigned __int64 v44; // r14
  __int64 v45; // rsi
  __int64 v46; // rbx
  __int64 v47; // r12
  __int64 v48; // r14
  _DWORD *v49; // rbx
  __int64 v50; // rcx
  signed __int32 v51; // esi
  signed __int32 v52; // eax
  _DWORD *v53; // r15
  __int64 v54; // r14
  int v55; // esi
  __int64 v56; // rbx
  signed __int32 v57; // eax
  int v58; // r14d
  __int64 v59; // rcx
  int v60; // esi
  _DWORD *v61; // r14
  unsigned __int32 v62; // esi
  _DWORD *v63; // rbx
  unsigned __int32 v64; // r14d
  volatile signed __int64 *v65; // rcx
  __int64 v66; // rbx
  int v67; // eax
  signed __int64 n0x200000; // rax
  signed __int64 n0x200000_1; // rax
  __int64 result; // rax
  char v71; // [rsp+40h] [rbp-C0h]
  _BYTE v72[4]; // [rsp+44h] [rbp-BCh] BYREF
  unsigned __int64 v73; // [rsp+48h] [rbp-B8h]
  _BYTE v74[4]; // [rsp+50h] [rbp-B0h] BYREF
  _BYTE v75[4]; // [rsp+54h] [rbp-ACh] BYREF
  __int64 v76; // [rsp+58h] [rbp-A8h]
  __int64 *v77; // [rsp+60h] [rbp-A0h]
  _BYTE v78[4]; // [rsp+68h] [rbp-98h] BYREF
  int v79; // [rsp+6Ch] [rbp-94h] BYREF
  __int64 v80; // [rsp+70h] [rbp-90h]
  unsigned __int64 v81; // [rsp+78h] [rbp-88h]
  __int64 v82; // [rsp+80h] [rbp-80h]
  __int128 v83; // [rsp+88h] [rbp-78h] BYREF
  __int64 v84; // [rsp+98h] [rbp-68h]
  __m256 v85; // [rsp+A0h] [rbp-60h]
  int n2816; // [rsp+C0h] [rbp-40h] BYREF
  __int64 v87; // [rsp+C4h] [rbp-3Ch]
  int v88; // [rsp+CCh] [rbp-34h]
  __int64 v89; // [rsp+D0h] [rbp-30h]
  unsigned __int64 v90; // [rsp+D8h] [rbp-28h]
  __int64 v91; // [rsp+E0h] [rbp-20h]
  __int64 v92; // [rsp+E8h] [rbp-18h]
  __m256 v93; // [rsp+110h] [rbp+10h] BYREF
  __m256 v94; // [rsp+130h] [rbp+30h] BYREF
  __int64 v96; // [rsp+198h] [rbp+98h] BYREF
  __int64 *v97; // [rsp+1A8h] [rbp+A8h]

  v97 = a4;
  v96 = a2;
  v6 = a2;
  v8 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v84 = 0;
  v73 = v8;
  v83 = 0;
  v9 = *(_WORD *)(v8 + 8);
  if ( a4 )
  {
    v77 = a4;
  }
  else
  {
    v10 = *(_QWORD *)(sub_1402C8360(a1) + 16);
    v77 = (__int64 *)&v83;
    *(_BYTE *)(v10 + (v9 & 0xF) + 41) = 1;
  }
  v82 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v71 = *(_BYTE *)(v82 + 2544);
  if ( !v71 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(2544) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v11 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v11 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v11, (unsigned int)"CZoneSystem::SetTags", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v12 = *(_DWORD *)(v8 + 16);
  if ( v12 == -1 )
  {
    v80 = 0;
    goto LABEL_16;
  }
  if ( (_WORD)v12 )
  {
    v13 = (unsigned __int16)v12;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v12 + 6) != HIWORD(v12) )
    {
      v80 = 0;
      goto LABEL_16;
    }
  }
  else
  {
    v13 = 0;
  }
  v80 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v13) & 0xFFFFFFFFFFFFLL;
LABEL_16:
  v14 = *(_WORD *)(v8 + 8) & 0xF;
  v76 = v14;
  v15 = (volatile signed __int64 *)(a1 + 24 + 8 * v14);
  v16 = _InterlockedCompareExchange64(v15, 0x200000, 0);
  if ( v16 )
    sub_1403DE750(
      (_DWORD)v15,
      v16,
      0,
      (unsigned int)&p_p_p_p_p_p_p_p_p_p_p_p_Source,
      (__int64)&p_p_p_p_p_p_p_p_p_p_p_p_Source,
      1);
  v17 = a5;
  if ( a5 )
  {
    v18 = *(_DWORD *)(sub_1402C8360(v15) + 24);
    if ( *(_DWORD *)(v17 + 8) == v18 )
    {
      ++*(_DWORD *)(v17 + 12);
    }
    else
    {
      v19 = _InterlockedCompareExchange64((volatile signed __int64 *)v17, 0x200000, 0);
      if ( v19 )
        sub_1403DE750(
          v17,
          v19,
          0,
          (unsigned int)&p_p_p_p_p_p_p_p_p_p_p_p_Source,
          (__int64)&p_p_p_p_p_p_p_p_p_p_p_p_Source,
          1);
      *(_DWORD *)(v17 + 8) = v18;
    }
    v14 = v76;
  }
  v81 = v8 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v8 + 8) & 0xF) + a1 + 10560360) + 48LL;
  v20 = v81;
  sub_140361520(v78, v81);
  v21 = sub_1403A5D40(qword_15146BC68 + 10560592, v20);
  v22 = sub_1403A5D40(qword_15146BC68 + 10560592, a3);
  v23 = *(_BYTE *)(v8 + 40) && (*(_WORD *)(v8 + 8) & 0x2000) != 0 && (v21 || v22);
  v24 = *(_DWORD *)(a1 + 4 * v14 + 10485976);
  if ( v24 )
  {
    v25 = a1 + 4 * (v14 + 2621494);
    do
    {
      v79 = v24;
      qword_1499F5468(v25, &v79, 4, 0xFFFFFFFFLL);
      v24 = *(_DWORD *)(a1 + 4 * v76 + 10485976);
    }
    while ( v24 );
    v6 = v96;
    v20 = v81;
  }
  if ( !v23 )
  {
    sub_14037B530(v20, a3);
    goto LABEL_57;
  }
  sub_147094EE0(a1, v6, v77, 1);
  sub_14037B530(v20, a3);
  LOBYTE(v26) = 1;
  sub_14708C540(a1, v6, v77, v26);
  if ( (*(_BYTE *)(v73 + 12) & 8) == 0 )
    goto LABEL_57;
  if ( !v21 && v22 == 1 )
  {
    v27 = 1;
    v28 = 0;
    goto LABEL_45;
  }
  v27 = 0;
  if ( v21 == 1 && !v22 )
  {
    v28 = 1;
LABEL_45:
    if ( v27 )
    {
      v29 = sub_1470656A0(a1, v6);
      v30 = v73;
      v31 = v77;
      sub_1470A9980(v29, *(_QWORD *)v73, *(unsigned __int16 *)(v73 + 8), v20, (__int64)v77);
    }
    else
    {
      v30 = v73;
      v31 = v77;
    }
    if ( v28 )
    {
      v32 = sub_1470656A0(a1, v6);
      sub_1470A9BA0(v32, *(_QWORD *)v30, *(unsigned __int16 *)(v30 + 8), v20, (__int64)v31);
    }
    goto LABEL_57;
  }
  v28 = 0;
  if ( v21 != 1 || v22 != 1 )
    goto LABEL_45;
  sub_140361940(v75);
  sub_140361940(v74);
  sub_140361940(v72);
  sub_140361940(&v96);
  sub_14709EFB0((unsigned int)v78, a3, (unsigned int)v75, (unsigned int)v74, (__int64)v72, (__int64)&v96);
  v33 = sub_1403B91C0(v72);
  v34 = v73;
  if ( v33 )
  {
    LOWORD(v85.m256_f32[6]) = *(_WORD *)(v73 + 8);
    *(_QWORD *)&v85.m256_f32[4] = *(_QWORD *)v73;
    v85.m256_f32[0] = 0.0;
    v35 = sub_1470656A0(a1, v6);
    v36 = v77;
    v37 = *(unsigned __int16 *)(v34 + 8);
    v38 = *(_QWORD *)v34;
    v93 = v85;
    __asm { vzeroupper }
    sub_1470A9D70(v35, v38, v37, (unsigned int)&v93, (__int64)v75, (__int64)v72, (__int64)v77);
  }
  else
  {
    v36 = v77;
  }
  if ( sub_1403B91C0(&v96) )
  {
    LOWORD(v85.m256_f32[6]) = *(_WORD *)(v34 + 8);
    *(_QWORD *)&v85.m256_f32[4] = *(_QWORD *)v34;
    LODWORD(v85.m256_f32[0]) = 1;
    v39 = sub_1470656A0(a1, v6);
    v40 = *(unsigned __int16 *)(v34 + 8);
    v41 = *(_QWORD *)v34;
    v94 = v85;
    __asm { vzeroupper }
    sub_1470A9D70(v39, v41, v40, (unsigned int)&v94, (__int64)v74, (__int64)&v96, (__int64)v36);
  }
  sub_140374510(&v96);
  sub_140374510(v72);
  sub_140374510(v74);
  sub_140374510(v75);
LABEL_57:
  v42 = v82 + 2720;
  v43 = sub_1403E4B00(v82 + 2720);
  if ( !v43 )
    v43 = allocWithProfilerInfo(0x28u, 0);
  *(_QWORD *)v43 = 0;
  *(_QWORD *)(v43 + 8) = 0;
  *(_QWORD *)(v43 + 16) = 0;
  *(_BYTE *)(v43 + 24) = 10;
  sub_140361940(v43 + 32);
  v44 = v73;
  *(_QWORD *)(v43 + 8) = v73;
  *(_QWORD *)(v43 + 16) = v42;
  sub_14037B530(v43 + 32, a3);
  n2816 = 2816;
  v87 = 0;
  v88 = 0;
  v90 = 0;
  v91 = 0;
  v92 = 0;
  v89 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v45 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v46 = *(_QWORD *)v43;
      sub_14704B550(v45, v43);
      v43 = v46;
    }
    while ( v46 );
    v90 = __rdtsc();
    qword_149A05E08(&n2816);
    v47 = v76;
    goto LABEL_86;
  }
  v47 = v76;
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v76 + 10485976));
  v48 = v80;
  v49 = (_DWORD *)(66224 * v47 + v80 + 1472);
  _m_prefetchw(v49 + 1);
  v50 = v49[1] | 1u;
  v51 = _InterlockedOr(v49 + 1, 1u);
  if ( (v51 & 1) == 0 )
  {
LABEL_67:
    *v49 = *(_DWORD *)(sub_1402C8360(v50) + 24);
    v53 = (_DWORD *)(v48 + 66224 * v47 + 1472);
    while ( 1 )
    {
      v54 = qword_15146BC68;
      v55 = 0;
      if ( v43 )
      {
        do
        {
          v56 = *(_QWORD *)v43;
          sub_14704B550(v54, v43);
          ++v55;
          v43 = v56;
        }
        while ( v56 );
      }
      v57 = v53[1];
      v58 = v53[2] & 0x7FFF;
      if ( (unsigned __int16)v57 >> 1 != v58 )
        goto LABEL_78;
      *v53 = -1;
      v59 = v57 & 0xFFFFFFFE;
      if ( v57 != _InterlockedCompareExchange(v53 + 1, v59, v57) )
        break;
      v43 = 0;
LABEL_82:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 4 * v47 + 10485976), -v55) == v55 )
        qword_1499F5478(qword_15146BC68 + 10485976 + 4 * v47);
      if ( !v43 )
        goto LABEL_85;
    }
    *v53 = *(_DWORD *)(sub_1402C8360(v59) + 24);
LABEL_78:
    ++v53[2];
    v63 = &v53[4 * (v58 & 0xFFF) + 4];
    if ( (v63[1] & 0x7FFF) != v58 )
      sub_1470B7790(v53, v63 + 1);
    v43 = *((_QWORD *)v63 + 1);
    v64 = _InterlockedExchange(v63, v58);
    if ( (v64 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v53, v63, v64);
    goto LABEL_82;
  }
  while ( 1 )
  {
    v52 = _InterlockedCompareExchange(v49 + 1, v51 + 2, v51);
    if ( v51 == v52 )
      break;
    if ( (v52 & 1) != 0 )
    {
      v51 = v52;
    }
    else
    {
      _m_prefetchw(v49 + 1);
      v50 = v49[1] | 1u;
      v51 = _InterlockedOr(v49 + 1, 1u);
      if ( (v51 & 1) == 0 )
        goto LABEL_67;
    }
  }
  v60 = (unsigned __int16)v51 >> 1;
  v61 = &v49[4 * (v60 & 0xFFF) + 4];
  if ( (*v61 & 0x7FFF) != (((_WORD)v60 - 4096) & 0x7FFF) )
    sub_1470B7790(v49, &v49[4 * (v60 & 0xFFF) + 4]);
  *((_QWORD *)v61 + 1) = v43;
  v62 = _InterlockedExchange(v61 + 1, v60);
  if ( (v62 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v49, v61 + 1, v62);
LABEL_85:
  v90 = __rdtsc();
  qword_149A05E08(&n2816);
  v44 = v73;
LABEL_86:
  v65 = (volatile signed __int64 *)a5;
  v66 = a1 + 8 * v47;
  if ( a5 )
  {
    v67 = *(_DWORD *)(a5 + 12);
    if ( v67 )
    {
      *(_DWORD *)(a5 + 12) = v67 - 1;
    }
    else
    {
      *(_DWORD *)(a5 + 8) = -1;
      n0x200000 = _InterlockedCompareExchange64(v65, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        sub_1403DEBA0(v65, n0x200000);
    }
  }
  n0x200000_1 = _InterlockedCompareExchange64((volatile signed __int64 *)(v66 + 24), 0, 0x200000);
  if ( n0x200000_1 != 0x200000 )
    sub_1403DEBA0(v66 + 24, n0x200000_1);
  result = sub_140374510(v78);
  if ( !v71 )
    result = sub_1402D42F0(a1 + 8);
  if ( !v97 )
    result = sub_14707E720(a1, *(_WORD *)(v44 + 8), v77);
  if ( (_QWORD)v83 )
    return sub_1403A4F10(&v83, v83, (v84 - v83) & 0xFFFFFFFFFFFFFFE0uLL);
  return result;
}

// --- End Function: sub_1470A1280 (0x1470A1280) ---

// --- Function: sub_1470A5130 (0x1470A5130) ---
__int64 __fastcall sub_1470A5130(__int64 a1, __int64 a2)
{
  __int64 v4; // rcx
  unsigned __int64 v5; // r15
  __int64 v6; // rax
  __int64 v7; // rcx
  int v8; // ebx
  int v9; // ecx
  __int64 v10; // rdi
  __int64 v11; // rdi
  _QWORD *v12; // rsi
  __int64 v13; // rbx
  __int64 v14; // r12
  __int64 v15; // rax
  __int128 v17; // [rsp+30h] [rbp-69h] BYREF
  __int64 v18; // [rsp+40h] [rbp-59h]
  int n2816; // [rsp+50h] [rbp-49h] BYREF
  __int64 v20; // [rsp+54h] [rbp-45h]
  int v21; // [rsp+5Ch] [rbp-3Dh]
  __int64 v22; // [rsp+60h] [rbp-39h]
  unsigned __int64 v23; // [rsp+68h] [rbp-31h]
  __int64 v24; // [rsp+70h] [rbp-29h]
  __int64 v25; // [rsp+78h] [rbp-21h]
  int n3; // [rsp+A0h] [rbp+7h] BYREF
  __int64 v27; // [rsp+A8h] [rbp+Fh]
  __int64 v28; // [rsp+B0h] [rbp+17h]
  unsigned __int64 v29; // [rsp+100h] [rbp+67h]
  char v31; // [rsp+108h] [rbp+6Fh]
  unsigned __int16 v32; // [rsp+110h] [rbp+77h]

  n2816 = 2816;
  v20 = 0;
  v21 = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v22 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v4 = *(unsigned __int8 *)(a2 + 3);
  v5 = *(_QWORD *)(a1 + 72 * v4 + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v4 + 10560336);
  v17 = 0;
  v18 = 0;
  v6 = sub_1402C8360(v4);
  v7 = *(_WORD *)(v5 + 8) & 0xF;
  *(_BYTE *)(*(_QWORD *)(v6 + 16) + v7 + 41) = 1;
  if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(v7) + 24) )
  {
    ++*(_DWORD *)(a1 + 20);
  }
  else
  {
    v8 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
    if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        a1 + 8,
        v8,
        (unsigned int)"CZoneSystem::UnregisterFromExternalSystems",
        (unsigned int)"m_GlobalStateLock",
        1);
  }
  v9 = *(_DWORD *)(v5 + 16);
  if ( v9 != -1 )
  {
    if ( (_WORD)v9 )
    {
      v11 = (unsigned __int16)v9;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v9 + 6) != HIWORD(v9) )
      {
        v10 = 0;
        goto LABEL_12;
      }
    }
    else
    {
      v11 = 0;
    }
    v10 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v11) & 0xFFFFFFFFFFFFLL;
    goto LABEL_12;
  }
  v10 = 0;
LABEL_12:
  v12 = (_QWORD *)(v10 + 400);
  if ( is_valid_handle_typeB((unsigned __int64 *)(v10 + 400)) && is_valid_handle_typeB((unsigned __int64 *)(v10 + 400)) )
    v13 = *v12 & 0xFFFFFFFFFFFFLL;
  else
    v13 = 0;
  v14 = *(_QWORD *)v5;
  v32 = *(_WORD *)(v5 + 8);
  v29 = v5 + *(unsigned __int16 *)(22LL * (v32 & 0xF) + qword_15146BC68 + 10560360) + 48LL;
  sub_147094EE0(a1, a2, (__int64 *)&v17, 0);
  v31 = *(_BYTE *)(v5 + 12);
  if ( (unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, v29) && (v31 & 8) != 0 )
    sub_1470A9BA0(v10, v14, v32, v29, (__int64)&v17);
  if ( v13 && (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v13 + 1712LL))(v13) )
  {
    n3 = 3;
    if ( is_valid_handle_typeB((unsigned __int64 *)(v10 + 400))
      && is_valid_handle_typeB((unsigned __int64 *)(v10 + 400)) )
    {
      v15 = *v12 & 0xFFFFFFFFFFFFLL;
    }
    else
    {
      v15 = 0;
    }
    v27 = v15;
    v28 = v14;
    sub_140431310(&v17, &n3);
  }
  *(_BYTE *)(v5 + 40) = 0;
  sub_1402D42F0(a1 + 8);
  sub_14707E720(a1, *(_WORD *)(v5 + 8), (__int64 *)&v17);
  if ( (_QWORD)v17 )
  {
    sub_1403A4F10(&v17, v17, (v18 - v17) & 0xFFFFFFFFFFFFFFE0uLL);
    v17 = 0;
    v18 = 0;
  }
  v23 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470A5130 (0x1470A5130) ---

// --- Function: sub_1470A5DC0 (0x1470A5DC0) ---
__int64 __fastcall sub_1470A5DC0(__int64 a1)
{
  __int128 v1; // xmm6
  __int64 v3; // rsi
  int v4; // ebx
  signed __int64 v5; // rax
  char *v6; // rcx
  char *v7; // rbx
  _DWORD *v8; // rdi
  int v9; // eax
  int v10; // eax
  signed __int64 n0x200000; // rax
  __m128i v12; // xmm6
  __int64 v13; // r14
  volatile signed __int32 *v14; // rbx
  int v15; // edi
  unsigned __int32 v16; // eax
  __m128i *v17; // rax
  _BYTE *v18; // rcx
  int v19; // eax
  __m128i v20; // rax
  __int64 v21; // r15
  signed __int64 epi64; // r12
  int v23; // ebx
  signed __int64 v24; // rax
  __int64 v25; // rdi
  int v26; // ecx
  __int64 v27; // r9
  __int64 v28; // r9
  _QWORD *v29; // r11
  __m128i v30; // rt0
  __m128i i; // xmm0
  signed __int64 v32; // r10
  __m128i v33; // rt0
  int v34; // eax
  unsigned __int64 n0x1000; // r14
  _BYTE v37[32]; // [rsp+30h] [rbp-88h] BYREF
  __m128i v38; // [rsp+50h] [rbp-68h]
  __m128i v39; // [rsp+60h] [rbp-58h]
  __int128 v40; // [rsp+80h] [rbp-38h]

  v40 = v1;
  v3 = a1 + 8;
  v4 = *(_DWORD *)(sub_1402C8360(a1) + 24);
  if ( *(_DWORD *)(v3 + 8) == v4 )
  {
    ++*(_DWORD *)(v3 + 12);
  }
  else
  {
    v5 = _InterlockedCompareExchange64((volatile signed __int64 *)v3, 0x200000, 0);
    if ( v5 )
      sub_1403DE750(v3, v5, 0, (unsigned int)"CZoneSystem::Update", (__int64)"m_GlobalStateLock", 1);
    *(_DWORD *)(v3 + 8) = v4;
  }
  sub_1470B7660(a1);
  v6 = *(char **)(a1 + 10486072);
  v7 = *(char **)(a1 + 10486064);
  if ( v7 != v6 )
  {
    v8 = v7 + 128;
    do
    {
      v9 = *(v8 - 3);
      if ( v9 && v9 + 4 < dword_149A0A48C )
      {
        memmove(v7, v8, v6 - (char *)v8);
        *(_QWORD *)(a1 + 10486072) -= 128LL;
        v6 = *(char **)(a1 + 10486072);
      }
      else
      {
        v7 += 128;
        v8 += 32;
      }
    }
    while ( v7 != v6 );
  }
  if ( v3 )
  {
    v10 = *(_DWORD *)(v3 + 12);
    if ( v10 )
    {
      *(_DWORD *)(v3 + 12) = v10 - 1;
    }
    else
    {
      *(_DWORD *)(v3 + 8) = -1;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v3, 0, 0x200000);
      if ( n0x200000 != 0x200000 )
        sub_1403DEBA0(v3, n0x200000);
    }
  }
  v12 = 0;
  v13 = 0;
  v14 = (volatile signed __int32 *)(a1 + 10560552);
  v15 = *(_DWORD *)(sub_1402C8360(v6) + 24);
  if ( *(_DWORD *)(a1 + 10560556) == v15 )
  {
    ++*(_DWORD *)(a1 + 10560560);
  }
  else
  {
    v16 = _InterlockedCompareExchange(v14, 1, 0);
    if ( v16 )
      sub_1403C51B0(a1 + 10560552, v16, "CZoneSystem::Update", 1);
    *(_DWORD *)(a1 + 10560556) = v15;
  }
  v17 = (__m128i *)(a1 + 10560568);
  v18 = v37;
  if ( v37 != (_BYTE *)(a1 + 10560568) )
  {
    v12 = *v17;
    v13 = *(_QWORD *)(a1 + 10560584);
    v17->m128i_i64[0] = 0;
    *(_QWORD *)(a1 + 10560576) = 0;
    *(_QWORD *)(a1 + 10560584) = 0;
  }
  v19 = *(_DWORD *)(a1 + 10560560);
  if ( v19 )
  {
    v20.m128i_i64[0] = (unsigned int)(v19 - 1);
    *(_DWORD *)(a1 + 10560560) = v20.m128i_i32[0];
  }
  else
  {
    *(_DWORD *)(a1 + 10560556) = -1;
    v20.m128i_i64[0] = (unsigned int)_InterlockedCompareExchange(v14, 0, 1);
    if ( v20.m128i_i32[0] != 1 )
      v20.m128i_i64[0] = sub_1403DCC00(a1 + 10560552, v20.m128i_u32[0]);
  }
  v21 = v12.m128i_i64[0];
  epi64 = _mm_extract_epi64(v12, 1);
  if ( v12.m128i_i64[0] != epi64 )
  {
    v23 = *(_DWORD *)(sub_1402C8360(v18) + 24);
    if ( *(_DWORD *)(v3 + 8) == v23 )
    {
      ++*(_DWORD *)(v3 + 12);
    }
    else
    {
      v24 = _InterlockedCompareExchange64((volatile signed __int64 *)v3, 0x200000, 0);
      if ( v24 )
        sub_1403DE750(v3, v24, 0, (unsigned int)"CZoneSystem::Update", (__int64)"m_GlobalStateLock", 1);
      *(_DWORD *)(v3 + 8) = v23;
    }
    v20.m128i_i64[0] = sub_1470B7660(a1);
    v25 = v12.m128i_i64[0];
    while ( 1 )
    {
      v26 = *(_DWORD *)v25;
      if ( *(_DWORD *)v25 != -1 )
      {
        if ( !(_WORD)v26 )
        {
          v27 = 0;
LABEL_41:
          v20.m128i_i64[0] = *(_QWORD *)(a1 + 10486016);
          v28 = *(_QWORD *)(v20.m128i_i64[0] + 8 * v27) & 0xFFFFFFFFFFFFLL;
          if ( v28 )
          {
            v29 = (_QWORD *)(*(_QWORD *)(v25 + 8) + 8LL);
            v38 = 0u;
            v30 = 0u;
            _InterlockedCompareExchange128((volatile signed __int64 *)(v28 + 560), 0, 0, v30.m128i_i64);
            v38 = v30;
            for ( i = v30; ; i = v39 )
            {
              if ( v29 == (_QWORD *)i.m128i_i64[0] )
                __debugbreak();
              v32 = _mm_extract_epi64(i, 1);
              *v29 = i.m128i_i64[0];
              v39 = i;
              v33.m128i_i64[0] = i.m128i_i64[0];
              v33.m128i_i64[1] = v32;
              _InterlockedCompareExchange128(
                (volatile signed __int64 *)(v28 + 560),
                v32 + 1,
                (signed __int64)v29,
                v33.m128i_i64);
              v20 = v33;
              v39 = v33;
              if ( *(_OWORD *)&v33 == __PAIR128__(v32, i.m128i_u64[0]) )
                break;
            }
            _InterlockedIncrement((volatile signed __int32 *)(v28 + 580));
          }
          goto LABEL_48;
        }
        v20.m128i_i64[0] = *(_QWORD *)(a1 + 10486016);
        v27 = (unsigned __int16)v26;
        if ( *(_WORD *)(v20.m128i_i64[0] + 8LL * (unsigned __int16)v26 + 6) == HIWORD(v26) )
          goto LABEL_41;
      }
LABEL_48:
      v25 += 16;
      if ( v25 == epi64 )
      {
        if ( v3 )
        {
          v34 = *(_DWORD *)(v3 + 12);
          if ( v34 )
          {
            v20.m128i_i64[0] = (unsigned int)(v34 - 1);
            *(_DWORD *)(v3 + 12) = v20.m128i_i32[0];
          }
          else
          {
            *(_DWORD *)(v3 + 8) = -1;
            v20.m128i_i64[0] = _InterlockedCompareExchange64((volatile signed __int64 *)v3, 0, 0x200000);
            if ( v20.m128i_i64[0] != 0x200000 )
              v20.m128i_i64[0] = sub_1403DEBA0(v3, v20.m128i_i64[0]);
          }
        }
        break;
      }
    }
  }
  if ( v12.m128i_i64[0] )
  {
    n0x1000 = (v13 - v12.m128i_i64[0]) & 0xFFFFFFFFFFFFFFF0uLL;
    if ( n0x1000 >= 0x1000 )
    {
      v21 = *(_QWORD *)(v12.m128i_i64[0] - 8);
      n0x1000 += 39LL;
      if ( (unsigned __int64)(v12.m128i_i64[0] - v21 - 8) > 0x1F )
        invalid_parameter_noinfo_noreturn();
    }
    v20.m128i_i64[0] = sub_1402A63C0(v21, n0x1000);
  }
  return v20.m128i_i64[0];
}

// --- End Function: sub_1470A5DC0 (0x1470A5DC0) ---

// --- Function: sub_1470A6690 (0x1470A6690) ---
__int64 __fastcall sub_1470A6690(__int64 a1, __int64 a2, unsigned __int8 a3, __int64 *a4)
{
  __int64 *v4; // r12
  __int64 v8; // rcx
  __int64 v9; // rax
  __int64 v10; // r13
  _QWORD *v11; // r13
  _QWORD *ThreadLocalStoragePointer; // rax
  char v13; // al
  int v14; // edx
  unsigned __int8 v15; // di
  int v16; // ecx
  __int64 v17; // rsi
  __int64 v18; // rsi
  __int64 v19; // r14
  char v20; // bl
  char v21; // di
  char v22; // r14
  char v23; // r15
  __int64 v24; // rcx
  int *v25; // rdi
  int v26; // edx
  __int64 v27; // r8
  __int64 v28; // rbx
  __int64 v29; // rax
  int v30; // eax
  char *v32; // [rsp+30h] [rbp-99h]
  unsigned __int16 v33; // [rsp+38h] [rbp-91h]
  __int64 v34; // [rsp+40h] [rbp-89h]
  __int128 v35; // [rsp+48h] [rbp-81h] BYREF
  __int64 v36; // [rsp+58h] [rbp-71h]
  _QWORD *v37; // [rsp+60h] [rbp-69h]
  int n2816; // [rsp+70h] [rbp-59h] BYREF
  __int64 v39; // [rsp+74h] [rbp-55h]
  int v40; // [rsp+7Ch] [rbp-4Dh]
  __int64 v41; // [rsp+80h] [rbp-49h]
  unsigned __int64 v42; // [rsp+88h] [rbp-41h]
  __int64 v43; // [rsp+90h] [rbp-39h]
  __int64 v44; // [rsp+98h] [rbp-31h]
  int v45; // [rsp+C0h] [rbp-9h] BYREF
  __int64 v46; // [rsp+C8h] [rbp-1h]
  __int64 v47; // [rsp+D0h] [rbp+7h]
  unsigned __int16 v48; // [rsp+D8h] [rbp+Fh]
  char v50; // [rsp+138h] [rbp+6Fh]
  int *v51; // [rsp+138h] [rbp+6Fh]
  char v52; // [rsp+140h] [rbp+77h]

  n2816 = 2816;
  v4 = a4;
  v39 = 0;
  v40 = 0;
  v42 = 0;
  v43 = 0;
  v44 = 0;
  v41 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v8 = *(unsigned __int8 *)(a2 + 3);
  v9 = *(_DWORD *)a2 & 0xFFFFFF;
  v36 = 0;
  v10 = v9 * *(unsigned __int16 *)(a1 + 2 * v8 + 10560336);
  v35 = 0;
  v11 = (_QWORD *)(*(_QWORD *)(a1 + 72 * v8 + 10559896) + v10);
  ThreadLocalStoragePointer = NtCurrentTeb()->ThreadLocalStoragePointer;
  v37 = v11;
  v13 = *(_BYTE *)(ThreadLocalStoragePointer[TlsIndex] + 2544LL);
  v52 = v13;
  if ( !v13 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v14 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v14 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v14, (unsigned int)"CZoneSystem::UpdateAreaFlags", (unsigned int)"m_GlobalStateLock", 1);
    }
    v13 = 0;
  }
  v15 = *((_BYTE *)v11 + 12);
  if ( v15 != a3 && *((_BYTE *)v11 + 40) )
  {
    v16 = *((_DWORD *)v11 + 4);
    if ( v16 == -1 )
    {
      v17 = 0;
      goto LABEL_16;
    }
    if ( (_WORD)v16 )
    {
      v18 = (unsigned __int16)v16;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v16 + 6) != HIWORD(v16) )
      {
        v17 = 0;
        goto LABEL_16;
      }
    }
    else
    {
      v18 = 0;
    }
    v17 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v18) & 0xFFFFFFFFFFFFLL;
LABEL_16:
    v34 = *v11;
    v33 = *((_WORD *)v11 + 4);
    v19 = v33 & 0xF;
    v32 = (char *)v11 + *(unsigned __int16 *)(22 * v19 + qword_15146BC68 + 10560360) + 48;
    if ( !v4 )
    {
      v4 = (__int64 *)&v35;
      *(_BYTE *)(*(_QWORD *)(sub_1402C8360(22 * v19) + 16) + v19 + 41) = 1;
    }
    *((_BYTE *)v11 + 12) = a3 & 0xF7;
    if ( ((a3 ^ v15) & 7) != 0 )
    {
      sub_147094EE0(a1, a2, v4, 0);
      sub_14708C540(a1, a2, v4, 0);
    }
    *((_BYTE *)v11 + 12) = a3;
    v20 = (a3 & 8) != 0;
    v21 = (v15 & 8) != 0;
    if ( *((_WORD *)v11 + 4) == 30770 )
      v50 = (*(__int64 (__fastcall **)(_QWORD))(*(_QWORD *)*v11 + 792LL))(*v11);
    else
      v50 = 0;
    if ( !(unsigned __int8)sub_1403A5D40(qword_15146BC68 + 10560592, v32) || v21 == v20 )
    {
LABEL_55:
      if ( !v52 )
        sub_1402D42F0(a1 + 8);
      if ( !a4 && v4 )
        sub_14707E720(a1, *((_WORD *)v11 + 4), v4);
      goto LABEL_62;
    }
    if ( v21 || !v20 )
    {
      v22 = 0;
      if ( v21 && !v20 )
      {
        v23 = 1;
LABEL_29:
        if ( !v50 )
        {
          v24 = *(unsigned __int16 *)(22LL * (v11[1] & 0xF) + a1 + 10560362);
          v25 = *(int **)((char *)v11 + v24 + 48);
          v51 = *(int **)((char *)v11 + v24 + 56);
          if ( v25 != v51 )
          {
            while ( 1 )
            {
              v26 = *v25;
              if ( !(unsigned __int16)*v25 )
                break;
              v27 = (unsigned __int16)v26;
              if ( *(_WORD *)(2896LL * (unsigned __int16)v26 + *(_QWORD *)(v17 + 480) + 2848) == HIWORD(v26) )
                goto LABEL_38;
              v28 = 0;
LABEL_39:
              if ( (!v22
                 || (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v28 + 2824) + 1864LL))(
                      *(_QWORD *)(v28 + 2824),
                      0))
                && (!v23
                 || (*(unsigned __int8 (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v28 + 2824) + 1872LL))(
                      *(_QWORD *)(v28 + 2824),
                      0)) )
              {
                v29 = (*(__int64 (__fastcall **)(_QWORD))(**(_QWORD **)(v28 + 2824) + 1640LL))(*(_QWORD *)(v28 + 2824));
                if ( (unsigned __int8)sub_147048430(v32, v29) )
                {
                  v46 = *(_QWORD *)(v28 + 2824);
                  v47 = v34;
                  v48 = v33;
                  v30 = v45;
                  if ( v22 )
                    v30 = 0;
                  if ( v23 )
                    v30 = 1;
                  v45 = v30;
                  sub_140431310(v4, &v45);
                }
              }
              if ( ++v25 == v51 )
              {
                v11 = v37;
                goto LABEL_51;
              }
            }
            v27 = 0;
LABEL_38:
            v28 = *(_QWORD *)(v17 + 480) + 2896 * v27;
            goto LABEL_39;
          }
        }
LABEL_51:
        if ( v22 )
          sub_1470A9980(v17, v34, v33, (_DWORD)v32, (__int64)v4);
        if ( v23 )
          sub_1470A9BA0(v17, v34, v33, (_DWORD)v32, (__int64)v4);
        goto LABEL_55;
      }
    }
    else
    {
      v22 = 1;
    }
    v23 = 0;
    goto LABEL_29;
  }
  if ( !v13 )
    sub_1402D42F0(a1 + 8);
LABEL_62:
  if ( (_QWORD)v35 )
  {
    sub_1403A4F10(&v35, v35, (v36 - v35) & 0xFFFFFFFFFFFFFFE0uLL);
    v35 = 0;
    v36 = 0;
  }
  v42 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470A6690 (0x1470A6690) ---

// --- Function: sub_1470A8F80 (0x1470A8F80) ---
__int64 __fastcall sub_1470A8F80(__int64 a1, __int64 a2, __int64 a3)
{
  __int64 v3; // r13
  __int64 v7; // rbp
  int v8; // edx
  unsigned __int64 v9; // rbx
  int v10; // ecx
  __int64 v11; // r12
  __int64 v12; // rdx
  __int64 v13; // rbp
  __int64 v14; // rsi
  __int64 v15; // rbp
  volatile signed __int64 *v16; // r14
  int v17; // edx
  __int64 v18; // rdi
  __int64 v19; // rbx
  __int64 result; // rax
  __int64 v21; // r13
  _DWORD *v22; // rbx
  __int64 v23; // rcx
  signed __int32 v24; // edi
  signed __int32 v25; // eax
  _DWORD *v26; // r14
  __int64 v27; // rbp
  int v28; // edi
  __int64 v29; // rbx
  signed __int32 v30; // eax
  int v31; // ebp
  __int64 v32; // rcx
  int v33; // edi
  _DWORD *v34; // r14
  unsigned __int32 v35; // edi
  _DWORD *v36; // rbx
  unsigned __int32 v37; // ebp
  signed __int64 v38; // rdx
  int n2816; // [rsp+30h] [rbp-98h] BYREF
  __int64 v40; // [rsp+34h] [rbp-94h]
  int v41; // [rsp+3Ch] [rbp-8Ch]
  __int64 v42; // [rsp+40h] [rbp-88h]
  unsigned __int64 v43; // [rsp+48h] [rbp-80h]
  __int64 v44; // [rsp+50h] [rbp-78h]
  __int64 v45; // [rsp+58h] [rbp-70h]
  char v46; // [rsp+D0h] [rbp+8h]
  __int64 v47; // [rsp+E0h] [rbp+18h]
  volatile signed __int64 *v48; // [rsp+E8h] [rbp+20h]

  v3 = a1 + 8;
  v47 = a1 + 8;
  v7 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v46 = *(_BYTE *)(v7 + 2544);
  if ( !v46 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v3 + 12);
    }
    else
    {
      v8 = _InterlockedIncrement64((volatile signed __int64 *)v3);
      if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
        sub_1403CD0A0(v3, v8, (unsigned int)"CZoneSystem::UpdateForeignData", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v9 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v10 = *(_DWORD *)(v9 + 16);
  if ( v10 == -1 )
  {
    v11 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v10 )
  {
    v12 = (unsigned __int16)v10;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
    {
      v11 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v12 = 0;
  }
  v11 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  v13 = v7 + 2656;
  *(_QWORD *)(*(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560356) + v9 + 48) = a3;
  v14 = sub_1403E4B00(v13);
  if ( !v14 )
    v14 = allocWithProfilerInfo(0x28u, 0);
  *(_QWORD *)(v14 + 32) = a3;
  *(_QWORD *)(v14 + 16) = v13;
  *(_QWORD *)v14 = 0;
  *(_BYTE *)(v14 + 24) = 6;
  *(_QWORD *)(v14 + 8) = v9;
  v15 = *(_WORD *)(v9 + 8) & 0xF;
  v16 = (volatile signed __int64 *)(a1 + 24 + 8 * v15);
  v48 = v16;
  v17 = _InterlockedIncrement64(v16);
  if ( (*(_QWORD *)&v17 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      a1 + 24 + 8 * v15,
      v17,
      (unsigned int)"CZoneSystem::UpdateForeignData",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  n2816 = 2816;
  v40 = 0;
  v41 = 0;
  v43 = 0;
  v44 = 0;
  v45 = 0;
  v42 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v18 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v19 = *(_QWORD *)v14;
      sub_14704B550(v18, v14);
      v14 = v19;
    }
    while ( v19 );
    v43 = __rdtsc();
    result = qword_149A05E08(&n2816);
    goto LABEL_44;
  }
  v21 = 4 * v15 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + v21));
  v22 = (_DWORD *)(v11 + 66224 * v15 + 1472);
  _m_prefetchw(v22 + 1);
  v23 = v22[1] | 1u;
  v24 = _InterlockedOr(v22 + 1, 1u);
  if ( (v24 & 1) == 0 )
  {
LABEL_25:
    *v22 = *(_DWORD *)(sub_1402C8360(v23) + 24);
    v26 = (_DWORD *)(v11 + 66224 * v15 + 1472);
    while ( 1 )
    {
      v27 = qword_15146BC68;
      v28 = 0;
      if ( v14 )
      {
        do
        {
          v29 = *(_QWORD *)v14;
          sub_14704B550(v27, v14);
          ++v28;
          v14 = v29;
        }
        while ( v29 );
      }
      v30 = v26[1];
      v31 = v26[2] & 0x7FFF;
      if ( (unsigned __int16)v30 >> 1 != v31 )
        goto LABEL_36;
      *v26 = -1;
      v32 = v30 & 0xFFFFFFFE;
      if ( v30 != _InterlockedCompareExchange(v26 + 1, v32, v30) )
        break;
      v14 = 0;
LABEL_40:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v21), -v28) == v28 )
        qword_1499F5478(v21 + qword_15146BC68);
      if ( !v14 )
        goto LABEL_43;
    }
    *v26 = *(_DWORD *)(sub_1402C8360(v32) + 24);
LABEL_36:
    ++v26[2];
    v36 = &v26[4 * (v31 & 0xFFF) + 4];
    if ( (v36[1] & 0x7FFF) != v31 )
      sub_1470B7790(v26, v36 + 1);
    v14 = *((_QWORD *)v36 + 1);
    v37 = _InterlockedExchange(v36, v31);
    if ( (v37 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v26, v36, v37);
    goto LABEL_40;
  }
  while ( 1 )
  {
    v25 = _InterlockedCompareExchange(v22 + 1, v24 + 2, v24);
    if ( v24 == v25 )
      break;
    if ( (v25 & 1) != 0 )
    {
      v24 = v25;
    }
    else
    {
      _m_prefetchw(v22 + 1);
      v23 = v22[1] | 1u;
      v24 = _InterlockedOr(v22 + 1, 1u);
      if ( (v24 & 1) == 0 )
        goto LABEL_25;
    }
  }
  v33 = (unsigned __int16)v24 >> 1;
  v34 = &v22[4 * (v33 & 0xFFF) + 4];
  if ( (*v34 & 0x7FFF) != (((_WORD)v33 - 4096) & 0x7FFF) )
    sub_1470B7790(v22, &v22[4 * (v33 & 0xFFF) + 4]);
  *((_QWORD *)v34 + 1) = v14;
  v35 = _InterlockedExchange(v34 + 1, v33);
  if ( (v35 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v22, v34 + 1, v35);
LABEL_43:
  v43 = __rdtsc();
  result = qword_149A05E08(&n2816);
  v16 = v48;
  v3 = v47;
LABEL_44:
  v38 = _InterlockedDecrement64(v16);
  if ( (v38 & 0x3FF) == 0 )
  {
    result = 0xFFFF0000FFC00000uLL;
    if ( (v38 & 0xFFFF0000FFC00000uLL) != 0 )
      result = sub_1403CD3A0(v16);
  }
  if ( !v46 )
    return sub_1402D42F0(v3);
  return result;
}

// --- End Function: sub_1470A8F80 (0x1470A8F80) ---

// --- Function: sub_1470A9480 (0x1470A9480) ---
__int64 __fastcall sub_1470A9480(__int64 a1, __int64 a2, int a3)
{
  __int64 v3; // r13
  __int64 v7; // rbp
  int v8; // edx
  unsigned __int64 v9; // rbx
  int v10; // ecx
  __int64 v11; // r12
  __int64 v12; // rdx
  __int64 v13; // rbp
  __int64 v14; // rsi
  __int64 v15; // rbp
  volatile signed __int64 *v16; // r14
  int v17; // edx
  __int64 v18; // rdi
  __int64 v19; // rbx
  __int64 result; // rax
  __int64 v21; // r13
  _DWORD *v22; // rbx
  __int64 v23; // rcx
  signed __int32 v24; // edi
  signed __int32 v25; // eax
  _DWORD *v26; // r14
  __int64 v27; // rbp
  int v28; // edi
  __int64 v29; // rbx
  signed __int32 v30; // eax
  int v31; // ebp
  __int64 v32; // rcx
  int v33; // edi
  _DWORD *v34; // r14
  unsigned __int32 v35; // edi
  _DWORD *v36; // rbx
  unsigned __int32 v37; // ebp
  signed __int64 v38; // rdx
  int n2816; // [rsp+30h] [rbp-98h] BYREF
  __int64 v40; // [rsp+34h] [rbp-94h]
  int v41; // [rsp+3Ch] [rbp-8Ch]
  __int64 v42; // [rsp+40h] [rbp-88h]
  unsigned __int64 v43; // [rsp+48h] [rbp-80h]
  __int64 v44; // [rsp+50h] [rbp-78h]
  __int64 v45; // [rsp+58h] [rbp-70h]
  __int64 v46; // [rsp+D8h] [rbp+10h]
  char v47; // [rsp+E0h] [rbp+18h]
  volatile signed __int64 *v48; // [rsp+E8h] [rbp+20h]

  v3 = a1 + 8;
  v46 = a1 + 8;
  v7 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v47 = *(_BYTE *)(v7 + 2544);
  if ( !v47 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v3 + 12);
    }
    else
    {
      v8 = _InterlockedIncrement64((volatile signed __int64 *)v3);
      if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
        sub_1403CD0A0(v3, v8, (unsigned int)"CZoneSystem::UpdateForeignValue", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v9 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v10 = *(_DWORD *)(v9 + 16);
  if ( v10 == -1 )
  {
    v11 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v10 )
  {
    v12 = (unsigned __int16)v10;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
    {
      v11 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v12 = 0;
  }
  v11 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  v13 = v7 + 2672;
  *(_DWORD *)(*(unsigned __int16 *)(22LL * (*(_WORD *)(v9 + 8) & 0xF) + a1 + 10560358) + v9 + 48) = a3;
  v14 = sub_1403E4B00(v13);
  if ( !v14 )
    v14 = allocWithProfilerInfo(0x28u, 0);
  *(_DWORD *)(v14 + 32) = a3;
  *(_QWORD *)(v14 + 16) = v13;
  *(_QWORD *)v14 = 0;
  *(_BYTE *)(v14 + 24) = 7;
  *(_QWORD *)(v14 + 8) = v9;
  v15 = *(_WORD *)(v9 + 8) & 0xF;
  v16 = (volatile signed __int64 *)(a1 + 24 + 8 * v15);
  v48 = v16;
  v17 = _InterlockedIncrement64(v16);
  if ( (*(_QWORD *)&v17 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      a1 + 24 + 8 * v15,
      v17,
      (unsigned int)"CZoneSystem::UpdateForeignValue",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  n2816 = 2816;
  v40 = 0;
  v41 = 0;
  v43 = 0;
  v44 = 0;
  v45 = 0;
  v42 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v18 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v19 = *(_QWORD *)v14;
      sub_14704B550(v18, v14);
      v14 = v19;
    }
    while ( v19 );
    v43 = __rdtsc();
    result = qword_149A05E08(&n2816);
    goto LABEL_44;
  }
  v21 = 4 * v15 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + v21));
  v22 = (_DWORD *)(v11 + 66224 * v15 + 1472);
  _m_prefetchw(v22 + 1);
  v23 = v22[1] | 1u;
  v24 = _InterlockedOr(v22 + 1, 1u);
  if ( (v24 & 1) == 0 )
  {
LABEL_25:
    *v22 = *(_DWORD *)(sub_1402C8360(v23) + 24);
    v26 = (_DWORD *)(v11 + 66224 * v15 + 1472);
    while ( 1 )
    {
      v27 = qword_15146BC68;
      v28 = 0;
      if ( v14 )
      {
        do
        {
          v29 = *(_QWORD *)v14;
          sub_14704B550(v27, v14);
          ++v28;
          v14 = v29;
        }
        while ( v29 );
      }
      v30 = v26[1];
      v31 = v26[2] & 0x7FFF;
      if ( (unsigned __int16)v30 >> 1 != v31 )
        goto LABEL_36;
      *v26 = -1;
      v32 = v30 & 0xFFFFFFFE;
      if ( v30 != _InterlockedCompareExchange(v26 + 1, v32, v30) )
        break;
      v14 = 0;
LABEL_40:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v21), -v28) == v28 )
        qword_1499F5478(v21 + qword_15146BC68);
      if ( !v14 )
        goto LABEL_43;
    }
    *v26 = *(_DWORD *)(sub_1402C8360(v32) + 24);
LABEL_36:
    ++v26[2];
    v36 = &v26[4 * (v31 & 0xFFF) + 4];
    if ( (v36[1] & 0x7FFF) != v31 )
      sub_1470B7790(v26, v36 + 1);
    v14 = *((_QWORD *)v36 + 1);
    v37 = _InterlockedExchange(v36, v31);
    if ( (v37 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v26, v36, v37);
    goto LABEL_40;
  }
  while ( 1 )
  {
    v25 = _InterlockedCompareExchange(v22 + 1, v24 + 2, v24);
    if ( v24 == v25 )
      break;
    if ( (v25 & 1) != 0 )
    {
      v24 = v25;
    }
    else
    {
      _m_prefetchw(v22 + 1);
      v23 = v22[1] | 1u;
      v24 = _InterlockedOr(v22 + 1, 1u);
      if ( (v24 & 1) == 0 )
        goto LABEL_25;
    }
  }
  v33 = (unsigned __int16)v24 >> 1;
  v34 = &v22[4 * (v33 & 0xFFF) + 4];
  if ( (*v34 & 0x7FFF) != (((_WORD)v33 - 4096) & 0x7FFF) )
    sub_1470B7790(v22, &v22[4 * (v33 & 0xFFF) + 4]);
  *((_QWORD *)v34 + 1) = v14;
  v35 = _InterlockedExchange(v34 + 1, v33);
  if ( (v35 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v22, v34 + 1, v35);
LABEL_43:
  v43 = __rdtsc();
  result = qword_149A05E08(&n2816);
  v16 = v48;
  v3 = v46;
LABEL_44:
  v38 = _InterlockedDecrement64(v16);
  if ( (v38 & 0x3FF) == 0 )
  {
    result = 0xFFFF0000FFC00000uLL;
    if ( (v38 & 0xFFFF0000FFC00000uLL) != 0 )
      result = sub_1403CD3A0(v16);
  }
  if ( !v47 )
    return sub_1402D42F0(v3);
  return result;
}

// --- End Function: sub_1470A9480 (0x1470A9480) ---

// --- Function: sub_1470AA070 (0x1470AA070) ---
__int64 __fastcall sub_1470AA070(__int64 a1, __int64 a2, __int64 a3, __int64 *a4)
{
  __int64 *v7; // r15
  __int64 v9; // rcx
  unsigned __int64 v10; // rbx
  __int16 v11; // si
  int v12; // r14d
  unsigned __int64 v13; // rdx
  __int128 v14; // xmm1
  __int64 v15; // rcx
  double v16; // xmm15_8
  double *v17; // r8
  double v20; // xmm5_8
  double v21; // xmm6_8
  double v22; // xmm8_8
  double v23; // xmm2_8
  double v24; // xmm7_8
  double v25; // xmm3_8
  double v26; // xmm11_8
  double v27; // xmm0_8
  double v28; // xmm6_8
  double v29; // xmm5_8
  double v30; // xmm12_8
  double v31; // xmm13_8
  double v32; // xmm1_8
  double v33; // xmm9_8
  double v34; // xmm8_8
  double v35; // xmm3_8
  double v36; // xmm0_8
  double v37; // xmm12_8
  double v38; // xmm11_8
  double v39; // xmm14_8
  double v40; // xmm13_8
  double v41; // xmm4_8
  double v42; // xmm10_8
  double v43; // kr00_8
  double v44; // xmm8_8
  double v45; // xmm7_8
  double v46; // xmm6_8
  double v47; // xmm4_8
  double v48; // xmm3_8
  double v49; // xmm6_8
  double v50; // kr00_8
  double v51; // xmm3_8
  int v52; // ecx
  __int64 v53; // r9
  __int64 v54; // r9
  __int128 v56; // [rsp+48h] [rbp-C0h] BYREF
  __int64 v57; // [rsp+58h] [rbp-B0h]
  double v58; // [rsp+60h] [rbp-A8h]
  int n2816; // [rsp+68h] [rbp-A0h] BYREF
  __int64 v60; // [rsp+6Ch] [rbp-9Ch]
  int v61; // [rsp+74h] [rbp-94h]
  __int64 v62; // [rsp+78h] [rbp-90h]
  unsigned __int64 v63; // [rsp+80h] [rbp-88h]
  __int64 v64; // [rsp+88h] [rbp-80h]
  __int64 v65; // [rsp+90h] [rbp-78h]
  __m256 v66; // [rsp+B8h] [rbp-50h] BYREF
  double v67[3]; // [rsp+D8h] [rbp-30h]
  char v68; // [rsp+1D8h] [rbp+D0h]
  int v69; // [rsp+1E0h] [rbp+D8h]
  double v70; // [rsp+1E8h] [rbp+E0h]
  double v71; // [rsp+1F0h] [rbp+E8h]
  double v72; // [rsp+1F0h] [rbp+E8h]

  v69 = a2;
  v7 = 0;
  v60 = 0;
  v61 = 0;
  v63 = 0;
  v64 = 0;
  v65 = 0;
  n2816 = 2816;
  v62 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v9 = *(unsigned __int8 *)(a2 + 3);
  v10 = *(_QWORD *)(a1 + 72 * v9 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v9 + 10560336);
  v56 = 0;
  v57 = 0;
  v11 = *(_WORD *)(v10 + 8);
  if ( (v11 & 0x2000) != 0 )
  {
    if ( a4 )
    {
      v7 = a4;
    }
    else
    {
      v7 = (__int64 *)&v56;
      *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v9) + 16) + (v11 & 0xF) + 41LL) = 1;
    }
  }
  v68 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v68 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v12 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v12 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v12, (unsigned int)"CZoneSystem::UpdateLocalBounds", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v13 = v10 + 48;
  v14 = *(_OWORD *)(a3 + 32);
  v15 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v10 + 8) & 0xF) + a1 + 10560348);
  *(__m256i *)(v15 + v13) = *(__m256i *)a3;
  *(_OWORD *)(v15 + v13 + 32) = v14;
  v16 = *(double *)(a3 + 24);
  v17 = (double *)(v10 + 48 + *(unsigned __int16 *)(22LL * (*(_WORD *)(v10 + 8) & 0xF) + a1 + 10560346));
  if ( *(double *)a3 <= v16 )
  {
    v20 = v17[2];
    v21 = v17[1];
    v22 = *v17;
    v23 = v21 + v21;
    v24 = (v21 + v21) * *v17;
    v25 = v20 + v20;
    v26 = v21 * (v20 + v20);
    v71 = 1.0 - (v22 + v22) * v22;
    v70 = (v21 + v21) * v21;
    v27 = v17[3];
    v28 = (v20 + v20) * v20;
    v29 = v27 * (v20 + v20);
    v30 = *v17 * v25;
    v31 = (v22 + v22) * v27;
    v32 = *(double *)(a3 + 40) - *(double *)(a3 + 16);
    v33 = (v16 - *(double *)a3) * 0.5;
    v34 = (*(double *)(a3 + 32) - *(double *)(a3 + 8)) * 0.5;
    v35 = v71;
    v58 = (fabs(1.0 - v70 - v28) * v33 + fabs(v24 - v29) * v34 + fabs(v30 + v23 * v27) * (v32 * 0.5)) * v17[7];
    v72 = (fabs(v29 + v24) * v33 + fabs(v71 - v28) * v34 + fabs(v26 - v31) * (v32 * 0.5)) * v17[7];
    v36 = v30 - v23 * v27;
    v37 = v17[7];
    v38 = (fabs(v26 + v31) * v34
         + COERCE_DOUBLE(*(_QWORD *)&v36 & 0x7FFFFFFFFFFFFFFFLL) * v33
         + fabs(v35 - v70) * (v32 * 0.5))
        * v37;
    v39 = v17[1];
    v40 = v17[2];
    v41 = v17[3];
    v42 = (*(double *)(a3 + 16) + *(double *)(a3 + 40)) * 0.5;
    v43 = (*(double *)(a3 + 8) + *(double *)(a3 + 32)) * 0.5;
    v44 = (*(double *)(a3 + 24) + *(double *)a3) * 0.5;
    v45 = v39 * v42 - v43 * v40 + v44 * v41;
    v46 = v44 * v40 - *v17 * v42 + v43 * v41;
    v47 = *v17 * v43 - v39 * v44 + v42 * v41;
    v48 = *v17 * v46 - v39 * v45;
    v49 = (v44 + v39 * v47 - v46 * v40 + v39 * v47 - v46 * v40) * v37 + v17[4];
    v50 = (v43 + v45 * v40 - *v17 * v47 + v45 * v40 - *v17 * v47) * v37 + v17[5];
    v51 = (v42 + v48 + v48) * v37 + v17[6];
    *(double *)&v66.m256_f32[2] = v50 - v72;
    *(double *)v66.m256_f32 = v49 - v58;
    *(double *)&v66.m256_f32[4] = v51 - v38;
    *(double *)&v66.m256_f32[6] = v49 + v58;
    v67[0] = v50 + v72;
    v67[1] = v51 + v38;
  }
  else
  {
    __asm
    {
      vmovupd ymm0, cs:ymmword_1480EFCC0
      vmovupd xmm1, cs:xmmword_1480EFC60
      vmovupd [rbp+0C0h+var_110], ymm0
      vmovupd xmmword ptr [rbp+0C0h+var_F0], xmm1
    }
  }
  v52 = *(_DWORD *)(v10 + 16);
  if ( v52 == -1 )
  {
    LODWORD(v53) = 0;
    goto LABEL_20;
  }
  if ( (_WORD)v52 )
  {
    v54 = (unsigned __int16)v52;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v52 + 6) != HIWORD(v52) )
    {
      LODWORD(v53) = 0;
      goto LABEL_20;
    }
  }
  else
  {
    v54 = 0;
  }
  v53 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v54) & 0xFFFFFFFFFFFFLL;
LABEL_20:
  __asm { vzeroupper }
  sub_1470A7D70(a1, v10, v69, v53, (__int64)v17, a3, (__int64)&v66, (__int64)v7);
  if ( !v68 )
    sub_1402D42F0(a1 + 8);
  if ( !a4 && v7 )
    sub_14707E720(a1, *(_WORD *)(v10 + 8), v7);
  if ( (_QWORD)v56 )
  {
    sub_1403A4F10(&v56, v56, (v57 - v56) & 0xFFFFFFFFFFFFFFE0uLL);
    v56 = 0;
    v57 = 0;
  }
  v63 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470AA070 (0x1470AA070) ---

// --- Function: sub_1470AA6C0 (0x1470AA6C0) ---
__int64 __fastcall sub_1470AA6C0(__int64 a1, __int64 a2, __int64 a3, __int64 a4, int n2)
{
  __int128 v5; // xmm14
  __int64 _RSI; // r12
  __int64 v11; // rcx
  unsigned __int64 v12; // rdi
  __int16 v13; // r15
  int v14; // ebx
  unsigned __int64 v15; // rdx
  __int128 v16; // xmm1
  __int64 v17; // rcx
  int _RSI_1; // ecx
  __int64 v19; // r9
  __int64 v20; // rbx
  unsigned int v21; // r8d
  unsigned __int64 v22; // rcx
  double v23; // xmm5_8
  double v24; // xmm0_8
  double *v25; // rax
  double v26; // xmm6_8
  double v27; // xmm8_8
  double v28; // xmm9_8
  double v29; // xmm0_8
  double v30; // xmm15_8
  bool v31; // cc
  double v34; // kr00_8
  double v35; // xmm10_8
  double v36; // xmm7_8
  double v37; // xmm12_8
  double v38; // xmm13_8
  double v39; // xmm6_8
  double v40; // xmm8_8
  double v41; // xmm0_8
  double v42; // xmm10_8
  double v43; // xmm3_8
  double v44; // xmm11_8
  double v45; // xmm9_8
  double v46; // xmm8_8
  double v47; // kr00_8
  double v48; // xmm7_8
  double v49; // xmm6_8
  double v50; // xmm4_8
  double v51; // xmm3_8
  double v52; // xmm6_8
  double v53; // xmm5_8
  double v54; // kr00_8
  double v56; // [rsp+48h] [rbp-C0h]
  double v57; // [rsp+50h] [rbp-B8h]
  __int64 *v58; // [rsp+60h] [rbp-A8h]
  __int128 v59; // [rsp+68h] [rbp-A0h] BYREF
  __int64 v60; // [rsp+78h] [rbp-90h]
  double v61; // [rsp+80h] [rbp-88h]
  double v62; // [rsp+88h] [rbp-80h]
  double v63; // [rsp+90h] [rbp-78h]
  double v64; // [rsp+98h] [rbp-70h]
  int n2816; // [rsp+A8h] [rbp-60h] BYREF
  __int64 v66; // [rsp+ACh] [rbp-5Ch]
  int v67; // [rsp+B4h] [rbp-54h]
  __int64 v68; // [rsp+B8h] [rbp-50h]
  unsigned __int64 v69; // [rsp+C0h] [rbp-48h]
  __int64 v70; // [rsp+C8h] [rbp-40h]
  __int64 v71; // [rsp+D0h] [rbp-38h]
  __m256 v72; // [rsp+F8h] [rbp-10h] BYREF
  __int128 v73; // [rsp+118h] [rbp+10h]
  double v74[2]; // [rsp+128h] [rbp+20h] BYREF
  __m256 v75; // [rsp+138h] [rbp+30h]
  __int128 v76; // [rsp+158h] [rbp+50h]
  __int64 v77[7]; // [rsp+168h] [rbp+60h] BYREF
  __int128 v78; // [rsp+1B8h] [rbp+B0h]
  char v79; // [rsp+288h] [rbp+180h]
  int v80; // [rsp+290h] [rbp+188h]
  double v81; // [rsp+298h] [rbp+190h]

  v80 = a2;
  _RSI = 0;
  n2816 = 2816;
  v66 = 0;
  v67 = 0;
  v69 = 0;
  v70 = 0;
  v71 = 0;
  v68 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v11 = *(unsigned __int8 *)(a2 + 3);
  v58 = 0;
  v12 = *(_QWORD *)(a1 + 72 * v11 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v11 + 10560336);
  v59 = 0;
  v60 = 0;
  v13 = *(_WORD *)(v12 + 8);
  if ( (v13 & 0x2000) != 0 )
  {
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v11) + 16) + (v13 & 0xF) + 41LL) = 1;
    v58 = (__int64 *)&v59;
  }
  v79 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v79 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v14 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v14 & 0x200000LL) != 0 )
        sub_1403CD0A0(
          a1 + 8,
          v14,
          (unsigned int)"CZoneSystem::UpdateLocalBoundsAndTransform",
          (unsigned int)"m_GlobalStateLock",
          1);
    }
  }
  v15 = v12 + 48;
  v16 = *(_OWORD *)(a3 + 32);
  v17 = *(unsigned __int16 *)(22LL * (*(_WORD *)(v12 + 8) & 0xF) + a1 + 10560348);
  *(__m256i *)(v17 + v15) = *(__m256i *)a3;
  *(_OWORD *)(v17 + v15 + 32) = v16;
  _RSI_1 = *(_DWORD *)(v12 + 16);
  v19 = 22LL * (*(_WORD *)(v12 + 8) & 0xF);
  v20 = v12 + 48 + *(unsigned __int16 *)(v19 + a1 + 10560346);
  if ( _RSI_1 != -1 )
  {
    if ( !(_WORD)_RSI_1
      || (_RSI = (unsigned __int16)_RSI_1,
          *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)_RSI_1 + 6) == HIWORD(_RSI_1)) )
    {
      _RSI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * _RSI) & 0xFFFFFFFFFFFFLL;
    }
    else
    {
      _RSI = 0;
    }
  }
  if ( (*(_WORD *)(v12 + 8) & 0x4000) != 0 )
  {
    v21 = dword_149A0A48C;
    v22 = v15 + *(unsigned __int16 *)(v19 + a1 + 10560366);
    if ( *(_DWORD *)(v22 + 64) != dword_149A0A48C )
    {
      *(_QWORD *)v22 = *(_QWORD *)v20;
      *(_QWORD *)(v22 + 8) = *(_QWORD *)(v20 + 8);
      *(_QWORD *)(v22 + 16) = *(_QWORD *)(v20 + 16);
      *(_QWORD *)(v22 + 24) = *(_QWORD *)(v20 + 24);
      *(_OWORD *)(v22 + 32) = *(_OWORD *)(v20 + 32);
      *(double *)(v22 + 48) = *(double *)(v20 + 48);
      *(_QWORD *)(v22 + 56) = *(_QWORD *)(v20 + 56);
      *(_DWORD *)(v22 + 64) = v21;
    }
  }
  if ( n2 == 2 )
  {
    v23 = *(double *)a4;
    v24 = *(double *)(a4 + 8);
    v75 = *(__m256 *)(a4 + 16);
    v76 = *(_OWORD *)(a4 + 48);
    v74[0] = v23;
    v74[1] = v24;
    v25 = v74;
  }
  else
  {
    __asm { vzeroupper }
    v25 = (double *)CZoneSystem::composeZoneToWorldMatrix(_RSI, (__int64)v77, a4);
    v23 = *v25;
  }
  *(double *)v20 = v23;
  v26 = v25[1];
  *(double *)(v20 + 8) = v26;
  v27 = v25[2];
  *(double *)(v20 + 16) = v27;
  v28 = v25[3];
  *(double *)(v20 + 24) = v28;
  *(_OWORD *)(v20 + 32) = *((_OWORD *)v25 + 2);
  *(double *)(v20 + 48) = v25[6];
  v29 = v25[7];
  *(double *)(v20 + 56) = v29;
  v30 = *(double *)a3;
  v31 = *(double *)a3 <= *(double *)(a3 + 24);
  v61 = v26;
  v62 = v27;
  v63 = v28;
  v81 = v29;
  if ( v31 )
  {
    v34 = v27 + v27;
    v35 = *(double *)(a3 + 40);
    v36 = v23 * (v26 + v26);
    v57 = v26 * (v26 + v26);
    v37 = v28 * (v26 + v26);
    v38 = v26 * (v27 + v27);
    v39 = v27 * (v27 + v27);
    v40 = (*(double *)(a3 + 24) - v30) * 0.5;
    v41 = *(double *)(a3 + 32) - *(double *)(a3 + 8);
    v78 = v5;
    v42 = (v35 - *(double *)(a3 + 16)) * 0.5;
    v43 = 1.0 - v23 * (v23 + v23);
    v64 = (fabs(1.0 - v57 - v39) * v40 + fabs(v36 - v28 * v34) * (v41 * 0.5) + fabs(v23 * v34 + v37) * v42) * v81;
    v56 = (fabs(v28 * v34 + v36) * v40 + fabs(v43 - v39) * (v41 * 0.5) + fabs(v38 - v28 * (v23 + v23)) * v42) * v81;
    v44 = (fabs(v23 * v34 - v37) * v40 + fabs(v38 + v28 * (v23 + v23)) * (v41 * 0.5) + fabs(v43 - v57) * v42) * v81;
    v45 = (*(double *)(a3 + 8) + *(double *)(a3 + 32)) * 0.5;
    v46 = (*(double *)(a3 + 24) + *(double *)a3) * 0.5;
    v47 = (*(double *)(a3 + 16) + *(double *)(a3 + 40)) * 0.5;
    v48 = v61 * v47 - v62 * v45 + v63 * v46;
    v49 = v62 * v46 - v23 * v47 + v63 * v45;
    v50 = v23 * v45 - v61 * v46 + v63 * v47;
    v51 = v23 * v49 - v61 * v48;
    v52 = (v46 + v61 * v50 - v62 * v49 + v61 * v50 - v62 * v49) * v81 + *(double *)(v20 + 32);
    v53 = (v45 + v62 * v48 - v23 * v50 + v62 * v48 - v23 * v50) * v81 + *(double *)(v20 + 40);
    v54 = (v47 + v51 + v51) * v81 + *(double *)(v20 + 48);
    *(double *)&v72.m256_f32[2] = v53 - v56;
    *(double *)v72.m256_f32 = v52 - v64;
    *(double *)&v72.m256_f32[4] = v54 - v44;
    *(double *)&v72.m256_f32[6] = v52 + v64;
    *(double *)&v73 = v53 + v56;
    *((double *)&v73 + 1) = v54 + v44;
  }
  else
  {
    __asm
    {
      vmovupd ymm0, cs:ymmword_1480EFCC0
      vmovupd xmm1, cs:xmmword_1480EFC60
      vmovupd [rbp+170h+var_180], ymm0
      vmovupd [rbp+170h+var_160], xmm1
    }
  }
  __asm { vzeroupper }
  sub_1470A7D70(a1, v12, v80, _RSI, v20, a3, (__int64)&v72, (__int64)v58);
  if ( !v79 )
    sub_1402D42F0(a1 + 8);
  if ( v58 )
    sub_14707E720(a1, *(_WORD *)(v12 + 8), v58);
  if ( (_QWORD)v59 )
  {
    sub_1403A4F10(&v59, v59, (v60 - v59) & 0xFFFFFFFFFFFFFFE0uLL);
    v59 = 0;
    v60 = 0;
  }
  v69 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470AA6C0 (0x1470AA6C0) ---

// --- Function: sub_1470AD2C0 (0x1470AD2C0) ---
__int64 __fastcall sub_1470AD2C0(__int64 a1, __int64 a2, int a3)
{
  __int64 v3; // rbx
  __int64 v7; // r14
  int v8; // edx
  unsigned __int64 v9; // rbx
  int v10; // ecx
  __int64 v11; // r13
  __int64 v12; // rdx
  __int64 v13; // rsi
  __int64 v14; // rbp
  volatile signed __int64 *v15; // r15
  int v16; // edx
  __int64 v17; // rdi
  __int64 v18; // rbx
  __int64 result; // rax
  __int64 v20; // r15
  _DWORD *v21; // rbx
  __int64 v22; // rcx
  signed __int32 v23; // edi
  signed __int32 v24; // eax
  _DWORD *v25; // r14
  __int64 v26; // rbp
  int v27; // edi
  __int64 v28; // rbx
  signed __int32 v29; // eax
  int v30; // ebp
  __int64 v31; // rcx
  int v32; // edi
  _DWORD *v33; // r14
  unsigned __int32 v34; // edi
  _DWORD *v35; // rbx
  unsigned __int32 v36; // ebp
  signed __int64 v37; // rdx
  __int64 v38; // [rsp+30h] [rbp-A8h]
  int n2816; // [rsp+40h] [rbp-98h] BYREF
  __int64 v40; // [rsp+44h] [rbp-94h]
  int v41; // [rsp+4Ch] [rbp-8Ch]
  __int64 v42; // [rsp+50h] [rbp-88h]
  unsigned __int64 v43; // [rsp+58h] [rbp-80h]
  __int64 v44; // [rsp+60h] [rbp-78h]
  __int64 v45; // [rsp+68h] [rbp-70h]
  int v46; // [rsp+E0h] [rbp+8h]
  char v47; // [rsp+F0h] [rbp+18h]
  volatile signed __int64 *v48; // [rsp+F8h] [rbp+20h]

  v3 = a1 + 8;
  v38 = a1 + 8;
  v7 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v47 = *(_BYTE *)(v7 + 2544);
  if ( !v47 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v3 + 12);
    }
    else
    {
      v8 = _InterlockedIncrement64((volatile signed __int64 *)v3);
      if ( (*(_QWORD *)&v8 & 0x200000LL) != 0 )
        sub_1403CD0A0(v3, v8, (unsigned int)"CZoneSystem::UpdateObjectFlags", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v9 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v10 = *(_DWORD *)(v9 + 16);
  if ( v10 == -1 )
  {
    v11 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v10 )
  {
    v12 = (unsigned __int16)v10;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v10 + 6) != HIWORD(v10) )
    {
      v11 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v12 = 0;
  }
  v11 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  *(_DWORD *)(*(unsigned __int16 *)(22 * ((*(_WORD *)(v9 + 8) & 0xF) + 480016LL) + a1) + v9 + 48) = a3;
  v13 = sub_1403E4B00(v7 + 2624);
  if ( !v13 )
    v13 = allocWithProfilerInfo(0x28u, 0);
  *(_DWORD *)(v13 + 32) = a3;
  *(_QWORD *)(v13 + 16) = v7 + 2624;
  *(_QWORD *)v13 = 0;
  *(_BYTE *)(v13 + 24) = 4;
  *(_QWORD *)(v13 + 8) = v9;
  v14 = *(_WORD *)(v9 + 8) & 0xF;
  v15 = (volatile signed __int64 *)(a1 + 24 + 8 * v14);
  v48 = v15;
  v46 = *(_DWORD *)(v7 + 2548);
  if ( !v46 )
  {
    v16 = _InterlockedIncrement64(v15);
    if ( (*(_QWORD *)&v16 & 0x200000LL) != 0 )
      sub_1403CD0A0(
        a1 + 24 + 8 * v14,
        v16,
        (unsigned int)"CZoneSystem::UpdateObjectFlags",
        (unsigned int)"m_CullingLock[nTypeIndex]",
        1);
  }
  n2816 = 2816;
  v40 = 0;
  v41 = 0;
  v43 = 0;
  v44 = 0;
  v45 = 0;
  v42 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v17 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v18 = *(_QWORD *)v13;
      sub_14704B550(v17, v13);
      v13 = v18;
    }
    while ( v18 );
    v43 = __rdtsc();
    result = qword_149A05E08(&n2816);
    goto LABEL_45;
  }
  v20 = 4 * v14 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(v20 + qword_15146BC68));
  v21 = (_DWORD *)(v11 + 66224 * v14 + 1472);
  _m_prefetchw(v21 + 1);
  v22 = v21[1] | 1u;
  v23 = _InterlockedOr(v21 + 1, 1u);
  if ( (v23 & 1) == 0 )
  {
LABEL_26:
    *v21 = *(_DWORD *)(sub_1402C8360(v22) + 24);
    v25 = (_DWORD *)(v11 + 66224 * v14 + 1472);
    while ( 1 )
    {
      v26 = qword_15146BC68;
      v27 = 0;
      if ( v13 )
      {
        do
        {
          v28 = *(_QWORD *)v13;
          sub_14704B550(v26, v13);
          ++v27;
          v13 = v28;
        }
        while ( v28 );
      }
      v29 = v25[1];
      v30 = v25[2] & 0x7FFF;
      if ( (unsigned __int16)v29 >> 1 != v30 )
        goto LABEL_37;
      *v25 = -1;
      v31 = v29 & 0xFFFFFFFE;
      if ( v29 != _InterlockedCompareExchange(v25 + 1, v31, v29) )
        break;
      v13 = 0;
LABEL_41:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v20), -v27) == v27 )
        qword_1499F5478(v20 + qword_15146BC68);
      if ( !v13 )
        goto LABEL_44;
    }
    *v25 = *(_DWORD *)(sub_1402C8360(v31) + 24);
LABEL_37:
    ++v25[2];
    v35 = &v25[4 * (v30 & 0xFFF) + 4];
    if ( (v35[1] & 0x7FFF) != v30 )
      sub_1470B7790(v25, v35 + 1);
    v13 = *((_QWORD *)v35 + 1);
    v36 = _InterlockedExchange(v35, v30);
    if ( (v36 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v25, v35, v36);
    goto LABEL_41;
  }
  while ( 1 )
  {
    v24 = _InterlockedCompareExchange(v21 + 1, v23 + 2, v23);
    if ( v23 == v24 )
      break;
    if ( (v24 & 1) != 0 )
    {
      v23 = v24;
    }
    else
    {
      _m_prefetchw(v21 + 1);
      v22 = v21[1] | 1u;
      v23 = _InterlockedOr(v21 + 1, 1u);
      if ( (v23 & 1) == 0 )
        goto LABEL_26;
    }
  }
  v32 = (unsigned __int16)v23 >> 1;
  v33 = &v21[4 * (v32 & 0xFFF) + 4];
  if ( (*v33 & 0x7FFF) != (((_WORD)v32 - 4096) & 0x7FFF) )
    sub_1470B7790(v21, &v21[4 * (v32 & 0xFFF) + 4]);
  *((_QWORD *)v33 + 1) = v13;
  v34 = _InterlockedExchange(v33 + 1, v32);
  if ( (v34 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v21, v33 + 1, v34);
LABEL_44:
  v43 = __rdtsc();
  result = qword_149A05E08(&n2816);
  v15 = v48;
LABEL_45:
  if ( !v46 )
  {
    v37 = _InterlockedDecrement64(v15);
    if ( (v37 & 0x3FF) == 0 )
    {
      result = 0xFFFF0000FFC00000uLL;
      if ( (v37 & 0xFFFF0000FFC00000uLL) != 0 )
        result = sub_1403CD3A0(v15);
    }
  }
  if ( !v47 )
    return sub_1402D42F0(v38);
  return result;
}

// --- End Function: sub_1470AD2C0 (0x1470AD2C0) ---

// --- Function: sub_1470AE000 (0x1470AE000) ---
__int64 __fastcall sub_1470AE000(__int64 a1, __int64 a2, double *a3, int n2)
{
  __int128 v4; // xmm10
  __int64 _RDI; // r15
  __int64 *v9; // r12
  __int64 v10; // rcx
  unsigned __int64 v11; // rdi
  __int16 v12; // r14
  int v13; // ebx
  unsigned __int64 v14; // rdx
  int _RDI_1; // ecx
  __int64 v16; // r9
  __int64 v17; // rbx
  unsigned int v18; // r8d
  unsigned __int64 v19; // rcx
  double v20; // xmm1_8
  double *v21; // rax
  double v22; // xmm1_8
  __int16 v23; // cx
  double *v24; // rcx
  double v25; // xmm9_8
  double v26; // xmm11_8
  double v29; // xmm5_8
  double v30; // xmm6_8
  double v31; // xmm8_8
  double v32; // xmm7_8
  double v33; // kr00_8
  double v34; // xmm0_8
  double v35; // xmm12_8
  double v36; // xmm13_8
  double v37; // xmm14_8
  double v38; // xmm15_8
  double v39; // xmm6_8
  double v40; // xmm5_8
  double v41; // xmm8_8
  double v42; // xmm11_8
  double v43; // xmm9_8
  double v44; // xmm3_8
  double v45; // kr00_8
  double v46; // xmm12_8
  double v47; // xmm11_8
  double v48; // xmm14_8
  double v49; // xmm13_8
  double v50; // xmm4_8
  double v51; // xmm9_8
  double v52; // kr00_8
  double v53; // xmm8_8
  double v54; // xmm7_8
  double v55; // xmm6_8
  double v56; // xmm4_8
  double v57; // xmm3_8
  double v58; // xmm6_8
  double v59; // kr00_8
  double v60; // xmm3_8
  double v62; // [rsp+48h] [rbp-C0h]
  double v63; // [rsp+50h] [rbp-B8h]
  double v64; // [rsp+58h] [rbp-B0h]
  double v65; // [rsp+60h] [rbp-A8h]
  double v66; // [rsp+68h] [rbp-A0h]
  double v67; // [rsp+68h] [rbp-A0h]
  double v68; // [rsp+70h] [rbp-98h]
  double v69[3]; // [rsp+78h] [rbp-90h] BYREF
  __int64 v70; // [rsp+90h] [rbp-78h]
  __int128 v71; // [rsp+98h] [rbp-70h] BYREF
  double v72; // [rsp+A8h] [rbp-60h]
  __int128 v73; // [rsp+B0h] [rbp-58h]
  double v74; // [rsp+C0h] [rbp-48h]
  double v75; // [rsp+C8h] [rbp-40h]
  int n2816; // [rsp+D8h] [rbp-30h] BYREF
  __int64 v77; // [rsp+DCh] [rbp-2Ch]
  int v78; // [rsp+E4h] [rbp-24h]
  __int64 v79; // [rsp+E8h] [rbp-20h]
  unsigned __int64 v80; // [rsp+F0h] [rbp-18h]
  __int64 v81; // [rsp+F8h] [rbp-10h]
  __int64 v82; // [rsp+100h] [rbp-8h]
  __m256 v83; // [rsp+128h] [rbp+20h] BYREF
  __int128 v84; // [rsp+148h] [rbp+40h]
  __int128 v85; // [rsp+158h] [rbp+50h] BYREF
  double v86; // [rsp+168h] [rbp+60h]
  _BYTE v87[24]; // [rsp+170h] [rbp+68h] BYREF
  __int64 v88[7]; // [rsp+188h] [rbp+80h] BYREF
  __int128 v89; // [rsp+218h] [rbp+110h]
  char v90; // [rsp+2A8h] [rbp+1A0h]
  int v91; // [rsp+2B0h] [rbp+1A8h]

  v91 = a2;
  _RDI = 0;
  n2816 = 2816;
  v77 = 0;
  v78 = 0;
  v80 = 0;
  v81 = 0;
  v82 = 0;
  v79 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v9 = 0;
  v10 = *(unsigned __int8 *)(a2 + 3);
  v11 = *(_QWORD *)(a1 + 72 * v10 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v10 + 10560336);
  *(_OWORD *)&v69[1] = 0;
  v70 = 0;
  v12 = *(_WORD *)(v11 + 8);
  if ( (v12 & 0x2000) != 0 )
  {
    v9 = (__int64 *)&v69[1];
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v10) + 16) + (v12 & 0xF) + 41LL) = 1;
  }
  v90 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v90 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v13 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v13 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v13, (unsigned int)"CZoneSystem::UpdatePosition", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v14 = v11 + 48;
  _RDI_1 = *(_DWORD *)(v11 + 16);
  v16 = 22LL * (*(_WORD *)(v11 + 8) & 0xF);
  v17 = v11 + 48 + *(unsigned __int16 *)(v16 + a1 + 10560346);
  if ( _RDI_1 != -1 )
  {
    if ( !(_WORD)_RDI_1
      || (_RDI = (unsigned __int16)_RDI_1,
          *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)_RDI_1 + 6) == HIWORD(_RDI_1)) )
    {
      _RDI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * _RDI) & 0xFFFFFFFFFFFFLL;
    }
    else
    {
      _RDI = 0;
    }
  }
  if ( (*(_WORD *)(v11 + 8) & 0x4000) != 0 )
  {
    v18 = dword_149A0A48C;
    v19 = v14 + *(unsigned __int16 *)(v16 + a1 + 10560366);
    if ( *(_DWORD *)(v19 + 64) != dword_149A0A48C )
    {
      *(_QWORD *)v19 = *(_QWORD *)v17;
      *(_QWORD *)(v19 + 8) = *(_QWORD *)(v17 + 8);
      *(_QWORD *)(v19 + 16) = *(_QWORD *)(v17 + 16);
      *(_QWORD *)(v19 + 24) = *(_QWORD *)(v17 + 24);
      *(_OWORD *)(v19 + 32) = *(_OWORD *)(v17 + 32);
      *(double *)(v19 + 48) = *(double *)(v17 + 48);
      *(_QWORD *)(v19 + 56) = *(_QWORD *)(v17 + 56);
      *(_DWORD *)(v19 + 64) = v18;
    }
  }
  if ( n2 == 2 )
  {
    v20 = a3[2];
    v85 = *(_OWORD *)a3;
    v86 = v20;
    v21 = (double *)&v85;
  }
  else
  {
    CZone::GetInvertedTransform_ws(_RDI, (__int64)v88, dword_149A0A48C);
    sub_140339170(v87, v88, a3);
    v21 = (double *)v87;
    v14 = v11 + 48;
  }
  v22 = v21[2];
  *(_OWORD *)(v17 + 32) = *(_OWORD *)v21;
  *(double *)(v17 + 48) = v22;
  v23 = *(_WORD *)(v11 + 8);
  if ( (v23 & 0x20) != 0 )
  {
    v24 = (double *)(v14 + *(unsigned __int16 *)(22LL * (v23 & 0xF) + a1 + 10560348));
    v26 = v24[3];
    v69[0] = *v24;
    v63 = v24[1];
    v65 = v24[2];
    v68 = v26;
    v62 = v24[4];
    v64 = v24[5];
    *(double *)&v71 = *v24;
    v25 = *(double *)&v71;
    *((double *)&v71 + 1) = v63;
    v72 = v65;
    *(double *)&v73 = v26;
    *((double *)&v73 + 1) = v62;
    v74 = v64;
    if ( *(double *)&v71 > v26 )
    {
      __asm
      {
        vmovupd ymm0, cs:ymmword_1480EFCC0
        vmovupd xmm1, cs:xmmword_1480EFC60
        vmovupd [rbp+190h+var_170], ymm0
        vmovupd [rbp+190h+var_150], xmm1
      }
      goto LABEL_24;
    }
  }
  else
  {
    v25 = -0.0;
    v26 = 0.0;
    v69[0] = -0.0;
    v72 = -0.0;
    v74 = 0.0;
    v64 = 0.0;
    v62 = 0.0;
    v68 = 0.0;
    v65 = -0.0;
    v63 = -0.0;
    v71 = xmmword_1480E0780;
    v73 = 0;
  }
  v29 = *(double *)(v17 + 16);
  v30 = *(double *)(v17 + 8);
  v31 = *(double *)v17;
  v89 = v4;
  v32 = (v30 + v30) * v31;
  v33 = (v29 + v29) * v31;
  v66 = 1.0 - (v31 + v31) * v31;
  v34 = *(double *)(v17 + 24);
  v35 = v34 * (v30 + v30);
  v36 = (v29 + v29) * v30;
  v37 = v34 * (v31 + v31);
  v38 = (v30 + v30) * v30;
  v39 = (v29 + v29) * v29;
  v40 = v34 * (v29 + v29);
  v41 = (v26 - v25) * 0.5;
  v42 = (v64 - v65) * 0.5;
  v43 = (v62 - v63) * 0.5;
  v44 = v66;
  v75 = (fabs(1.0 - v38 - v39) * v41 + fabs(v32 - v40) * v43 + fabs(v33 + v35) * v42) * *(double *)(v17 + 56);
  v67 = (fabs(v40 + v32) * v41 + fabs(v66 - v39) * v43 + fabs(v36 - v37) * v42) * *(double *)(v17 + 56);
  v45 = v33 - v35;
  v46 = *(double *)(v17 + 56);
  v47 = (COERCE_DOUBLE(*(_QWORD *)&v45 & 0x7FFFFFFFFFFFFFFFLL) * v41 + fabs(v36 + v37) * v43 + fabs(v44 - v38) * v42)
      * v46;
  v48 = *(double *)(v17 + 8);
  v49 = *(double *)(v17 + 16);
  v50 = *(double *)(v17 + 24);
  v51 = (v62 + v63) * 0.5;
  v52 = (v64 + v65) * 0.5;
  v53 = (v68 + v69[0]) * 0.5;
  v54 = v48 * v52 - v51 * v49 + v50 * v53;
  v55 = v53 * v49 - *(double *)v17 * v52 + v50 * v51;
  v56 = v51 * *(double *)v17 - v53 * v48 + v50 * v52;
  v57 = *(double *)v17 * v55 - v48 * v54;
  v58 = (v53 + v48 * v56 - v49 * v55 + v48 * v56 - v49 * v55) * v46 + *(double *)(v17 + 32);
  v59 = (v51 + v49 * v54 - *(double *)v17 * v56 + v49 * v54 - *(double *)v17 * v56) * v46 + *(double *)(v17 + 40);
  v60 = ((v64 + v65) * 0.5 + v57 + v57) * v46 + *(double *)(v17 + 48);
  *(double *)&v83.m256_f32[2] = v59 - v67;
  *(double *)v83.m256_f32 = v58 - v75;
  *(double *)&v83.m256_f32[4] = v60 - v47;
  *(double *)&v83.m256_f32[6] = v58 + v75;
  *(double *)&v84 = v59 + v67;
  *((double *)&v84 + 1) = v47 + v60;
LABEL_24:
  __asm { vzeroupper }
  sub_1470A7D70(a1, v11, v91, _RDI, v17, (__int64)&v71, (__int64)&v83, (__int64)v9);
  if ( !v90 )
    sub_1402D42F0(a1 + 8);
  if ( v9 )
    sub_14707E720(a1, *(_WORD *)(v11 + 8), v9);
  if ( *(_QWORD *)&v69[1] )
  {
    sub_1403A4F10(&v69[1], *(_QWORD *)&v69[1], (v70 - *(_QWORD *)&v69[1]) & 0xFFFFFFFFFFFFFFE0uLL);
    *(_OWORD *)&v69[1] = 0;
    v70 = 0;
  }
  v80 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470AE000 (0x1470AE000) ---

// --- Function: sub_1470AE770 (0x1470AE770) ---
__int64 __fastcall sub_1470AE770(__int64 a1, __int64 a2)
{
  __int64 v3; // rdi
  __int64 v4; // rcx
  unsigned __int64 v5; // r13
  volatile signed __int64 *v6; // rbx
  int v7; // edx
  int v8; // ecx
  __int64 v9; // r14
  __int64 v10; // rdx
  __int64 v11; // r15
  volatile signed __int64 *v12; // r12
  int v13; // edx
  _QWORD *v14; // rsi
  __int64 v15; // rdi
  _QWORD *v16; // rbx
  __int64 v17; // r12
  _DWORD *v18; // rbx
  __int64 v19; // rcx
  signed __int32 v20; // edi
  signed __int32 v21; // eax
  _DWORD *v22; // r15
  __int64 v23; // r14
  int v24; // edi
  _QWORD *v25; // rbx
  signed __int32 v26; // eax
  int v27; // r14d
  __int64 v28; // rcx
  _DWORD *v29; // rbx
  unsigned __int32 v30; // r14d
  signed __int64 v31; // rdx
  int v33; // edi
  _DWORD *v34; // r14
  unsigned __int32 v35; // edi
  volatile signed __int64 *v36; // [rsp+30h] [rbp-D0h]
  volatile signed __int64 *v37; // [rsp+38h] [rbp-C8h]
  __int128 v38; // [rsp+40h] [rbp-C0h] BYREF
  __int64 v39; // [rsp+50h] [rbp-B0h]
  int n2816_1; // [rsp+60h] [rbp-A0h] BYREF
  __int64 v41; // [rsp+64h] [rbp-9Ch]
  int v42; // [rsp+6Ch] [rbp-94h]
  __int64 v43; // [rsp+70h] [rbp-90h]
  unsigned __int64 v44; // [rsp+78h] [rbp-88h]
  __int64 v45; // [rsp+80h] [rbp-80h]
  __int64 v46; // [rsp+88h] [rbp-78h]
  __int128 v47; // [rsp+B0h] [rbp-50h] BYREF
  unsigned int v48; // [rsp+C0h] [rbp-40h]
  int n2816; // [rsp+D0h] [rbp-30h] BYREF
  __int64 v50; // [rsp+D4h] [rbp-2Ch]
  int v51; // [rsp+DCh] [rbp-24h]
  __int64 v52; // [rsp+E0h] [rbp-20h]
  unsigned __int64 v53; // [rsp+E8h] [rbp-18h]
  __int64 v54; // [rsp+F0h] [rbp-10h]
  __int64 v55; // [rsp+F8h] [rbp-8h]
  _BYTE v56[32]; // [rsp+120h] [rbp+20h] BYREF
  char v58; // [rsp+188h] [rbp+88h]

  n2816 = 2816;
  v50 = 0;
  v3 = a1;
  v51 = 0;
  v53 = 0;
  v54 = 0;
  v55 = 0;
  v52 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v4 = *(unsigned __int8 *)(a2 + 3);
  v5 = *(_QWORD *)(v3 + 72 * v4 + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(v3 + 2 * v4 + 10560336);
  if ( (*(_BYTE *)(v5 + 12) & 4) == 0 || (*(_WORD *)(v5 + 8) & 0x2000) == 0 )
    goto LABEL_48;
  v38 = 0;
  v39 = 0;
  v6 = (volatile signed __int64 *)(v3 + 8);
  v36 = (volatile signed __int64 *)(v3 + 8);
  *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v4) + 16) + (*(_WORD *)(v5 + 8) & 0xF) + 41LL) = 1;
  v58 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v58 )
  {
    if ( *(_DWORD *)(v3 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(v3 + 20);
    }
    else
    {
      v7 = _InterlockedIncrement64(v6);
      if ( (*(_QWORD *)&v7 & 0x200000LL) != 0 )
        sub_1403CD0A0(
          v3 + 8,
          v7,
          (unsigned int)"CZoneSystem::UpdateRenderingLocalBounds",
          (unsigned int)"m_GlobalStateLock",
          1);
    }
  }
  v8 = *(_DWORD *)(v5 + 16);
  v48 = 0;
  v47 = 0;
  if ( v8 == -1 )
  {
    v9 = 0;
    goto LABEL_15;
  }
  if ( (_WORD)v8 )
  {
    v10 = (unsigned __int16)v8;
    if ( *(_WORD *)(*(_QWORD *)(v3 + 10486016) + 8LL * (unsigned __int16)v8 + 6) != HIWORD(v8) )
    {
      v9 = 0;
      goto LABEL_15;
    }
  }
  else
  {
    v10 = 0;
  }
  v9 = *(_QWORD *)(*(_QWORD *)(v3 + 10486016) + 8 * v10) & 0xFFFFFFFFFFFFLL;
LABEL_15:
  sub_14705B980(v3, v56, v5);
  sub_1470A6B20(v9, v5, (unsigned int)v56, (unsigned int)&v47, (__int64)&v38);
  v11 = *(_WORD *)(v5 + 8) & 0xF;
  v12 = (volatile signed __int64 *)(v3 + 24 + 8 * v11);
  v37 = v12;
  v13 = _InterlockedIncrement64(v12);
  if ( (*(_QWORD *)&v13 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      v3 + 24 + 8 * v11,
      v13,
      (unsigned int)"CZoneSystem::UpdateRenderingLocalBounds",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  v14 = (_QWORD *)v47;
  if ( !(_QWORD)v47 )
    goto LABEL_41;
  n2816_1 = 2816;
  v41 = 0;
  v42 = 0;
  v44 = 0;
  v45 = 0;
  v46 = 0;
  v43 = 1;
  qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v15 = qword_15146BC68;
  if ( !*(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    v17 = 4 * v11 + 10485976;
    _InterlockedAdd((volatile signed __int32 *)(v17 + qword_15146BC68), v48);
    v18 = (_DWORD *)(v9 + 66224 * v11 + 1472);
    _m_prefetchw(v18 + 1);
    v19 = v18[1] | 1u;
    v20 = _InterlockedOr(v18 + 1, 1u);
    if ( (v20 & 1) != 0 )
    {
      while ( 1 )
      {
        v21 = _InterlockedCompareExchange(v18 + 1, v20 + 2, v20);
        if ( v20 == v21 )
          break;
        if ( (v21 & 1) != 0 )
        {
          v20 = v21;
        }
        else
        {
          _m_prefetchw(v18 + 1);
          v19 = v18[1] | 1u;
          v20 = _InterlockedOr(v18 + 1, 1u);
          if ( (v20 & 1) == 0 )
            goto LABEL_26;
        }
      }
      v33 = (unsigned __int16)v20 >> 1;
      v34 = &v18[4 * (v33 & 0xFFF) + 4];
      if ( (*v34 & 0x7FFF) != (((_WORD)v33 - 4096) & 0x7FFF) )
        sub_1470B7790(v18, &v18[4 * (v33 & 0xFFF) + 4]);
      *((_QWORD *)v34 + 1) = v14;
      v35 = _InterlockedExchange(v34 + 1, v33);
      if ( (v35 & 0xFFFF8000) != 0 )
        sub_1407E2F90(v18, v34 + 1, v35);
LABEL_39:
      v44 = __rdtsc();
      qword_149A05E08(&n2816_1);
      v12 = v37;
      goto LABEL_40;
    }
LABEL_26:
    *v18 = *(_DWORD *)(sub_1402C8360(v19) + 24);
    v22 = (_DWORD *)(v9 + 66224 * v11 + 1472);
    while ( 1 )
    {
      v23 = qword_15146BC68;
      v24 = 0;
      do
      {
        v25 = (_QWORD *)*v14;
        sub_14704B550(v23, v14);
        ++v24;
        v14 = v25;
      }
      while ( v25 );
      v26 = v22[1];
      v27 = v22[2] & 0x7FFF;
      if ( (unsigned __int16)v26 >> 1 != v27 )
        goto LABEL_32;
      *v22 = -1;
      v28 = v26 & 0xFFFFFFFE;
      if ( v26 != _InterlockedCompareExchange(v22 + 1, v28, v26) )
        break;
LABEL_36:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v17), -v24) == v24 )
        qword_1499F5478(v17 + qword_15146BC68);
      if ( !v14 )
        goto LABEL_39;
    }
    *v22 = *(_DWORD *)(sub_1402C8360(v28) + 24);
LABEL_32:
    ++v22[2];
    v29 = &v22[4 * (v27 & 0xFFF) + 4];
    if ( (v29[1] & 0x7FFF) != v27 )
      sub_1470B7790(v22, v29 + 1);
    v14 = (_QWORD *)*((_QWORD *)v29 + 1);
    v30 = _InterlockedExchange(v29, v27);
    if ( (v30 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v22, v29, v30);
    goto LABEL_36;
  }
  do
  {
    v16 = (_QWORD *)*v14;
    sub_14704B550(v15, v14);
    v14 = v16;
  }
  while ( v16 );
  v44 = __rdtsc();
  qword_149A05E08(&n2816_1);
LABEL_40:
  v6 = v36;
  v3 = a1;
LABEL_41:
  v31 = _InterlockedDecrement64(v12);
  if ( (v31 & 0x3FF) == 0 && (v31 & 0xFFFF0000FFC00000uLL) != 0 )
    sub_1403CD3A0(v12);
  if ( !v58 )
    sub_1402D42F0(v6);
  sub_14707E720(v3, *(_WORD *)(v5 + 8), (__int64 *)&v38);
  if ( (_QWORD)v38 )
  {
    sub_1403A4F10(&v38, v38, (v39 - v38) & 0xFFFFFFFFFFFFFFE0uLL);
    v38 = 0;
    v39 = 0;
  }
LABEL_48:
  v53 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470AE770 (0x1470AE770) ---

// --- Function: sub_1470AEE90 (0x1470AEE90) ---
__int64 __fastcall sub_1470AEE90(__int64 a1, __int64 a2, double *a3, int n2)
{
  __int64 _RDI; // r12
  __int64 *v8; // r13
  __int64 v9; // rcx
  unsigned __int64 v10; // rdi
  __int16 v11; // r14
  int v12; // ebx
  unsigned __int64 v13; // rdx
  int _RDI_1; // ecx
  __int64 v15; // r9
  __int64 v16; // rbx
  unsigned int v17; // r8d
  unsigned __int64 v18; // rcx
  double v19; // xmm5_8
  double v20; // xmm13_8
  double v21; // xmm4_8
  double v22; // xmm11_8
  double v23; // xmm10_8
  double v24; // xmm12_8
  double v25; // xmm9_8
  __int16 v26; // cx
  double *v27; // rcx
  double v28; // xmm8_8
  double v29; // xmm9_8
  double v32; // xmm6_8
  double v33; // kr00_8
  double v34; // xmm12_8
  double v35; // xmm7_8
  double v36; // xmm1_8
  double v37; // xmm5_8
  double v38; // xmm14_8
  double v39; // xmm15_8
  double v40; // xmm8_8
  double v41; // xmm9_8
  double v42; // xmm13_8
  double v43; // xmm11_8
  double v44; // xmm3_8
  double v45; // kr00_8
  double v46; // xmm12_8
  double v47; // kr00_8
  double v48; // xmm9_8
  double v49; // xmm11_8
  double v50; // xmm10_8
  double v51; // xmm8_8
  double v52; // xmm7_8
  double v53; // xmm6_8
  double v54; // xmm4_8
  double v55; // xmm3_8
  double v56; // xmm6_8
  double v57; // kr00_8
  double v58; // xmm3_8
  double v60; // [rsp+48h] [rbp-C0h]
  double v61; // [rsp+50h] [rbp-B8h]
  double v62; // [rsp+58h] [rbp-B0h]
  double v63; // [rsp+60h] [rbp-A8h]
  double v64; // [rsp+68h] [rbp-A0h]
  double v65; // [rsp+70h] [rbp-98h]
  double v66; // [rsp+78h] [rbp-90h]
  double v67; // [rsp+78h] [rbp-90h]
  double v68; // [rsp+80h] [rbp-88h]
  double v69; // [rsp+88h] [rbp-80h]
  double v70; // [rsp+90h] [rbp-78h]
  double v71; // [rsp+98h] [rbp-70h]
  __int128 v72; // [rsp+A0h] [rbp-68h] BYREF
  __int64 v73; // [rsp+B0h] [rbp-58h]
  __int128 v74; // [rsp+B8h] [rbp-50h] BYREF
  double v75; // [rsp+C8h] [rbp-40h]
  __int128 v76; // [rsp+D0h] [rbp-38h]
  double v77; // [rsp+E0h] [rbp-28h]
  double v78; // [rsp+E8h] [rbp-20h]
  int n2816; // [rsp+F8h] [rbp-10h] BYREF
  __int64 v80; // [rsp+FCh] [rbp-Ch]
  int v81; // [rsp+104h] [rbp-4h]
  __int64 v82; // [rsp+108h] [rbp+0h]
  unsigned __int64 v83; // [rsp+110h] [rbp+8h]
  __int64 v84; // [rsp+118h] [rbp+10h]
  __int64 v85; // [rsp+120h] [rbp+18h]
  __m256 v86; // [rsp+148h] [rbp+40h] BYREF
  __int128 v87; // [rsp+168h] [rbp+60h]
  __int64 v88; // [rsp+178h] [rbp+70h] BYREF
  double v89; // [rsp+180h] [rbp+78h]
  double v90; // [rsp+188h] [rbp+80h]
  double v91; // [rsp+190h] [rbp+88h]
  char v92; // [rsp+298h] [rbp+190h]
  int v93; // [rsp+2A0h] [rbp+198h]

  v93 = a2;
  _RDI = 0;
  n2816 = 2816;
  v80 = 0;
  v81 = 0;
  v83 = 0;
  v84 = 0;
  v85 = 0;
  v82 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v8 = 0;
  v9 = *(unsigned __int8 *)(a2 + 3);
  v10 = *(_QWORD *)(a1 + 72 * v9 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v9 + 10560336);
  v72 = 0;
  v73 = 0;
  v11 = *(_WORD *)(v10 + 8);
  if ( (v11 & 0x2000) != 0 )
  {
    v8 = (__int64 *)&v72;
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v9) + 16) + (v11 & 0xF) + 41LL) = 1;
  }
  v92 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v92 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v12 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v12 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v12, (unsigned int)"CZoneSystem::UpdateRotation", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v13 = v10 + 48;
  _RDI_1 = *(_DWORD *)(v10 + 16);
  v15 = 22LL * (*(_WORD *)(v10 + 8) & 0xF);
  v16 = v10 + 48 + *(unsigned __int16 *)(v15 + a1 + 10560346);
  if ( _RDI_1 != -1 )
  {
    if ( !(_WORD)_RDI_1
      || (_RDI = (unsigned __int16)_RDI_1,
          *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)_RDI_1 + 6) == HIWORD(_RDI_1)) )
    {
      _RDI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * _RDI) & 0xFFFFFFFFFFFFLL;
    }
    else
    {
      _RDI = 0;
    }
  }
  if ( (*(_WORD *)(v10 + 8) & 0x4000) != 0 )
  {
    v17 = dword_149A0A48C;
    v18 = v13 + *(unsigned __int16 *)(v15 + a1 + 10560366);
    if ( *(_DWORD *)(v18 + 64) != dword_149A0A48C )
    {
      *(_QWORD *)v18 = *(_QWORD *)v16;
      *(_QWORD *)(v18 + 8) = *(_QWORD *)(v16 + 8);
      *(_QWORD *)(v18 + 16) = *(_QWORD *)(v16 + 16);
      *(_QWORD *)(v18 + 24) = *(_QWORD *)(v16 + 24);
      *(_OWORD *)(v18 + 32) = *(_OWORD *)(v16 + 32);
      *(double *)(v18 + 48) = *(double *)(v16 + 48);
      *(_QWORD *)(v18 + 56) = *(_QWORD *)(v16 + 56);
      *(_DWORD *)(v18 + 64) = v17;
    }
  }
  if ( n2 == 2 )
  {
    v19 = *a3;
    v20 = a3[1];
    v21 = a3[2];
    v22 = a3[3];
    v65 = *a3;
  }
  else
  {
    CZone::GetInvertedTransform_ws(_RDI, (__int64)&v88, dword_149A0A48C);
    v23 = a3[1];
    v24 = a3[2];
    v25 = a3[3];
    v65 = v89 * v24 - v90 * v23 + v91 * *a3 + *(double *)&v88 * v25;
    v20 = v90 * *a3 - *(double *)&v88 * v24 + v91 * v23 + v89 * v25;
    v21 = *(double *)&v88 * v23 - v89 * *a3 + v91 * v24 + v90 * v25;
    v19 = v65;
    v22 = v91 * v25 - (v89 * v23 + *(double *)&v88 * *a3 + v90 * v24);
    v13 = v10 + 48;
  }
  *(double *)v16 = v19;
  *(double *)(v16 + 8) = v20;
  *(double *)(v16 + 16) = v21;
  *(double *)(v16 + 24) = v22;
  v26 = *(_WORD *)(v10 + 8);
  v71 = v22;
  v64 = v21;
  v70 = v20;
  if ( (v26 & 0x20) != 0 )
  {
    v27 = (double *)(v13 + *(unsigned __int16 *)(22LL * (v26 & 0xF) + a1 + 10560348));
    v29 = v27[3];
    v69 = *v27;
    v61 = v27[1];
    v63 = v27[2];
    v68 = v29;
    v60 = v27[4];
    v62 = v27[5];
    *(double *)&v74 = *v27;
    v28 = *(double *)&v74;
    *((double *)&v74 + 1) = v61;
    v75 = v63;
    *(double *)&v76 = v29;
    *((double *)&v76 + 1) = v60;
    v77 = v62;
    if ( *(double *)&v74 > v29 )
    {
      __asm
      {
        vmovupd ymm0, cs:ymmword_1480EFCC0
        vmovupd xmm1, cs:xmmword_1480EFC60
        vmovupd [rbp+180h+var_140], ymm0
        vmovupd [rbp+180h+var_120], xmm1
      }
      goto LABEL_24;
    }
  }
  else
  {
    v28 = -0.0;
    v29 = 0.0;
    v69 = -0.0;
    v75 = -0.0;
    v77 = 0.0;
    v62 = 0.0;
    v60 = 0.0;
    v68 = 0.0;
    v63 = -0.0;
    v61 = -0.0;
    v74 = xmmword_1480E0780;
    v76 = 0;
  }
  v32 = (v21 + v21) * v21;
  v33 = v19 * (v21 + v21);
  v34 = v22 * (v20 + v20);
  v35 = v19 * (v20 + v20);
  v36 = v19 + v19;
  v66 = 1.0 - v19 * (v19 + v19);
  v37 = v22 * (v21 + v21);
  v38 = v22 * v36;
  v39 = v20 * (v20 + v20);
  v40 = (v29 - v28) * 0.5;
  v41 = (v60 - v61) * 0.5;
  v42 = v20 * (v21 + v21);
  v43 = (v62 - v63) * 0.5;
  v44 = v66;
  v78 = (fabs(1.0 - v39 - v32) * v40 + fabs(v35 - v37) * v41 + fabs(v33 + v34) * v43) * *(double *)(v16 + 56);
  v67 = (fabs(v37 + v35) * v40 + fabs(v66 - v32) * v41 + fabs(v42 - v38) * v43) * *(double *)(v16 + 56);
  v45 = v33 - v34;
  v46 = *(double *)(v16 + 56);
  v47 = COERCE_DOUBLE(*(_QWORD *)&v45 & 0x7FFFFFFFFFFFFFFFLL) * v40 + fabs(v42 + v38) * v41 + fabs(v44 - v39) * v43;
  v48 = (v60 + v61) * 0.5;
  v49 = v47 * v46;
  v50 = (v62 + v63) * 0.5;
  v51 = (v68 + v69) * 0.5;
  v52 = v70 * v50 - v48 * v21 + v71 * v51;
  v53 = v21 * v51 - v65 * v50 + v48 * v71;
  v54 = v48 * v65 - v70 * v51 + v71 * v50;
  v55 = v65 * v53 - v70 * v52;
  v56 = (v51 + v70 * v54 - v64 * v53 + v70 * v54 - v64 * v53) * v46 + *(double *)(v16 + 32);
  v57 = (v48 + v64 * v52 - v65 * v54 + v64 * v52 - v65 * v54) * v46 + *(double *)(v16 + 40);
  v58 = (v50 + v55 + v55) * v46 + *(double *)(v16 + 48);
  *(double *)&v86.m256_f32[2] = v57 - v67;
  *(double *)v86.m256_f32 = v56 - v78;
  *(double *)&v86.m256_f32[4] = v58 - v49;
  *(double *)&v86.m256_f32[6] = v56 + v78;
  *(double *)&v87 = v57 + v67;
  *((double *)&v87 + 1) = v49 + v58;
LABEL_24:
  __asm { vzeroupper }
  sub_1470A7D70(a1, v10, v93, _RDI, v16, (__int64)&v74, (__int64)&v86, (__int64)v8);
  if ( !v92 )
    sub_1402D42F0(a1 + 8);
  if ( v8 )
    sub_14707E720(a1, *(_WORD *)(v10 + 8), v8);
  if ( (_QWORD)v72 )
  {
    sub_1403A4F10(&v72, v72, (v73 - v72) & 0xFFFFFFFFFFFFFFE0uLL);
    v72 = 0;
    v73 = 0;
  }
  v83 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470AEE90 (0x1470AEE90) ---

// --- Function: sub_1470AF6A0 (0x1470AF6A0) ---
__int64 __fastcall sub_1470AF6A0(__int64 a1, __int64 a2, double a3)
{
  __int128 v3; // xmm10
  __int64 *v6; // r15
  __int64 v7; // rcx
  unsigned __int64 v8; // rbx
  __int16 v9; // si
  char v10; // r13
  int v11; // r14d
  unsigned __int64 v12; // r8
  int v13; // ecx
  __int64 v14; // r11
  __int64 v15; // rdx
  __int64 v16; // r9
  __int64 v17; // r9
  unsigned int v18; // r10d
  unsigned __int64 v19; // rcx
  __int16 v20; // cx
  double *v21; // rcx
  double v22; // xmm9_8
  double v23; // xmm11_8
  double v26; // xmm6_8
  double v27; // xmm5_8
  double v28; // xmm8_8
  double v29; // xmm0_8
  double v30; // xmm7_8
  double v31; // kr00_8
  double v32; // xmm12_8
  double v33; // xmm13_8
  double v34; // xmm14_8
  double v35; // xmm15_8
  double v36; // xmm6_8
  double v37; // xmm5_8
  double v38; // xmm8_8
  double v39; // xmm11_8
  double v40; // xmm9_8
  double v41; // xmm3_8
  double v42; // kr00_8
  double v43; // xmm8_8
  double v44; // xmm11_8
  double v45; // xmm13_8
  double v46; // xmm12_8
  double v47; // xmm4_8
  double v48; // xmm9_8
  double v49; // kr00_8
  double v50; // xmm7_8
  double v51; // xmm6_8
  double v52; // xmm4_8
  double v53; // xmm3_8
  double v54; // xmm6_8
  double v55; // xmm5_8
  double v56; // xmm4_8
  double v58; // [rsp+48h] [rbp-C0h]
  double v59; // [rsp+50h] [rbp-B8h]
  double v60; // [rsp+58h] [rbp-B0h]
  double v61; // [rsp+58h] [rbp-B0h]
  double v62; // [rsp+60h] [rbp-A8h]
  double v63; // [rsp+68h] [rbp-A0h]
  __int128 v64; // [rsp+70h] [rbp-98h] BYREF
  __int64 v65; // [rsp+80h] [rbp-88h]
  __int128 v66; // [rsp+88h] [rbp-80h] BYREF
  double v67; // [rsp+98h] [rbp-70h]
  __int128 v68; // [rsp+A0h] [rbp-68h]
  double v69; // [rsp+B0h] [rbp-58h]
  double v70; // [rsp+B8h] [rbp-50h]
  int n2816; // [rsp+C8h] [rbp-40h] BYREF
  __int64 v72; // [rsp+CCh] [rbp-3Ch]
  int v73; // [rsp+D4h] [rbp-34h]
  __int64 v74; // [rsp+D8h] [rbp-30h]
  unsigned __int64 v75; // [rsp+E0h] [rbp-28h]
  __int64 v76; // [rsp+E8h] [rbp-20h]
  __int64 v77; // [rsp+F0h] [rbp-18h]
  __m256 v78; // [rsp+118h] [rbp+10h] BYREF
  __int128 v79; // [rsp+138h] [rbp+30h]
  __int128 v80; // [rsp+198h] [rbp+90h]
  double v81; // [rsp+228h] [rbp+120h]
  double v82; // [rsp+230h] [rbp+128h]

  v74 = 1;
  n2816 = 2816;
  v72 = 0;
  v73 = 0;
  v75 = 0;
  v76 = 0;
  v77 = 0;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v6 = 0;
  v7 = *(unsigned __int8 *)(a2 + 3);
  v8 = *(_QWORD *)(a1 + 72 * v7 + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v7 + 10560336);
  v64 = 0;
  v65 = 0;
  v9 = *(_WORD *)(v8 + 8);
  if ( (v9 & 0x2000) != 0 )
  {
    v6 = (__int64 *)&v64;
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v7) + 16) + (v9 & 0xF) + 41LL) = 1;
  }
  v10 = *(_BYTE *)(*((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex) + 2544LL);
  if ( !v10 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v11 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 8));
      if ( (*(_QWORD *)&v11 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v11, (unsigned int)"CZoneSystem::UpdateScale", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v12 = v8 + 48;
  v13 = *(_DWORD *)(v8 + 16);
  v14 = 22LL * (*(_WORD *)(v8 + 8) & 0xF);
  v15 = v8 + 48 + *(unsigned __int16 *)(v14 + a1 + 10560346);
  if ( v13 != -1 )
  {
    if ( (_WORD)v13 )
    {
      v17 = (unsigned __int16)v13;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v13 + 6) != HIWORD(v13) )
      {
        LODWORD(v16) = 0;
        goto LABEL_15;
      }
    }
    else
    {
      v17 = 0;
    }
    v16 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v17) & 0xFFFFFFFFFFFFLL;
    goto LABEL_15;
  }
  LODWORD(v16) = 0;
LABEL_15:
  if ( (*(_WORD *)(v8 + 8) & 0x4000) != 0 )
  {
    v18 = dword_149A0A48C;
    v19 = v12 + *(unsigned __int16 *)(v14 + a1 + 10560366);
    if ( *(_DWORD *)(v19 + 64) != dword_149A0A48C )
    {
      *(_QWORD *)v19 = *(_QWORD *)v15;
      *(_QWORD *)(v19 + 8) = *(_QWORD *)(v15 + 8);
      *(_QWORD *)(v19 + 16) = *(_QWORD *)(v15 + 16);
      *(_QWORD *)(v19 + 24) = *(_QWORD *)(v15 + 24);
      *(_OWORD *)(v19 + 32) = *(_OWORD *)(v15 + 32);
      *(double *)(v19 + 48) = *(double *)(v15 + 48);
      *(_QWORD *)(v19 + 56) = *(_QWORD *)(v15 + 56);
      *(_DWORD *)(v19 + 64) = v18;
    }
  }
  *(double *)(v15 + 56) = a3;
  v20 = *(_WORD *)(v8 + 8);
  if ( (v20 & 0x20) != 0 )
  {
    v21 = (double *)(v12 + *(unsigned __int16 *)(22LL * (v20 & 0xF) + a1 + 10560348));
    v23 = v21[3];
    v63 = *v21;
    v81 = v21[1];
    v59 = v21[2];
    v62 = v23;
    v82 = v21[4];
    v58 = v21[5];
    *(double *)&v66 = *v21;
    v22 = *(double *)&v66;
    *((double *)&v66 + 1) = v81;
    v67 = v59;
    *(double *)&v68 = v23;
    *((double *)&v68 + 1) = v82;
    v69 = v58;
    if ( *(double *)&v66 > v23 )
    {
      __asm
      {
        vmovupd ymm0, cs:ymmword_1480EFCC0
        vmovupd xmm1, cs:xmmword_1480EFC60
        vmovupd [rbp+110h+var_100], ymm0
        vmovupd [rbp+110h+var_E0], xmm1
      }
      goto LABEL_23;
    }
  }
  else
  {
    v22 = -0.0;
    v23 = 0.0;
    v63 = -0.0;
    v67 = -0.0;
    v69 = 0.0;
    v58 = 0.0;
    v82 = 0.0;
    v62 = 0.0;
    v59 = -0.0;
    v81 = -0.0;
    v66 = xmmword_1480E0780;
    v68 = 0;
  }
  v26 = *(double *)(v15 + 8);
  v27 = *(double *)(v15 + 16);
  v28 = *(double *)v15;
  v60 = 1.0 - (v28 + v28) * v28;
  v29 = *(double *)(v15 + 24);
  v80 = v3;
  v30 = (v26 + v26) * v28;
  v31 = (v27 + v27) * v28;
  v32 = v29 * (v26 + v26);
  v33 = (v27 + v27) * v26;
  v34 = v29 * (v28 + v28);
  v35 = (v26 + v26) * v26;
  v36 = (v27 + v27) * v27;
  v37 = v29 * (v27 + v27);
  v38 = (v23 - v22) * 0.5;
  v39 = (v58 - v59) * 0.5;
  v40 = (v82 - v81) * 0.5;
  v41 = v60;
  v70 = (fabs(1.0 - v35 - v36) * v38 + fabs(v30 - v37) * v40 + fabs(v31 + v32) * v39) * a3;
  v61 = (fabs(v37 + v30) * v38 + fabs(v60 - v36) * v40 + fabs(v33 - v34) * v39) * a3;
  v42 = fabs(v31 - v32) * v38 + fabs(v33 + v34) * v40 + fabs(v41 - v35) * v39;
  v43 = (v62 + v63) * 0.5;
  v44 = v42 * a3;
  v45 = *(double *)(v15 + 8);
  v46 = *(double *)(v15 + 16);
  v47 = *(double *)(v15 + 24);
  v48 = (v81 + v82) * 0.5;
  v49 = (v58 + v59) * 0.5;
  v50 = v49 * v45 - v46 * v48 + v47 * v43;
  v51 = v46 * v43 - v49 * *(double *)v15 + v47 * v48;
  v52 = *(double *)v15 * v48 - v45 * v43 + v47 * v49;
  v53 = *(double *)v15 * v51 - v45 * v50;
  v54 = (v43 + v45 * v52 - v46 * v51 + v45 * v52 - v46 * v51) * a3 + *(double *)(v15 + 32);
  v55 = (v48 + v46 * v50 - *(double *)v15 * v52 + v46 * v50 - *(double *)v15 * v52) * a3 + *(double *)(v15 + 40);
  v56 = (v49 + v53 + v53) * a3 + *(double *)(v15 + 48);
  *(double *)&v78.m256_f32[2] = v55 - v61;
  *(double *)v78.m256_f32 = v54 - v70;
  *(double *)&v78.m256_f32[4] = v56 - v44;
  *(double *)&v78.m256_f32[6] = v54 + v70;
  *(double *)&v79 = v55 + v61;
  *((double *)&v79 + 1) = v44 + v56;
LABEL_23:
  __asm { vzeroupper }
  sub_1470A7D70(a1, v8, a2, v16, v15, (__int64)&v66, (__int64)&v78, (__int64)v6);
  if ( !v10 )
    sub_1402D42F0(a1 + 8);
  if ( v6 )
    sub_14707E720(a1, *(_WORD *)(v8 + 8), v6);
  if ( (_QWORD)v64 )
  {
    sub_1403A4F10(&v64, v64, (v65 - v64) & 0xFFFFFFFFFFFFFFE0uLL);
    v64 = 0;
    v65 = 0;
  }
  v75 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470AF6A0 (0x1470AF6A0) ---

// --- Function: sub_1470B1210 (0x1470B1210) ---
__int64 __fastcall sub_1470B1210(__int64 a1, __int64 a2, __int64 a3, int a4)
{
  __int64 v8; // rcx
  unsigned __int64 v9; // rbx
  __int16 v10; // r14
  __int128 v12; // [rsp+30h] [rbp-39h] BYREF
  __int64 v13; // [rsp+40h] [rbp-29h]
  int n2816; // [rsp+50h] [rbp-19h] BYREF
  __int64 v15; // [rsp+54h] [rbp-15h]
  int v16; // [rsp+5Ch] [rbp-Dh]
  __int64 v17; // [rsp+60h] [rbp-9h]
  unsigned __int64 v18; // [rsp+68h] [rbp-1h]
  __int64 v19; // [rsp+70h] [rbp+7h]
  __int64 v20; // [rsp+78h] [rbp+Fh]

  n2816 = 2816;
  v15 = 0;
  v16 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v17 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v8 = *(unsigned __int8 *)(a2 + 3);
  v9 = *(_QWORD *)(a1 + 72 * v8 + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v8 + 10560336);
  v12 = 0;
  v13 = 0;
  v10 = *(_WORD *)(v9 + 8);
  if ( (v10 & 0x2000) != 0 )
  {
    *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v8) + 16) + (v10 & 0xF) + 41LL) = 1;
    sub_1470B1F00(a1, v9, a2, a3, a4, &v12);
    sub_14707E720(a1, *(_WORD *)(v9 + 8), (__int64 *)&v12);
  }
  else
  {
    sub_1470B1F00(a1, v9, a2, a3, a4, 0);
  }
  if ( (_QWORD)v12 )
  {
    sub_1403A4F10(&v12, v12, (v13 - v12) & 0xFFFFFFFFFFFFFFE0uLL);
    v12 = 0;
    v13 = 0;
  }
  v18 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470B1210 (0x1470B1210) ---

// --- Function: sub_1470B1390 (0x1470B1390) ---
__int64 __fastcall sub_1470B1390(__int64 a1, __int64 a2, __int64 a3, int a4, __int64 a5)
{
  __int64 v9; // rcx
  unsigned __int64 v10; // rbx
  __int16 v11; // r12
  __int128 v13; // [rsp+30h] [rbp-41h] BYREF
  __int64 v14; // [rsp+40h] [rbp-31h]
  int n2816; // [rsp+50h] [rbp-21h] BYREF
  __int64 v16; // [rsp+54h] [rbp-1Dh]
  int v17; // [rsp+5Ch] [rbp-15h]
  __int64 v18; // [rsp+60h] [rbp-11h]
  unsigned __int64 v19; // [rsp+68h] [rbp-9h]
  __int64 v20; // [rsp+70h] [rbp-1h]
  __int64 v21; // [rsp+78h] [rbp+7h]

  n2816 = 2816;
  v16 = 0;
  v17 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  v18 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v9 = *(unsigned __int8 *)(a2 + 3);
  v10 = *(_QWORD *)(a1 + 72 * v9 + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF) * (unsigned __int64)*(unsigned __int16 *)(a1 + 2 * v9 + 10560336);
  v13 = 0;
  v14 = 0;
  v11 = *(_WORD *)(v10 + 8);
  if ( (v11 & 0x2000) != 0 )
  {
    if ( a5 )
    {
      sub_1470B1F00(a1, v10, a2, a3, a4, a5);
    }
    else
    {
      *(_BYTE *)(*(_QWORD *)(sub_1402C8360(v9) + 16) + (v11 & 0xF) + 41LL) = 1;
      sub_1470B1F00(a1, v10, a2, a3, a4, &v13);
      sub_14707E720(a1, *(_WORD *)(v10 + 8), (__int64 *)&v13);
    }
  }
  else
  {
    sub_1470B1F00(a1, v10, a2, a3, a4, 0);
  }
  if ( (_QWORD)v13 )
  {
    sub_1403A4F10(&v13, v13, (v14 - v13) & 0xFFFFFFFFFFFFFFE0uLL);
    v13 = 0;
    v14 = 0;
  }
  v19 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470B1390 (0x1470B1390) ---

// --- Function: sub_1470B3CA0 (0x1470B3CA0) ---
__int64 __fastcall sub_1470B3CA0(__int64 a1, __int64 a2, float a3)
{
  __int64 v3; // r13
  __int64 v6; // rbp
  int v7; // edx
  unsigned __int64 v8; // rbx
  int v9; // ecx
  __int64 v10; // r14
  __int64 v11; // rdx
  __int64 v12; // rbp
  __int64 v13; // rsi
  __int64 v14; // r12
  volatile signed __int64 *v15; // rbp
  int v16; // edx
  __int64 v17; // rdi
  __int64 v18; // rbx
  __int64 result; // rax
  _DWORD *v20; // rbx
  __int64 v21; // rcx
  signed __int32 v22; // edi
  signed __int32 v23; // eax
  _DWORD *v24; // r14
  __int64 v25; // rbp
  int v26; // edi
  __int64 v27; // rbx
  signed __int32 v28; // eax
  int v29; // ebp
  __int64 v30; // rcx
  int v31; // edi
  _DWORD *v32; // r14
  unsigned __int32 v33; // edi
  _DWORD *v34; // rbx
  unsigned __int32 v35; // ebp
  signed __int64 v36; // rdx
  int n2816; // [rsp+30h] [rbp-98h] BYREF
  __int64 v38; // [rsp+34h] [rbp-94h]
  int v39; // [rsp+3Ch] [rbp-8Ch]
  __int64 v40; // [rsp+40h] [rbp-88h]
  unsigned __int64 v41; // [rsp+48h] [rbp-80h]
  __int64 v42; // [rsp+50h] [rbp-78h]
  __int64 v43; // [rsp+58h] [rbp-70h]
  volatile signed __int64 *v44; // [rsp+D8h] [rbp+10h]
  char v45; // [rsp+E0h] [rbp+18h]

  v3 = a1 + 8;
  v6 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v45 = *(_BYTE *)(v6 + 2544);
  if ( !v45 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360(a1) + 24) )
    {
      ++*(_DWORD *)(v3 + 12);
    }
    else
    {
      v7 = _InterlockedIncrement64((volatile signed __int64 *)v3);
      if ( (*(_QWORD *)&v7 & 0x200000LL) != 0 )
        sub_1403CD0A0(
          v3,
          v7,
          (unsigned int)"CZoneSystem::UpdateViewDistanceRatio",
          (unsigned int)"m_GlobalStateLock",
          1);
    }
  }
  v8 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
     + (*(_DWORD *)a2 & 0xFFFFFF)
     * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v9 = *(_DWORD *)(v8 + 16);
  if ( v9 == -1 )
  {
    v10 = 0;
    goto LABEL_13;
  }
  if ( (_WORD)v9 )
  {
    v11 = (unsigned __int16)v9;
    if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v9 + 6) != HIWORD(v9) )
    {
      v10 = 0;
      goto LABEL_13;
    }
  }
  else
  {
    v11 = 0;
  }
  v10 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v11) & 0xFFFFFFFFFFFFLL;
LABEL_13:
  v12 = v6 + 2640;
  *(float *)(*(unsigned __int16 *)(22LL * (*(_WORD *)(v8 + 8) & 0xF) + a1 + 10560354) + v8 + 48) = a3;
  v13 = sub_1403E4B00(v12);
  if ( !v13 )
    v13 = allocWithProfilerInfo(0x28u, 0);
  *(_QWORD *)(v13 + 16) = v12;
  *(float *)(v13 + 32) = a3;
  *(_QWORD *)v13 = 0;
  *(_BYTE *)(v13 + 24) = 5;
  *(_QWORD *)(v13 + 8) = v8;
  v14 = *(_WORD *)(v8 + 8) & 0xF;
  v15 = (volatile signed __int64 *)(a1 + 24 + 8 * v14);
  v44 = v15;
  v16 = _InterlockedIncrement64(v15);
  if ( (*(_QWORD *)&v16 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      a1 + 24 + 8 * v14,
      v16,
      (unsigned int)"CZoneSystem::UpdateViewDistanceRatio",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  n2816 = 2816;
  v38 = 0;
  v39 = 0;
  v41 = 0;
  v42 = 0;
  v43 = 0;
  v40 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v17 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v18 = *(_QWORD *)v13;
      sub_14704B550(v17, v13);
      v13 = v18;
    }
    while ( v18 );
    goto LABEL_19;
  }
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v14 + 10485976));
  v20 = (_DWORD *)(v10 + 66224 * v14 + 1472);
  _m_prefetchw(v20 + 1);
  v21 = v20[1] | 1u;
  v22 = _InterlockedOr(v20 + 1, 1u);
  if ( (v22 & 1) == 0 )
  {
LABEL_25:
    *v20 = *(_DWORD *)(sub_1402C8360(v21) + 24);
    v24 = (_DWORD *)(66224 * v14 + 1472 + v10);
    while ( 1 )
    {
      v25 = qword_15146BC68;
      v26 = 0;
      if ( v13 )
      {
        do
        {
          v27 = *(_QWORD *)v13;
          sub_14704B550(v25, v13);
          ++v26;
          v13 = v27;
        }
        while ( v27 );
      }
      v28 = v24[1];
      v29 = v24[2] & 0x7FFF;
      if ( (unsigned __int16)v28 >> 1 != v29 )
        goto LABEL_36;
      *v24 = -1;
      v30 = v28 & 0xFFFFFFFE;
      if ( v28 != _InterlockedCompareExchange(v24 + 1, v30, v28) )
        break;
      v13 = 0;
LABEL_40:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 4 * v14 + 10485976), -v26) == v26 )
        qword_1499F5478(qword_15146BC68 + 10485976 + 4 * v14);
      if ( !v13 )
      {
        v41 = __rdtsc();
        result = qword_149A05E08(&n2816);
        v15 = v44;
        goto LABEL_44;
      }
    }
    *v24 = *(_DWORD *)(sub_1402C8360(v30) + 24);
LABEL_36:
    ++v24[2];
    v34 = &v24[4 * (v29 & 0xFFF) + 4];
    if ( (v34[1] & 0x7FFF) != v29 )
      sub_1470B7790(v24, v34 + 1);
    v13 = *((_QWORD *)v34 + 1);
    v35 = _InterlockedExchange(v34, v29);
    if ( (v35 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v24, v34, v35);
    goto LABEL_40;
  }
  while ( 1 )
  {
    v23 = _InterlockedCompareExchange(v20 + 1, v22 + 2, v22);
    if ( v22 == v23 )
      break;
    if ( (v23 & 1) != 0 )
    {
      v22 = v23;
    }
    else
    {
      _m_prefetchw(v20 + 1);
      v21 = v20[1] | 1u;
      v22 = _InterlockedOr(v20 + 1, 1u);
      if ( (v22 & 1) == 0 )
        goto LABEL_25;
    }
  }
  v31 = (unsigned __int16)v22 >> 1;
  v32 = &v20[4 * (v31 & 0xFFF) + 4];
  if ( (*v32 & 0x7FFF) != (((_WORD)v31 - 4096) & 0x7FFF) )
    sub_1470B7790(v20, &v20[4 * (v31 & 0xFFF) + 4]);
  *((_QWORD *)v32 + 1) = v13;
  v33 = _InterlockedExchange(v32 + 1, v31);
  if ( (v33 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v20, v32 + 1, v33);
LABEL_19:
  v41 = __rdtsc();
  result = qword_149A05E08(&n2816);
LABEL_44:
  v36 = _InterlockedDecrement64(v15);
  if ( (v36 & 0x3FF) == 0 )
  {
    result = 0xFFFF0000FFC00000uLL;
    if ( (v36 & 0xFFFF0000FFC00000uLL) != 0 )
      result = sub_1403CD3A0(v15);
  }
  if ( !v45 )
    return sub_1402D42F0(v3);
  return result;
}

// --- End Function: sub_1470B3CA0 (0x1470B3CA0) ---

// --- Function: sub_1470B50C0 (0x1470B50C0) ---
__int64 __fastcall sub_1470B50C0(__int64 a1, __int64 a2, __int64 a3)
{
  __int64 v3; // r13
  volatile signed __int64 *v7; // r12
  __int64 v8; // r15
  int v9; // edx
  unsigned __int64 v10; // rbx
  int v11; // ecx
  __int64 v12; // rdx
  int v13; // r9d
  __int64 v14; // r10
  __int64 v15; // rdi
  __int64 v16; // r15
  __int64 v17; // rsi
  __int64 v18; // r15
  volatile signed __int64 *v19; // r14
  int v20; // edx
  __int64 v21; // rdi
  __int64 v22; // rbx
  __int64 v23; // r12
  _DWORD *v24; // rbx
  __int64 v25; // rcx
  signed __int32 v26; // edi
  signed __int32 v27; // eax
  _DWORD *v28; // r15
  __int64 v29; // r14
  int v30; // edi
  int v31; // edi
  _DWORD *v32; // r14
  unsigned __int32 v33; // edi
  __int64 v34; // rbx
  signed __int32 v35; // eax
  int v36; // r14d
  __int64 v37; // rcx
  _DWORD *v38; // rbx
  unsigned __int32 v39; // r14d
  signed __int64 v40; // rdx
  int n2816_1; // [rsp+30h] [rbp-89h] BYREF
  __int64 v43; // [rsp+34h] [rbp-85h]
  int v44; // [rsp+3Ch] [rbp-7Dh]
  __int64 v45; // [rsp+40h] [rbp-79h]
  unsigned __int64 v46; // [rsp+48h] [rbp-71h]
  __int64 v47; // [rsp+50h] [rbp-69h]
  __int64 v48; // [rsp+58h] [rbp-61h]
  int n2816; // [rsp+80h] [rbp-39h] BYREF
  __int64 v50; // [rsp+84h] [rbp-35h]
  int v51; // [rsp+8Ch] [rbp-2Dh]
  __int64 v52; // [rsp+90h] [rbp-29h]
  unsigned __int64 v53; // [rsp+98h] [rbp-21h]
  __int64 v54; // [rsp+A0h] [rbp-19h]
  __int64 v55; // [rsp+A8h] [rbp-11h]
  char v56; // [rsp+120h] [rbp+67h]
  volatile signed __int64 *v57; // [rsp+130h] [rbp+77h]
  volatile signed __int64 *v58; // [rsp+138h] [rbp+7Fh]

  v3 = 0;
  n2816 = 2816;
  v50 = 0;
  v51 = 0;
  v53 = 0;
  v54 = 0;
  v55 = 0;
  v52 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v7 = (volatile signed __int64 *)(a1 + 8);
  v58 = (volatile signed __int64 *)(a1 + 8);
  v8 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v56 = *(_BYTE *)(v8 + 2544);
  if ( !v56 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v9 = _InterlockedIncrement64(v7);
      if ( (*(_QWORD *)&v9 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v9, (unsigned int)"CZoneSystem::UpdateVisAreaMode", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v10 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF)
      * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  v11 = *(_DWORD *)(v10 + 16);
  if ( v11 != -1 )
  {
    if ( (_WORD)v11 )
    {
      v12 = (unsigned __int16)v11;
      if ( *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)v11 + 6) != HIWORD(v11) )
        goto LABEL_12;
    }
    else
    {
      v12 = 0;
    }
    v3 = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * v12) & 0xFFFFFFFFFFFFLL;
  }
LABEL_12:
  v13 = *(_DWORD *)(a3 + 96);
  if ( (_WORD)v13 )
  {
    v14 = (unsigned __int16)v13;
    if ( *(_WORD *)(2896LL * (unsigned __int16)v13 + *(_QWORD *)(v3 + 480) + 2848) != HIWORD(v13) )
    {
      v15 = 0;
      goto LABEL_17;
    }
  }
  else
  {
    v14 = 0;
  }
  v15 = *(_QWORD *)(v3 + 480) + 2896 * v14;
LABEL_17:
  *(_WORD *)(v10 + 10) = v13;
  v16 = v8 + 2608;
  v17 = sub_1403E4B00(v16);
  if ( !v17 )
    v17 = allocWithProfilerInfo(0x28u, 0);
  *(_QWORD *)(v17 + 16) = v16;
  *(_QWORD *)v17 = 0;
  *(_BYTE *)(v17 + 24) = 3;
  *(_QWORD *)(v17 + 8) = v10;
  *(_QWORD *)(v17 + 32) = v15;
  v18 = *(_WORD *)(v10 + 8) & 0xF;
  v19 = (volatile signed __int64 *)(a1 + 8 * v18 + 24);
  v57 = v19;
  v20 = _InterlockedIncrement64(v19);
  if ( (*(_QWORD *)&v20 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      (_DWORD)v19,
      v20,
      (unsigned int)"CZoneSystem::UpdateVisAreaMode",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  n2816_1 = 2816;
  v43 = 0;
  v44 = 0;
  v46 = 0;
  v47 = 0;
  v48 = 0;
  v45 = 1;
  qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v21 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v22 = *(_QWORD *)v17;
      sub_14704B550(v21, v17);
      v17 = v22;
    }
    while ( v22 );
    v46 = __rdtsc();
    qword_149A05E08(&n2816_1);
    goto LABEL_50;
  }
  v23 = 4 * v18 + 10485976;
  _InterlockedIncrement((volatile signed __int32 *)(v23 + qword_15146BC68));
  v24 = (_DWORD *)(v3 + 66224 * v18 + 1472);
  _m_prefetchw(v24 + 1);
  v25 = v24[1] | 1u;
  v26 = _InterlockedOr(v24 + 1, 1u);
  if ( (v26 & 1) == 0 )
  {
LABEL_29:
    *v24 = *(_DWORD *)(sub_1402C8360(v25) + 24);
    v28 = (_DWORD *)(v3 + 66224 * v18 + 1472);
    while ( 1 )
    {
      v29 = qword_15146BC68;
      if ( v17 )
      {
        v30 = 0;
        do
        {
          v34 = *(_QWORD *)v17;
          sub_14704B550(v29, v17);
          ++v30;
          v17 = v34;
        }
        while ( v34 );
      }
      else
      {
        v30 = 0;
      }
      v35 = v28[1];
      v36 = v28[2] & 0x7FFF;
      if ( (unsigned __int16)v35 >> 1 != v36 )
        goto LABEL_42;
      *v28 = -1;
      v37 = v35 & 0xFFFFFFFE;
      if ( v35 != _InterlockedCompareExchange(v28 + 1, v37, v35) )
        break;
      v17 = 0;
LABEL_46:
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + v23), -v30) == v30 )
        qword_1499F5478(v23 + qword_15146BC68);
      if ( !v17 )
        goto LABEL_49;
    }
    *v28 = *(_DWORD *)(sub_1402C8360(v37) + 24);
LABEL_42:
    ++v28[2];
    v38 = &v28[4 * (v36 & 0xFFF) + 4];
    if ( (v38[1] & 0x7FFF) != v36 )
      sub_1470B7790(v28, v38 + 1);
    v17 = *((_QWORD *)v38 + 1);
    v39 = _InterlockedExchange(v38, v36);
    if ( (v39 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v28, v38, v39);
    goto LABEL_46;
  }
  while ( 1 )
  {
    v27 = _InterlockedCompareExchange(v24 + 1, v26 + 2, v26);
    if ( v26 == v27 )
      break;
    if ( (v27 & 1) != 0 )
    {
      v26 = v27;
    }
    else
    {
      _m_prefetchw(v24 + 1);
      v25 = v24[1] | 1u;
      v26 = _InterlockedOr(v24 + 1, 1u);
      if ( (v26 & 1) == 0 )
        goto LABEL_29;
    }
  }
  v31 = (unsigned __int16)v26 >> 1;
  v32 = &v24[4 * (v31 & 0xFFF) + 4];
  if ( (*v32 & 0x7FFF) != (((_WORD)v31 - 4096) & 0x7FFF) )
    sub_1470B7790(v24, &v24[4 * (v31 & 0xFFF) + 4]);
  *((_QWORD *)v32 + 1) = v17;
  v33 = _InterlockedExchange(v32 + 1, v31);
  if ( (v33 & 0xFFFF8000) != 0 )
    sub_1407E2F90(v24, v32 + 1, v33);
LABEL_49:
  v46 = __rdtsc();
  qword_149A05E08(&n2816_1);
  v7 = v58;
  v19 = v57;
LABEL_50:
  v40 = _InterlockedDecrement64(v19);
  if ( (v40 & 0x3FF) == 0 && (v40 & 0xFFFF0000FFC00000uLL) != 0 )
    sub_1403CD3A0(v19);
  if ( !v56 )
    sub_1402D42F0(v7);
  v53 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470B50C0 (0x1470B50C0) ---

// --- Function: sub_1470B55F0 (0x1470B55F0) ---
__int64 __fastcall sub_1470B55F0(__int64 a1, __int64 a2, __int16 a3)
{
  __int128 v3; // xmm6
  __int128 v4; // xmm7
  __int128 v5; // xmm8
  __int128 v6; // xmm9
  __int128 v7; // xmm10
  __int128 v8; // xmm11
  __int128 v9; // xmm12
  __int128 v10; // xmm13
  __int128 v11; // xmm14
  __int128 v12; // xmm15
  __int64 _RDI; // r14
  volatile signed __int64 *v17; // r13
  __int64 v18; // r12
  int v19; // edx
  unsigned __int64 v20; // rbx
  int _RDI_1; // ecx
  __int16 v22; // ax
  char v23; // cl
  __int64 v24; // rax
  double *v25; // r9
  double *v26; // rax
  double v27; // xmm9_8
  double v28; // xmm11_8
  double v31; // xmm5_8
  double v32; // xmm6_8
  double v33; // xmm8_8
  double v34; // xmm7_8
  double v35; // kr00_8
  double v36; // xmm0_8
  double v37; // xmm12_8
  double v38; // xmm13_8
  double v39; // xmm14_8
  double v40; // xmm15_8
  double v41; // xmm6_8
  double v42; // xmm5_8
  double v43; // xmm8_8
  double v44; // xmm9_8
  double v45; // xmm11_8
  double v46; // xmm3_8
  double v47; // kr00_8
  double v48; // xmm12_8
  double v49; // xmm11_8
  double v50; // xmm14_8
  double v51; // xmm13_8
  double v52; // xmm4_8
  double v53; // xmm9_8
  double v54; // xmm10_8
  double v55; // xmm8_8
  double v56; // xmm7_8
  double v57; // kr00_8
  double v58; // xmm4_8
  double v59; // xmm6_8
  double v60; // xmm5_8
  double v61; // xmm3_8
  int v62; // edx
  _QWORD *v63; // rdi
  __int64 v64; // r8
  __int64 v65; // r8
  __int64 v66; // r15
  __int64 v67; // r12
  __int64 v68; // rdi
  __int64 v69; // r12
  volatile signed __int64 *v70; // r15
  int v71; // edx
  __int64 v72; // rsi
  __int64 v73; // rbx
  _DWORD *v74; // rbx
  __int64 v75; // rcx
  signed __int32 v76; // esi
  signed __int32 v77; // eax
  _DWORD *v78; // r15
  __int64 v79; // r14
  int v80; // esi
  __int64 v81; // rbx
  signed __int32 v82; // eax
  int v83; // r14d
  __int64 v84; // rcx
  int v85; // esi
  _DWORD *v86; // r14
  unsigned __int32 v87; // esi
  _DWORD *v88; // rbx
  unsigned __int32 v89; // r14d
  signed __int64 v90; // rdx
  double v92; // [rsp+38h] [rbp-D0h]
  double v93; // [rsp+40h] [rbp-C8h]
  double v94; // [rsp+40h] [rbp-C8h]
  double v95; // [rsp+48h] [rbp-C0h]
  double v96; // [rsp+50h] [rbp-B8h]
  double v97; // [rsp+58h] [rbp-B0h]
  volatile signed __int64 *v98; // [rsp+60h] [rbp-A8h]
  int n2816_1; // [rsp+68h] [rbp-A0h] BYREF
  __int64 v100; // [rsp+6Ch] [rbp-9Ch]
  int v101; // [rsp+74h] [rbp-94h]
  __int64 v102; // [rsp+78h] [rbp-90h]
  unsigned __int64 v103; // [rsp+80h] [rbp-88h]
  __int64 v104; // [rsp+88h] [rbp-80h]
  __int64 v105; // [rsp+90h] [rbp-78h]
  int n2816; // [rsp+B8h] [rbp-50h] BYREF
  __int64 v107; // [rsp+BCh] [rbp-4Ch]
  int v108; // [rsp+C4h] [rbp-44h]
  __int64 v109; // [rsp+C8h] [rbp-40h]
  unsigned __int64 v110; // [rsp+D0h] [rbp-38h]
  __int64 v111; // [rsp+D8h] [rbp-30h]
  __int64 v112; // [rsp+E0h] [rbp-28h]
  __m256 v113; // [rsp+108h] [rbp+0h] BYREF
  __int128 v114; // [rsp+128h] [rbp+20h]
  __int128 v115; // [rsp+138h] [rbp+30h]
  __int128 v116; // [rsp+148h] [rbp+40h]
  __int128 v117; // [rsp+158h] [rbp+50h]
  __int128 v118; // [rsp+168h] [rbp+60h]
  __int128 v119; // [rsp+178h] [rbp+70h]
  __int128 v120; // [rsp+188h] [rbp+80h]
  __int128 v121; // [rsp+198h] [rbp+90h]
  __int128 v122; // [rsp+1A8h] [rbp+A0h]
  _OWORD v123[2]; // [rsp+1B8h] [rbp+B0h]
  double v124; // [rsp+228h] [rbp+120h]
  double v125; // [rsp+230h] [rbp+128h]
  volatile signed __int64 *v126; // [rsp+230h] [rbp+128h]
  char v127; // [rsp+238h] [rbp+130h]
  double v128; // [rsp+240h] [rbp+138h]

  _RDI = 0;
  n2816 = 2816;
  v107 = 0;
  v108 = 0;
  v110 = 0;
  v111 = 0;
  v112 = 0;
  v109 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v17 = (volatile signed __int64 *)(a1 + 8);
  v98 = (volatile signed __int64 *)(a1 + 8);
  v18 = *((_QWORD *)NtCurrentTeb()->ThreadLocalStoragePointer + (unsigned int)TlsIndex);
  v127 = *(_BYTE *)(v18 + 2544);
  if ( !v127 )
  {
    if ( *(_DWORD *)(a1 + 16) == *(_DWORD *)(sub_1402C8360((unsigned int)TlsIndex) + 24) )
    {
      ++*(_DWORD *)(a1 + 20);
    }
    else
    {
      v19 = _InterlockedIncrement64(v17);
      if ( (*(_QWORD *)&v19 & 0x200000LL) != 0 )
        sub_1403CD0A0(a1 + 8, v19, (unsigned int)"CZoneSystem::UpdateVisAreaMode", (unsigned int)"m_GlobalStateLock", 1);
    }
  }
  v20 = *(_QWORD *)(a1 + 72LL * *(unsigned __int8 *)(a2 + 3) + 10559896)
      + (*(_DWORD *)a2 & 0xFFFFFF)
      * (unsigned __int64)*(unsigned __int16 *)(a1 + 2LL * *(unsigned __int8 *)(a2 + 3) + 10560336);
  _RDI_1 = *(_DWORD *)(v20 + 16);
  if ( _RDI_1 != -1 )
  {
    if ( !(_WORD)_RDI_1
      || (_RDI = (unsigned __int16)_RDI_1,
          *(_WORD *)(*(_QWORD *)(a1 + 10486016) + 8LL * (unsigned __int16)_RDI_1 + 6) == HIWORD(_RDI_1)) )
    {
      _RDI = *(_QWORD *)(*(_QWORD *)(a1 + 10486016) + 8 * _RDI) & 0xFFFFFFFFFFFFLL;
    }
    else
    {
      _RDI = 0;
    }
  }
  v22 = *(_WORD *)(v20 + 8);
  v23 = v22;
  v121 = v6;
  v24 = v22 & 0xF;
  v119 = v8;
  v25 = (double *)(v20 + 48 + *(unsigned __int16 *)(22 * v24 + a1 + 10560346));
  if ( (v23 & 0x20) != 0 )
  {
    v26 = (double *)(v20 + 48 + *(unsigned __int16 *)(22 * v24 + a1 + 10560348));
    v27 = *v26;
    v28 = v26[3];
    v124 = v26[1];
    v128 = v26[2];
    v125 = v26[4];
    v92 = v26[5];
    v96 = *v26;
    v95 = v28;
    if ( *v26 > v28 )
    {
      __asm
      {
        vmovupd ymm0, cs:ymmword_1480EFCC0
        vmovupd xmm1, cs:xmmword_1480EFC60
        vmovupd [rbp+110h+var_110], ymm0
        vmovupd [rbp+110h+var_F0], xmm1
      }
      goto LABEL_16;
    }
  }
  else
  {
    v27 = -0.0;
    v28 = 0.0;
    v96 = -0.0;
    v92 = 0.0;
    v125 = 0.0;
    v95 = 0.0;
    v128 = -0.0;
    v124 = -0.0;
  }
  v31 = v25[2];
  v123[1] = v3;
  v32 = v25[1];
  v123[0] = v4;
  v122 = v5;
  v33 = *v25;
  v120 = v7;
  v118 = v9;
  v34 = (v32 + v32) * v33;
  v35 = (v31 + v31) * v33;
  v93 = 1.0 - (v33 + v33) * v33;
  v36 = v25[3];
  v37 = v36 * (v32 + v32);
  v117 = v10;
  v38 = (v31 + v31) * v32;
  v116 = v11;
  v39 = v36 * (v33 + v33);
  v115 = v12;
  v40 = (v32 + v32) * v32;
  v41 = (v31 + v31) * v31;
  v42 = v36 * (v31 + v31);
  v43 = (v28 - v27) * 0.5;
  v44 = (v125 - v124) * 0.5;
  v45 = (v92 - v128) * 0.5;
  v46 = v93;
  v97 = (fabs(1.0 - v40 - v41) * v43 + fabs(v34 - v42) * v44 + fabs(v35 + v37) * v45) * v25[7];
  v94 = (fabs(v42 + v34) * v43 + fabs(v93 - v41) * v44 + fabs(v38 - v39) * v45) * v25[7];
  v47 = v35 - v37;
  v48 = v25[7];
  v49 = (COERCE_DOUBLE(*(_QWORD *)&v47 & 0x7FFFFFFFFFFFFFFFLL) * v43 + fabs(v38 + v39) * v44 + fabs(v46 - v40) * v45)
      * v48;
  v50 = v25[1];
  v51 = v25[2];
  v52 = v25[3];
  v53 = (v124 + v125) * 0.5;
  v54 = (v128 + v92) * 0.5;
  v55 = (v95 + v96) * 0.5;
  v56 = v54 * v50 - v53 * v51 + v55 * v52;
  v57 = v55 * v51 - v54 * *v25 + v53 * v52;
  v58 = v53 * *v25 - v55 * v50 + v54 * v52;
  v59 = (v58 * v50 - v57 * v51 + v55 + v58 * v50 - v57 * v51) * v48 + v25[4];
  v60 = (v56 * v51 - v58 * *v25 + v53 + v56 * v51 - v58 * *v25) * v48 + v25[5];
  v61 = (v57 * *v25 - v56 * v50 + v54 + v57 * *v25 - v56 * v50) * v48 + v25[6];
  *(double *)&v113.m256_f32[2] = v60 - v94;
  *(double *)v113.m256_f32 = v59 - v97;
  *(double *)&v113.m256_f32[4] = v61 - v49;
  *(double *)&v113.m256_f32[6] = v59 + v97;
  *(double *)&v114 = v60 + v94;
  *((double *)&v114 + 1) = v61 + v49;
LABEL_16:
  v62 = *(_DWORD *)(v20 + 20);
  v63 = (_QWORD *)(_RDI + 480);
  *(_WORD *)(v20 + 10) = a3;
  if ( !(_WORD)v62 )
  {
    v64 = 0;
    goto LABEL_20;
  }
  v64 = (unsigned __int16)v62;
  if ( *(_WORD *)(2896LL * (unsigned __int16)v62 + *v63 + 2848) == HIWORD(v62) )
  {
LABEL_20:
    v65 = *v63 + 2896 * v64;
    goto LABEL_21;
  }
  LODWORD(v65) = 0;
LABEL_21:
  __asm { vzeroupper }
  v66 = sub_14704E290(_RDI, v20, v65, (unsigned int)v25, (__int64)&v113);
  if ( (unsigned int)sub_1470668C0(v66) == *(_DWORD *)(v20 + 20) )
    goto LABEL_56;
  *(_DWORD *)(v20 + 20) = (*(unsigned __int16 *)(v66 + 2848) << 16) | (((int)v66 - *(_DWORD *)v63) / 2896);
  v67 = v18 + 2608;
  v68 = sub_1403E4B00(v67);
  if ( !v68 )
    v68 = allocWithProfilerInfo(0x28u, 0);
  *(_QWORD *)(v68 + 16) = v67;
  *(_QWORD *)v68 = 0;
  *(_BYTE *)(v68 + 24) = 3;
  *(_QWORD *)(v68 + 8) = v20;
  *(_QWORD *)(v68 + 32) = v66;
  v69 = *(_WORD *)(v20 + 8) & 0xF;
  v70 = (volatile signed __int64 *)(a1 + 24 + 8 * v69);
  v126 = v70;
  v71 = _InterlockedIncrement64(v70);
  if ( (*(_QWORD *)&v71 & 0x200000LL) != 0 )
    sub_1403CD0A0(
      a1 + 24 + 8 * v69,
      v71,
      (unsigned int)"CZoneSystem::UpdateVisAreaMode",
      (unsigned int)"m_CullingLock[nTypeIndex]",
      1);
  n2816_1 = 2816;
  v100 = 0;
  v101 = 0;
  v103 = 0;
  v104 = 0;
  v105 = 0;
  v102 = 1;
  qword_149A05E00(&n2816_1, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  v72 = qword_15146BC68;
  if ( *(_BYTE *)(qword_15146BC68 + 10485996) )
  {
    do
    {
      v73 = *(_QWORD *)v68;
      sub_14704B550(v72, v68);
      v68 = v73;
    }
    while ( v73 );
    goto LABEL_28;
  }
  _InterlockedIncrement((volatile signed __int32 *)(qword_15146BC68 + 4 * v69 + 10485976));
  v74 = (_DWORD *)(_RDI + 66224 * v69 + 1472);
  _m_prefetchw(v74 + 1);
  v75 = v74[1] | 1u;
  v76 = _InterlockedOr(v74 + 1, 1u);
  if ( (v76 & 1) != 0 )
  {
    while ( 1 )
    {
      v77 = _InterlockedCompareExchange(v74 + 1, v76 + 2, v76);
      if ( v76 == v77 )
        break;
      if ( (v77 & 1) != 0 )
      {
        v76 = v77;
      }
      else
      {
        _m_prefetchw(v74 + 1);
        v75 = v74[1] | 1u;
        v76 = _InterlockedOr(v74 + 1, 1u);
        if ( (v76 & 1) == 0 )
          goto LABEL_34;
      }
    }
    v85 = (unsigned __int16)v76 >> 1;
    v86 = &v74[4 * (v85 & 0xFFF) + 4];
    if ( (*v86 & 0x7FFF) != (((_WORD)v85 - 4096) & 0x7FFF) )
      sub_1470B7790(v74, &v74[4 * (v85 & 0xFFF) + 4]);
    *((_QWORD *)v86 + 1) = v68;
    v87 = _InterlockedExchange(v86 + 1, v85);
    if ( (v87 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v74, v86 + 1, v87);
LABEL_28:
    v103 = __rdtsc();
    qword_149A05E08(&n2816_1);
    goto LABEL_53;
  }
LABEL_34:
  *v74 = *(_DWORD *)(sub_1402C8360(v75) + 24);
  v78 = (_DWORD *)(_RDI + 66224 * v69 + 1472);
  do
  {
    v79 = qword_15146BC68;
    v80 = 0;
    if ( v68 )
    {
      do
      {
        v81 = *(_QWORD *)v68;
        sub_14704B550(v79, v68);
        ++v80;
        v68 = v81;
      }
      while ( v81 );
    }
    v82 = v78[1];
    v83 = v78[2] & 0x7FFF;
    if ( (unsigned __int16)v82 >> 1 == v83 )
    {
      *v78 = -1;
      v84 = v82 & 0xFFFFFFFE;
      if ( v82 == _InterlockedCompareExchange(v78 + 1, v84, v82) )
      {
        v68 = 0;
        goto LABEL_49;
      }
      *v78 = *(_DWORD *)(sub_1402C8360(v84) + 24);
    }
    ++v78[2];
    v88 = &v78[4 * (v83 & 0xFFF) + 4];
    if ( (v88[1] & 0x7FFF) != v83 )
      sub_1470B7790(v78, v88 + 1);
    v68 = *((_QWORD *)v88 + 1);
    v89 = _InterlockedExchange(v88, v83);
    if ( (v89 & 0xFFFF8000) != 0 )
      sub_1407E2F90(v78, v88, v89);
LABEL_49:
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)(qword_15146BC68 + 4 * v69 + 10485976), -v80) == v80 )
      qword_1499F5478(qword_15146BC68 + 10485976 + 4 * v69);
  }
  while ( v68 );
  v103 = __rdtsc();
  qword_149A05E08(&n2816_1);
  v17 = v98;
  v70 = v126;
LABEL_53:
  v90 = _InterlockedDecrement64(v70);
  if ( (v90 & 0x3FF) == 0 && (v90 & 0xFFFF0000FFC00000uLL) != 0 )
    sub_1403CD3A0(v70);
LABEL_56:
  if ( !v127 )
    sub_1402D42F0(v17);
  v110 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470B55F0 (0x1470B55F0) ---

// --- Function: sub_1470B7660 (0x1470B7660) ---
__int64 __fastcall sub_1470B7660(__int64 a1)
{
  unsigned __int64 n5; // rdi
  __int64 v3; // rcx
  int v4; // eax
  int *v5; // rbx
  _DWORD v7[4]; // [rsp+30h] [rbp-68h] BYREF
  int n2816; // [rsp+40h] [rbp-58h] BYREF
  __int64 v9; // [rsp+44h] [rbp-54h]
  int v10; // [rsp+4Ch] [rbp-4Ch]
  __int64 v11; // [rsp+50h] [rbp-48h]
  unsigned __int64 v12; // [rsp+58h] [rbp-40h]
  __int64 v13; // [rsp+60h] [rbp-38h]
  __int64 v14; // [rsp+68h] [rbp-30h]

  n5 = 0;
  n2816 = 2816;
  v9 = 0;
  v10 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v11 = 1;
  qword_149A05E00(&n2816, 0, &p_p_p_p_p_p_p_p_p_p_p_p_Source, &p_p_p_p_p_p_p_p_p_p_p_p_Source, 0);
  do
  {
    v3 = 4LL * (unsigned int)n5 + 10485976;
    v4 = *(_DWORD *)(v3 + a1);
    if ( v4 )
    {
      v5 = (int *)(v3 + a1);
      do
      {
        v7[0] = v4;
        qword_1499F5468(v5, v7, 4, 0xFFFFFFFFLL);
        v4 = *v5;
      }
      while ( *v5 );
    }
    ++n5;
  }
  while ( n5 < 5 );
  v12 = __rdtsc();
  return qword_149A05E08(&n2816);
}

// --- End Function: sub_1470B7660 (0x1470B7660) ---

