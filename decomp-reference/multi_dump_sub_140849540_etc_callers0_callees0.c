// Decompiled code dump generated by Code Dumper (Callers/Callees/Refs)
// Start Functions:
//   - 0x140849540 (sub_140849540)
//   - 0x14084B4C0 (_InterlockedIncrement_w_0)
//   - 0x14084D320 (sub_14084D320)
//   - 0x14084F6B0 (sub_14084F6B0)
//   - 0x140850F90 (sub_140850F90)
//   - 0x140853BE0 (sub_140853BE0)
//   - 0x140854340 (sub_140854340)
//   - 0x140854F30 (sub_140854F30)
//   - 0x140854F90 (sub_140854F90)
//   - 0x140855250 (sub_140855250)
//   - 0x1408560D0 (sub_1408560D0)
//   - 0x140857430 (sub_140857430)
//   - 0x140860580 (sub_140860580)
// Caller Depth: 0
// Callee/Ref Depth: 0
// Total Functions Found: 13
// ------------------------------------------------------------

// --- Function: sub_140849540 (0x140849540) ---
__int64 __fastcall sub_140849540(
        __int64 a1,
        __int64 a2,
        int a3,
        __int64 a4,
        _QWORD *a5,
        unsigned __int8 *Src,
        __int64 a7,
        __int64 a8,
        __int64 a9,
        _DWORD *a10,
        char *a11)
{
  __int128 v11; // xmm6
  __int16 n0xFFFF; // ax
  _QWORD *v16; // rax
  __int64 v17; // rax
  __int64 v18; // rcx
  __int64 v19; // r15
  __int64 v20; // rcx
  __int64 v21; // rax
  void (__fastcall ***v22)(_QWORD); // r14
  __int64 v23; // rcx
  char v24; // r14
  __int64 v25; // rdi
  char v26; // r14
  __int64 v27; // rcx
  int v28; // ebx
  int *ThreadLogContextSlot; // rax
  char v30; // al
  __int64 v31; // rcx
  unsigned __int64 v32; // rbx
  __int128 v33; // xmm6
  _QWORD *i; // rdi
  __int128 v35; // kr00_16
  __int64 v36; // r8
  unsigned __int64 v37; // rax
  unsigned __int64 v38; // rdx
  __int64 v39; // r9
  __int64 result; // rax
  __int64 (__fastcall *v41)(__int64, __int128 *, __int16 *); // [rsp+50h] [rbp-B0h] BYREF
  __int16 v42[2]; // [rsp+58h] [rbp-A8h] BYREF
  int v43; // [rsp+5Ch] [rbp-A4h]
  _BYTE v44[8]; // [rsp+60h] [rbp-A0h] BYREF
  __int64 v45; // [rsp+68h] [rbp-98h]
  __int64 v46; // [rsp+70h] [rbp-90h]
  __int64 v47; // [rsp+78h] [rbp-88h]
  __int64 v48; // [rsp+80h] [rbp-80h]
  __int64 v49; // [rsp+88h] [rbp-78h]
  int n0x900; // [rsp+90h] [rbp-70h] BYREF
  __int64 v51; // [rsp+94h] [rbp-6Ch]
  int v52; // [rsp+9Ch] [rbp-64h]
  unsigned __int64 v53; // [rsp+A0h] [rbp-60h]
  unsigned __int64 v54; // [rsp+A8h] [rbp-58h]
  __int64 v55; // [rsp+B0h] [rbp-50h]
  __int64 v56; // [rsp+B8h] [rbp-48h]
  _QWORD v57[2]; // [rsp+E0h] [rbp-20h] BYREF
  __int64 v58; // [rsp+F0h] [rbp-10h]
  __int128 v59; // [rsp+F8h] [rbp-8h] BYREF
  _QWORD v60[2]; // [rsp+108h] [rbp+8h] BYREF
  _QWORD v61[2]; // [rsp+118h] [rbp+18h] BYREF
  int n0xF5; // [rsp+128h] [rbp+28h] BYREF
  int n0x1C; // [rsp+12Ch] [rbp+2Ch]
  int n0x95; // [rsp+130h] [rbp+30h]
  int n0x7A; // [rsp+134h] [rbp+34h]
  int n0x31; // [rsp+138h] [rbp+38h]
  int n0xBC; // [rsp+13Ch] [rbp+3Ch]
  _QWORD v68[2]; // [rsp+140h] [rbp+40h] BYREF
  __int128 v69; // [rsp+150h] [rbp+50h]

  v69 = v11;
  *(_WORD *)(a1 + 0x10) = 0;
  *(_QWORD *)(a1 + 0x14) = 0;
  *(_DWORD *)(a1 + 0x1C) = 0;
  *(_QWORD *)(a1 + 0x20) = 0;
  *(_QWORD *)(a1 + 0x28) = 0;
  *(_QWORD *)(a1 + 0x30) = 0;
  *(_DWORD *)(a1 + 0x38) = 0;
  *(_QWORD *)(a1 + 0x40) = 0;
  *(_QWORD *)(a1 + 0x48) = 0;
  *(_QWORD *)(a1 + 0x50) = 0;
  *(_QWORD *)(a1 + 0x58) = 0;
  *(_QWORD *)(a1 + 0x60) = 0;
  *(_QWORD *)(a1 + 0x68) = 0;
  v45 = a7;
  v49 = a8;
  v48 = a9;
  *(_QWORD *)a1 = off_14833E5A8;
  *(_QWORD *)(a1 + 8) = off_14833E5A0;
  *(_QWORD *)(a1 + 0x70) = 0;
  *(_QWORD *)(a1 + 0x78) = 0;
  *(_QWORD *)(a1 + 0x80) = &unk_1482B6E60;
  *(_QWORD *)(a1 + 0x88) = 0;
  *(_QWORD *)(a1 + 0x90) = 0;
  *(_QWORD *)(a1 + 0x98) = 0;
  *(_QWORD *)(a1 + 0xB0) = 0;
  *(_QWORD *)(a1 + 0xB8) = 0;
  *(_WORD *)(a1 + 0xC0) = 0;
  *(_QWORD *)(a1 + 0xC8) = 0;
  *(_QWORD *)(a1 + 0xD0) = 0;
  *(_QWORD *)(a1 + 0xD8) = 0;
  *(_QWORD *)(a1 + 0xE0) = 0;
  *(_DWORD *)(a1 + 0xE8) = 0;
  v43 = a3;
  v41 = 0;
  sub_140573D50((_QWORD *)(a1 + 0xF0), Src);
  *(_DWORD *)(a1 + 0xF8) = 0;
  *(_QWORD *)(a1 + 0x100) = &p_Src;
  *(_DWORD *)(a1 + 0x108) = 0xFFFFFFFF;
  *(_DWORD *)(a1 + 0x10C) = 0;
  *(_QWORD *)(a1 + 0x110) = 0;
  *(_QWORD *)(a1 + 0x118) = 0;
  *(_QWORD *)(a1 + 0x120) = 0;
  *(_QWORD *)(a1 + 0x128) = 0;
  *(_QWORD *)(a1 + 0x130) = 0;
  *(_QWORD *)(a1 + 0x138) = 0;
  *(_QWORD *)(a1 + 0x148) = 0;
  *(_QWORD *)(a1 + 0x150) = 0;
  *(_QWORD *)(a1 + 0x158) = 0;
  *(_QWORD *)(a1 + 0x170) = 0;
  *(_QWORD *)(a1 + 0x160) = 0;
  *(_QWORD *)(a1 + 0x168) = &p_Src;
  *(_DWORD *)(a1 + 0x170) = 0xFFFFFFFF;
  *(_DWORD *)(a1 + 0x174) = 0;
  *(_QWORD *)(a1 + 0x178) = 0;
  *(_QWORD *)(a1 + 0x180) = 0;
  *(_QWORD *)(a1 + 0x188) = 0;
  *(_QWORD *)(a1 + 0x1A0) = 0;
  *(_QWORD *)(a1 + 0x190) = 0;
  *(_QWORD *)(a1 + 0x198) = &p_Src;
  *(_DWORD *)(a1 + 0x1A0) = 0xFFFFFFFF;
  *(_DWORD *)(a1 + 0x1A4) = 0;
  *(_QWORD *)(a1 + 0x1A8) = 0;
  *(_QWORD *)(a1 + 0x1B0) = 0;
  *(_QWORD *)(a1 + 0x1B8) = 0;
  *(_QWORD *)(a1 + 0x1C4) = 0;
  *(_QWORD *)(a1 + 0x1CC) = 0;
  *(_WORD *)(a1 + 0x1DC) = 0;
  *(_DWORD *)(a1 + 0x1C0) = 0xFFFFFFFF;
  *(_DWORD *)(a1 + 0x1D4) = 0x12345678;
  *(_DWORD *)(a1 + 0x1D8) = 0x41400000;
  *(_QWORD *)(a1 + 0x1E0) = 0;
  *(_QWORD *)(a1 + 0x1E8) = 0;
  *(_QWORD *)(a1 + 0x1F0) = 0;
  *(_QWORD *)(a1 + 0x1F8) = 0;
  *(_QWORD *)(a1 + 0x200) = 0;
  *(_QWORD *)(a1 + 0x208) = 0;
  *(_QWORD *)(a1 + 0x210) = 0;
  *(_QWORD *)(a1 + 0x218) = 0;
  *(_QWORD *)(a1 + 0x220) = 0;
  *(_QWORD *)(a1 + 0x228) = 0;
  *(_QWORD *)(a1 + 0x230) = 0;
  *(_QWORD *)(a1 + 0x238) = 0;
  *(_QWORD *)(a1 + 0x240) = 0;
  *(_QWORD *)(a1 + 0x248) = 0;
  *(_QWORD *)(a1 + 0x250) = 0;
  *(_QWORD *)(a1 + 0x258) = 0;
  *(_QWORD *)(a1 + 0x260) = 0;
  *(_QWORD *)(a1 + 0x268) = 0;
  *(_QWORD *)(a1 + 0x270) = 0;
  *(_QWORD *)(a1 + 0x278) = 0;
  *(_QWORD *)(a1 + 0x280) = 0;
  *(_QWORD *)(a1 + 0x288) = 0;
  *(_QWORD *)(a1 + 0x290) = 0;
  *(_QWORD *)(a1 + 0x298) = 0;
  *(_QWORD *)(a1 + 0x2A0) = 0;
  *(_QWORD *)(a1 + 0x2A8) = 0;
  *(_QWORD *)(a1 + 0x2B0) = 0;
  *(_QWORD *)(a1 + 0x2B8) = 0;
  *(_QWORD *)(a1 + 0x2C0) = 0;
  *(_DWORD *)(a1 + 0x2C8) = 0;
  *(_QWORD *)(a1 + 0x2CC) = 0;
  *(_DWORD *)(a1 + 0x2D4) = 0;
  *(_BYTE *)(a1 + 0x2D8) = 0;
  *(_QWORD *)(a1 + 0x140) = a2;
  v47 = a2 & 0xFFFFFFFFFFFFLL;
  v41 = *(__int64 (__fastcall **)(__int64, __int128 *, __int16 *))(*(_QWORD *)(a2 & 0xFFFFFFFFFFFFLL) + 0x340LL);
  n0xFFFF = n0xFFFF_13;
  if ( n0xFFFF_13 == (__int16)0xFFFF )
  {
    n0xFFFF = *(_WORD *)(*(__int64 (__fastcall **)(__int64, _BYTE *, const char *))(*(_QWORD *)qword_149C8DFC8 + 0x10LL))(
                          qword_149C8DFC8,
                          v44,
                          "IEntityRenderProxy");
    n0xFFFF_13 = n0xFFFF;
  }
  v42[0] = n0xFFFF;
  v16 = (_QWORD *)v41(a2 & 0xFFFFFFFFFFFFLL, &v59, v42);
  v17 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)(*v16 & 0xFFFFFFFFFFFFLL) + 0x5D8LL))(*v16 & 0xFFFFFFFFFFFFLL);
  v18 = *(_QWORD *)(a1 + 0x130);
  v19 = v17;
  if ( v18 != a4 )
  {
    if ( a4 )
      (*(void (__fastcall **)(__int64))(*(_QWORD *)a4 + 8LL))(a4);
    v20 = *(_QWORD *)(a1 + 0x130);
    if ( v20 )
      (*(void (__fastcall **)(__int64))(*(_QWORD *)v20 + 0x10LL))(v20);
    *(_QWORD *)(a1 + 0x130) = a4;
    v18 = a4;
  }
  if ( v18 )
  {
    v21 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v18 + 0x70LL))(v18);
    if ( (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v21 + 0xB0LL))(v21) )
      *(_BYTE *)(a1 + 0xC1) = 1;
  }
  v22 = (void (__fastcall ***)(_QWORD))*a5;
  if ( *(_QWORD *)(a1 + 0x128) != *a5 )
  {
    if ( v22 )
      (**v22)(*a5);
    v23 = *(_QWORD *)(a1 + 0x128);
    if ( v23 )
      (*(void (__fastcall **)(__int64))(*(_QWORD *)v23 + 8LL))(v23);
    *(_QWORD *)(a1 + 0x128) = v22;
  }
  *(_QWORD *)(a1 + 0x138) = *sub_14051EB30(v19, &v41);
  if ( (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v19 + 0x1D0LL))(v19) != a1 )
    (*(void (__fastcall **)(__int64, __int64))(*(_QWORD *)v19 + 0x1D8LL))(v19, a1);
  sub_140850620(a1, a2, v19, v45);
  v24 = *a11;
  v25 = (*(__int64 (**)(void))(*(_QWORD *)qword_149C8E018 + 0x5A0LL))();
  v26 = v24 & 2;
  if ( v26 )
    *(_WORD *)(a1 + 0x1DC) |= 1u;
  else
    *(_WORD *)(a1 + 0x1DC) &= ~1u;
  _InterlockedIncrement((volatile signed __int32 *)(a1 + 0xBC));
  v27 = *(_QWORD *)(v25 + 0x10);
  v46 = a1;
  _InterlockedIncrement((volatile signed __int32 *)(a1 + 0xBC));
  sub_14084B070(v27);
  if ( v26 && *(_QWORD *)(*(_QWORD *)(a1 + 0x120) + 0x18LL) == *(_QWORD *)(*(_QWORD *)(a1 + 0x120) + 0x20LL) )
    sub_140856FA0(v25, a1);
  if ( _InterlockedExchangeAdd((volatile signed __int32 *)(a1 + 0xBC), 0xFFFFFFFF) <= 1 )
  {
    sub_14084A700(a1);
    sub_1402A6590(a1);
  }
  if ( *(float *)(*(_QWORD *)(a1 + 0x120) + 0x70LL) <= 0.00000011920929 )
  {
    n0xF5 = 0xF5;
    v60[0] = &n0xF5;
    n0x1C = 0x1C;
    v60[1] = v68;
    n0x95 = 0x95;
    n0x7A = 0x7A;
    n0x31 = 0x31;
    n0xBC = 0xBC;
    v28 = invokeGlobalCallbackAndMaskStatusBits(
            3,
            (__int64)v60,
            (__int64)"Insufficient Texel Length",
            "Average texel length is too small, the UV layout of this mesh will need to be improved in order to work with Damage Maps!");
    if ( (v28 & 0xFFFFF) != 0 )
    {
      v57[1] = (*(__int64 (__fastcall **)(_QWORD))(**(_QWORD **)(a1 + 0x128) + 0x348LL))(*(_QWORD *)(a1 + 0x128));
      v57[0] = 0;
      v58 = 0;
      ThreadLogContextSlot = getThreadLogContextSlot();
      n0xF5 = 0xF5;
      v61[0] = &n0xF5;
      n0x1C = 0x1C;
      v61[1] = v68;
      n0x95 = 0x95;
      v59 = 0;
      n0x7A = 0x7A;
      n0x31 = 0x31;
      n0xBC = 0xBC;
      sub_140446700(
        3,
        (__int64)v61,
        "Insufficient Texel Length",
        (__int64)"Average texel length is too small, the UV layout of this mesh will need to be improved in order to work"
                 " with Damage Maps!",
        2,
        v28,
        &v59,
        0,
        (__int64)ThreadLogContextSlot,
        v57);
      sub_1402A6590(v58);
    }
  }
  if ( (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v47 + 0x728LL))(v47) )
    sub_14084CFF0(a1 + 8, (unsigned __int16)v43);
  v30 = *a11 & 1;
  n0x900 = 0x900;
  *(_BYTE *)(a1 + 0xC0) = v30;
  v51 = 0;
  v52 = 0;
  v54 = 0;
  v55 = 0;
  v56 = 0;
  v53 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFD0,
    "CDamageMap::MT_CalculateSurfaceArea",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0x7B8);
  v31 = *(_QWORD *)(a1 + 0x120);
  v32 = 0;
  HIWORD(n0x900) = word_149D7FFD0;
  v33 = 0;
  for ( i = (_QWORD *)(v31 + 0x30); v32 < *(unsigned int *)(v31 + 0x4C); ++v32 )
  {
    if ( sub_140574720(a1 + 0xF0, v32) )
    {
      v35 = v33;
      *(float *)&v35 = *(float *)&v33 + *(float *)(*i + 8 * v32);
      v33 = v35;
    }
    v31 = *(_QWORD *)(a1 + 0x120);
  }
  *(float *)(a1 + 0xB8) = *(float *)&v33;
  v36 = *(_QWORD *)(a1 + 0x40);
  v37 = *(unsigned int *)(v31 + 0x4C);
  v38 = (*(_QWORD *)(a1 + 0x48) - v36) >> 4;
  if ( v37 <= v38 )
    *(_QWORD *)(a1 + 0x48) = v36 + 0x10 * v37;
  else
    sub_14084DAC0(a1 + 0x40, v37 - v38);
  v54 = __rdtsc();
  qword_149C89AA8(&n0x900);
  if ( v26 )
  {
    v39 = *(_QWORD *)(a1 + 0x120);
    if ( v39 )
    {
      if ( *(_DWORD *)(v39 + 0x58) == *a10 )
        sub_140859F10(a1, v49, v48);
    }
  }
  sub_14085CA50(a1);
  if ( *a5 )
    (*(void (__fastcall **)(_QWORD))(*(_QWORD *)*a5 + 8LL))(*a5);
  result = a1;
  *a5 = 0;
  return result;
}

// --- End Function: sub_140849540 (0x140849540) ---

// --- Function: _InterlockedIncrement_w_0 (0x14084B4C0) ---
void __fastcall sub_14084B4C0(__int64 a1)
{
  _InterlockedIncrement((volatile signed __int32 *)(a1 + 0xBC));
}

// --- End Function: _InterlockedIncrement_w_0 (0x14084B4C0) ---

// --- Function: sub_14084D320 (0x14084D320) ---
// attributes: thunk
__int64 sub_14084D320()
{
  return sub_1408560D0();
}

// --- End Function: sub_14084D320 (0x14084D320) ---

// --- Function: sub_14084F6B0 (0x14084F6B0) ---
// local variable allocation has failed, the output may be wrong!
__int64 __fastcall sub_14084F6B0(__int64 a1, __int64 a2, __int64 a3, double a4, char *a5, unsigned int *a6)
{
  __int128 v6; // xmm6
  volatile signed __int64 *v11; // rbx
  signed __int64 v12; // rdx
  unsigned __int64 n0x3E8; // rdi
  __int128 n0x3A83126F; // xmm2
  __int64 v15; // rax
  int v16; // edx
  float v20; // kr00_4
  float v21; // xmm9_4
  float v22; // kr00_4
  float v23; // xmm7_4
  float v24; // kr00_4
  float v25; // xmm6_4
  float v26; // kr00_4
  __int128 v27; // xmm0
  __m128 v29; // xmm1
  __int64 v32; // rax
  __int64 v33; // rdx
  float v46; // xmm9_4
  float v48; // xmm11_4
  float v50; // xmm12_4
  __m128 n0x3F800000; // kr00_16
  __m128 v53; // xmm6
  float v56; // xmm0_4
  float v58; // xmm9_4
  float v60; // xmm0_4
  float v62; // xmm2_4
  int v64; // edi
  __int64 v65; // r8
  unsigned __int64 v66; // rax
  int v67; // eax
  unsigned __int64 n0x200000; // rax
  volatile signed __int64 *v70; // [rsp+60h] [rbp-A8h]
  _QWORD v71[5]; // [rsp+70h] [rbp-98h] BYREF
  __int128 v72; // [rsp+98h] [rbp-70h]
  double v73; // [rsp+A8h] [rbp-60h]
  int v74; // [rsp+B0h] [rbp-58h]
  int v75; // [rsp+B4h] [rbp-54h]
  double v76; // [rsp+B8h] [rbp-50h]
  int v77; // [rsp+C0h] [rbp-48h]
  __int64 v78; // [rsp+C8h] [rbp-40h]
  __m128 v79; // [rsp+D0h] [rbp-38h]
  __m128 v80; // [rsp+E0h] [rbp-28h]
  float v81; // [rsp+F0h] [rbp-18h]
  float v82; // [rsp+F4h] [rbp-14h]
  float v83; // [rsp+F8h] [rbp-10h]
  float v84; // [rsp+FCh] [rbp-Ch]
  __int128 v85; // [rsp+100h] [rbp-8h]
  float v86; // [rsp+110h] [rbp+8h]
  float v87; // [rsp+114h] [rbp+Ch]
  __int128 v88; // [rsp+118h] [rbp+10h]
  float v89; // [rsp+128h] [rbp+20h]
  float v90; // [rsp+12Ch] [rbp+24h]
  float v91; // [rsp+130h] [rbp+28h]
  float v92; // [rsp+134h] [rbp+2Ch]
  float v93; // [rsp+138h] [rbp+30h]
  float v94; // [rsp+13Ch] [rbp+34h]
  float v95; // [rsp+140h] [rbp+38h]
  float v96; // [rsp+144h] [rbp+3Ch]
  float v97; // [rsp+148h] [rbp+40h]
  float v98; // [rsp+14Ch] [rbp+44h]
  float v99; // [rsp+150h] [rbp+48h]
  __int64 v100; // [rsp+158h] [rbp+50h]
  char v101; // [rsp+160h] [rbp+58h]
  float v102; // [rsp+164h] [rbp+5Ch]
  float v103; // [rsp+168h] [rbp+60h]
  float v104; // [rsp+16Ch] [rbp+64h]
  int n0x900; // [rsp+178h] [rbp+70h] BYREF
  __int64 v106; // [rsp+17Ch] [rbp+74h]
  int v107; // [rsp+184h] [rbp+7Ch]
  unsigned __int64 v108; // [rsp+188h] [rbp+80h]
  unsigned __int64 v109; // [rsp+190h] [rbp+88h]
  __int64 v110; // [rsp+198h] [rbp+90h]
  __int64 v111; // [rsp+1A0h] [rbp+98h]
  __int128 v112; // [rsp+228h] [rbp+120h]

  v112 = v6;
  v106 = 0;
  v107 = 0;
  v109 = 0;
  v110 = 0;
  v111 = 0;
  _XMM6 = *(_OWORD *)&a4;
  n0x900 = 0x900;
  v108 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFAC,
    "CDamageMap::MT_AddImpactLocal",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0x14F);
  HIWORD(n0x900) = word_149D7FFAC;
  v11 = (volatile signed __int64 *)(a1 + 0x160);
  if ( *(_DWORD *)(a1 + 0x170) == *(_DWORD *)(NtCurrentTeb_w() + 0x18) )
  {
    ++*(_DWORD *)(a1 + 0x174);
  }
  else
  {
    v12 = _InterlockedIncrement64(v11);
    if ( (v12 & 0x200000) != 0 )
      rw_lock_acquire_read_lock_dispatch(a1 + 0x160, v12, (const char *)&p_Src, (const char *)&p_Src, 1);
  }
  n0x3E8 = (*(_QWORD *)(a1 + 0x150) - *(_QWORD *)(a1 + 0x148)) / 0xF8LL;
  rw_lock_release_read_lock(a1 + 0x160);
  if ( n0x3E8 < 0x3E8 )
  {
    n0x3A83126F = 0x3A83126Fu;
    *(__m256 *)&v71[1] = ymmword_1482EE6E0;
    v15 = *((_QWORD *)a5 + 9);
    v16 = *((_DWORD *)a5 + 0x17);
    v72 = xmmword_14832FC60;
    v88 = 0;
    v100 = v15;
    __asm
    {
      vcmpless xmm0, xmm2, xmm1
      vblendvps xmm1, xmm6, xmm1, xmm0
      vmaxss  xmm0, xmm1, xmm2
    }
    *(_QWORD *)&_XMM1 = *(_QWORD *)a2;
    v101 = *a5;
    v74 = *(_DWORD *)(a2 + 8);
    LODWORD(v15) = *(unsigned __int8 *)(a1 + 0xC0);
    v103 = *(float *)&_XMM0;
    *(_QWORD *)&_XMM0 = *(_QWORD *)a3;
    v75 = v15;
    LODWORD(v15) = *(_DWORD *)(a3 + 8);
    v76 = *(double *)&_XMM0;
    v86 = 0.0;
    v87 = 0.0;
    v89 = 0.0;
    v90 = 0.0;
    v102 = 0.0;
    v104 = 0.0;
    v73 = *(double *)&_XMM1;
    v77 = v15;
    __asm { vzeroupper }
    sub_140572410((__int64)&qword_149A6A5E0, v16);
    v20 = (float)(unsigned int)sub_1405722D0((__int64)&qword_149A6A5E0);
    v21 = v20 * 2.3283064e-10;
    v22 = (float)(unsigned int)sub_1405722D0((__int64)&qword_149A6A5E0);
    v23 = v22 * 2.3283064e-10;
    v24 = (float)(unsigned int)sub_1405722D0((__int64)&qword_149A6A5E0);
    v25 = v24 * 2.3283064e-10;
    v26 = (float)(unsigned int)sub_1405722D0((__int64)&qword_149A6A5E0);
    v27 = *(_OWORD *)(a5 + 4);
    _XMM8 = *(__m128 *)(a5 + 0x24);
    v95 = v26 * 2.3283064e-10;
    v29 = *(__m128 *)(a5 + 0x14);
    v97 = v23;
    v85 = v27;
    _XMM0 = *((unsigned int *)a5 + 0x11);
    v79 = v29;
    v96 = v25;
    v98 = v21;
    v80 = _XMM8;
    if ( *(float *)&_XMM0 >= 0.0 )
    {
      __asm { vminss  xmm0, xmm0, xmm7 }
      v99 = *(float *)&_XMM0;
    }
    else
    {
      v99 = 0.0;
    }
    v32 = (*(__int64 (__fastcall **)(_LocaleUpdate *))(*(_QWORD *)qword_149C8E018 + 0x5A0LL))(qword_149C8E018);
    if ( *a5 == 2 )
      v33 = *(_QWORD *)(v32 + 0x78);
    else
      v33 = *(_QWORD *)(v32 + 0x80);
    _XMM1 = *((unsigned int *)a5 + 0xD);
    __asm
    {
      vcmpless xmm0, xmm1, xmm3
      vblendvps xmm0, xmm1, xmm2, xmm0
    }
    _XMM1 = *((unsigned int *)a5 + 0xE);
    _XMM2 = *((unsigned int *)a5 + 0xF);
    v81 = *(float *)&_XMM0;
    __asm
    {
      vcmpless xmm0, xmm1, xmm3
      vblendvps xmm0, xmm1, xmm4, xmm0
    }
    _XMM1 = *((unsigned int *)a5 + 0x10);
    v82 = *(float *)&_XMM0;
    __asm
    {
      vcmpless xmm0, xmm2, xmm3
      vblendvps xmm0, xmm2, xmm5, xmm0
    }
    v83 = *(float *)&_XMM0;
    __asm
    {
      vcmpless xmm0, xmm1, xmm3
      vblendvps xmm0, xmm1, xmm6, xmm0
    }
    v84 = *(float *)&_XMM0;
    LODWORD(v46) = _mm_shuffle_ps(_XMM8, _XMM8, 0x55).m128_u32[0];
    __asm { vmaxss  xmm0, xmm8, xmm9 }
    LODWORD(v48) = _mm_shuffle_ps(_XMM8, _XMM8, 0xAA).m128_u32[0];
    __asm { vmaxss  xmm1, xmm0, xmm11 }
    LODWORD(v50) = _mm_shuffle_ps(_XMM8, _XMM8, 0xFF).m128_u32[0];
    __asm { vmaxss  xmm0, xmm1, xmm12 }
    v78 = v33;
    if ( *(float *)&_XMM0 > 0.0 )
    {
      n0x3F800000 = (__m128)0x3F800000u;
      n0x3F800000.m128_f32[0] = 1.0 / *(float *)&_XMM0;
      v53 = _mm_shuffle_ps(n0x3F800000, n0x3F800000, 0);
      v80.m128_f32[0] = v53.m128_f32[0] * _XMM8.m128_f32[0];
      v80.m128_f32[1] = v53.m128_f32[0] * v46;
      v80.m128_f32[2] = v53.m128_f32[0] * v48;
      v80.m128_f32[3] = v53.m128_f32[0] * v50;
      v79 = _mm_mul_ps(v53, v79);
      *(float *)&v71[1] = v53.m128_f32[0];
      *((float *)&v71[3] + 1) = v53.m128_f32[0];
      *((float *)&v72 + 2) = v53.m128_f32[0];
    }
    _XMM0 = *a6;
    if ( *(float *)&_XMM0 >= 0.0 )
      __asm { vminss  xmm1, xmm0, xmm7 }
    else
      LODWORD(_XMM1) = 0;
    v56 = truncf(*(float *)&_XMM1 * 255.0);
    _XMM1 = a6[1];
    v58 = v56 * 0.0039215689;
    if ( *(float *)&_XMM1 >= 0.0 )
      __asm { vminss  xmm0, xmm1, xmm7 }
    else
      LODWORD(_XMM0) = 0;
    v60 = truncf(*(float *)&_XMM0 * 255.0);
    _XMM1 = a6[2];
    v62 = v60 * 0.0039215689;
    if ( *(float *)&_XMM1 >= 0.0 )
      __asm { vminss  xmm0, xmm1, xmm7 }
    else
      LODWORD(_XMM0) = 0;
    v91 = v58;
    v92 = v62;
    v93 = truncf(*(float *)&_XMM0 * 255.0) * 0.0039215689;
    v94 = 0.0;
    v70 = (volatile signed __int64 *)(a1 + 0x160);
    v64 = *(_DWORD *)(NtCurrentTeb_w() + 0x18);
    if ( *(_DWORD *)(a1 + 0x170) == v64 )
    {
      ++*(_DWORD *)(a1 + 0x174);
    }
    else
    {
      v65 = *(_QWORD *)(NtCurrentTeb_w() + 0x20);
      v66 = _InterlockedCompareExchange64(v11, 0x200000, 0);
      if ( v66 )
        sub_1403E1120(a1 + 0x160, v66, v65, (const char *)&p_Src, (const char *)&p_Src, 1);
      else
        *(_QWORD *)(a1 + 0x168) = v65;
      *(_DWORD *)(a1 + 0x170) = v64;
    }
    if ( *(_QWORD *)(a1 + 0x150) == *(_QWORD *)(a1 + 0x158) )
    {
      sub_140844BC0((__int64 *)(a1 + 0x148), *(_QWORD *)(a1 + 0x150), (__int64)&v71[1]);
    }
    else
    {
      sub_140849E50(*(_QWORD *)(a1 + 0x150), (__int64)&v71[1]);
      *(_QWORD *)(a1 + 0x150) += 0xF8LL;
    }
    *(_WORD *)(a1 + 0x1DC) &= ~4u;
    v67 = *(_DWORD *)(a1 + 0x174);
    if ( v67 )
    {
      *(_DWORD *)(a1 + 0x174) = v67 - 1;
    }
    else
    {
      *(_DWORD *)(a1 + 0x170) = 0xFFFFFFFF;
      n0x200000 = _InterlockedCompareExchange64(v70, 0, 0x200000);
      if ( n0x200000 == 0x200000 )
        *(_QWORD *)(a1 + 0x168) = &p_Src;
      else
        rw_lock_handle_write_release_contention((__int64)v70, n0x200000);
    }
  }
  v109 = __rdtsc();
  return qword_149C89AA8(&n0x900);
}

// --- End Function: sub_14084F6B0 (0x14084F6B0) ---

// --- Function: sub_140850F90 (0x140850F90) ---
// local variable allocation has failed, the output may be wrong!
__int64 __fastcall sub_140850F90(int a1, __int64 a2, char n2, double a4, float a5, float a6, float a7, int a8)
{
  __int128 v8; // xmm6
  __int128 v9; // xmm7
  __int128 v10; // xmm8
  __int128 v11; // xmm9
  __int128 v12; // xmm10
  __int128 v13; // xmm11
  __int128 v14; // xmm12
  __int128 v15; // xmm13
  __int128 v16; // xmm14
  __int128 v17; // xmm15
  float v23; // xmm7_4
  __int64 v25; // rax
  float *v26; // rax
  int v27; // r9d
  float *v28; // rbx
  float v29; // xmm2_4
  float v30; // xmm3_4
  float v31; // xmm4_4
  float v32; // xmm5_4
  float v33; // xmm10_4
  float v34; // xmm11_4
  float v35; // xmm12_4
  float v36; // xmm13_4
  float v37; // xmm14_4
  float v38; // xmm15_4
  float v39; // xmm0_4
  float v42; // xmm14_4
  float v43; // xmm11_4
  float v44; // xmm12_4
  float v45; // xmm13_4
  float v46; // xmm0_4
  float v47; // xmm2_4
  __int128 v49; // kr00_16
  int v53; // [rsp+48h] [rbp-C0h] BYREF
  float v54; // [rsp+4Ch] [rbp-BCh]
  float v55; // [rsp+50h] [rbp-B8h]
  float v56; // [rsp+54h] [rbp-B4h]
  float v57; // [rsp+58h] [rbp-B0h]
  float v58; // [rsp+5Ch] [rbp-ACh]
  float v59; // [rsp+60h] [rbp-A8h]
  float v60; // [rsp+64h] [rbp-A4h]
  float v61; // [rsp+68h] [rbp-A0h]
  float v62; // [rsp+6Ch] [rbp-9Ch]
  float v63; // [rsp+70h] [rbp-98h]
  _QWORD v64[3]; // [rsp+74h] [rbp-94h]
  int v65; // [rsp+8Ch] [rbp-7Ch]
  __int64 v66; // [rsp+90h] [rbp-78h]
  float v67; // [rsp+98h] [rbp-70h]
  float v68; // [rsp+9Ch] [rbp-6Ch]
  float v69; // [rsp+A0h] [rbp-68h]
  int v70; // [rsp+A4h] [rbp-64h]
  int n0x900; // [rsp+A8h] [rbp-60h] BYREF
  __int64 v72; // [rsp+ACh] [rbp-5Ch]
  int v73; // [rsp+B4h] [rbp-54h]
  unsigned __int64 v74; // [rsp+B8h] [rbp-50h]
  unsigned __int64 v75; // [rsp+C0h] [rbp-48h]
  __int64 v76; // [rsp+C8h] [rbp-40h]
  __int64 v77; // [rsp+D0h] [rbp-38h]
  __int128 v78; // [rsp+F8h] [rbp-10h]
  __int128 v79; // [rsp+108h] [rbp+0h]
  __int128 v80; // [rsp+118h] [rbp+10h]
  __int128 v81; // [rsp+128h] [rbp+20h]
  __int128 v82; // [rsp+138h] [rbp+30h]
  __int128 v83; // [rsp+148h] [rbp+40h]
  __int128 v84; // [rsp+158h] [rbp+50h]
  __int128 v85; // [rsp+168h] [rbp+60h]
  __int128 v86; // [rsp+178h] [rbp+70h]
  __int128 v87; // [rsp+188h] [rbp+80h]
  float v88; // [rsp+1D0h] [rbp+C8h]
  float v89; // [rsp+1D8h] [rbp+D0h]
  float v90; // [rsp+1E8h] [rbp+E0h]
  float v91; // [rsp+1F0h] [rbp+E8h]
  float v92; // [rsp+200h] [rbp+F8h]

  v87 = v8;
  v86 = v9;
  v85 = v10;
  v84 = v11;
  v83 = v12;
  v82 = v13;
  v81 = v14;
  v80 = v15;
  v79 = v16;
  v78 = v17;
  _XMM9 = *(_OWORD *)&a4;
  n0x900 = 0x900;
  v72 = 0;
  v73 = 0;
  v75 = 0;
  v76 = 0;
  v77 = 0;
  v74 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFA8,
    "CDamageMap::MT_CalculateWeaponDamage",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0xEA);
  HIWORD(n0x900) = word_149D7FFA8;
  v66 = 0;
  LOBYTE(v53) = n2;
  v70 = a8;
  _XMM6 = LODWORD(a5);
  v23 = a6;
  *(_OWORD *)&v64[1] = xmmword_148341EA0;
  v65 = dword_149D7FEA0;
  v67 = 0.0;
  v68 = 0.0;
  v69 = 0.0;
  if ( n2 == 1 && (a6 < 0.001 || a5 < 0.001) )
  {
    __asm { vmaxss  xmm0, xmm6, xmm7 }
    v23 = *(float *)&_XMM0 * 0.5;
    *(float *)&_XMM6 = *(float *)&_XMM0 * 0.5;
  }
  v25 = (*(__int64 (__fastcall **)(_LocaleUpdate *))(*(_QWORD *)qword_149C8E018 + 0x5A0LL))(qword_149C8E018);
  v26 = (float *)(*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v25 + 0x10LL))(v25);
  v28 = v26;
  if ( n2 == 2 )
  {
    v29 = v26[0x2A];
    v30 = v26[0x2B];
    v31 = v26[0x2C];
    v32 = v26[0x2D];
    v33 = v26[0x30];
    v34 = v26[0x31];
    v35 = v26[0x32];
    v36 = v26[0x33];
    v37 = v26[0x36];
    v38 = v26[0x37];
    v89 = v26[0x38];
    v91 = v26[0x39];
    v90 = v26[0x3C];
    v92 = v26[0x3D];
    v88 = v26[0x3E];
    v39 = v26[0x3F];
  }
  else
  {
    v29 = v26[8];
    v30 = v26[9];
    v31 = v26[0xA];
    v32 = v26[0xB];
    v33 = v26[0xE];
    v34 = v26[0xF];
    v35 = v26[0x10];
    v36 = v26[0x11];
    v37 = v26[0x14];
    v38 = v26[0x15];
    v89 = v26[0x16];
    v91 = v26[0x17];
    v90 = v26[0x1A];
    v92 = v26[0x1B];
    v88 = v26[0x1C];
    v39 = v26[0x1D];
  }
  __asm { vcmpltss xmm1, xmm9, cs:dword_1482BB398 }
  __asm { vblendvps xmm9, xmm9, xmm0, xmm1 }
  v58 = v37 * *(float *)&_XMM9;
  v60 = *(float *)&_XMM9 * v89;
  v62 = *(float *)&_XMM9 * v90;
  *(float *)v64 = *(float *)&_XMM9 * v88;
  v59 = v38 * *(float *)&_XMM9;
  v61 = *(float *)&_XMM9 * v91;
  v63 = *(float *)&_XMM9 * v92;
  v42 = (float)(v29 * *(float *)&_XMM6) + (float)(v33 * v23);
  *((float *)v64 + 1) = *(float *)&_XMM9 * v39;
  v43 = (float)(v30 * *(float *)&_XMM6) + (float)(v34 * v23);
  v44 = (float)(v35 * v23) + (float)(v31 * *(float *)&_XMM6);
  v45 = (float)(v32 * *(float *)&_XMM6) + (float)(v36 * v23);
  v57 = v45;
  v54 = v42;
  v55 = v43;
  v56 = v44;
  if ( n2 != 2 )
  {
    v46 = powf(*(float *)&_XMM9, *(float *)&dword_149A71264);
    v47 = 1.0 / (float)(v46 * 3.1415927);
    v57 = (float)(v47 * v45) * *(float *)&dword_149A71260;
    v54 = (float)(v42 / (float)(v46 * 3.1415927)) * *(float *)&dword_149A71260;
    v55 = (float)(v47 * v43) * *(float *)&dword_149A71260;
    v56 = (float)(v47 * v44) * *(float *)&dword_149A71260;
  }
  sub_140854340(a1, a2, (unsigned int)&v53, v27, 0);
  if ( n2 == 1 )
  {
    *(float *)(a2 + 0x10) = v23 * v28[0x48];
    if ( a7 > 0.0 )
    {
      __asm { vmaxss  xmm2, xmm9, cs:dword_1482C3BC0 }
      v49 = LODWORD(a7);
      *(float *)&v49 = (float)((float)((float)(a7 * a7) * a7)
                             / (float)((float)(*(float *)&_XMM2 * *(float *)&_XMM2) * *(float *)&_XMM2))
                     * v28[0x49];
      _XMM3 = v49;
      __asm { vminss  xmm4, xmm3, xmm10 }
      *(__m128 *)(a2 + 4) = _mm_mul_ps(_mm_shuffle_ps(_XMM4, _XMM4, 0), *(__m128 *)(a2 + 4));
    }
  }
  v75 = __rdtsc();
  qword_149C89AA8(&n0x900);
  return a2;
}

// --- End Function: sub_140850F90 (0x140850F90) ---

// --- Function: sub_140853BE0 (0x140853BE0) ---
__int64 __fastcall sub_140853BE0(__int64 a1, unsigned __int8 *a2)
{
  volatile signed __int32 *v4; // rbx
  int v5; // edi
  unsigned int v6; // eax
  __int64 v7; // r14
  volatile signed __int64 *v8; // rdi
  int v9; // ebp
  __int64 v10; // r8
  unsigned __int64 v11; // rax
  int v12; // eax
  unsigned __int64 n0x200000; // rax
  int v14; // eax
  unsigned __int32 v15; // eax
  int n0x900; // [rsp+30h] [rbp-78h] BYREF
  __int64 v18; // [rsp+34h] [rbp-74h]
  int v19; // [rsp+3Ch] [rbp-6Ch]
  unsigned __int64 v20; // [rsp+40h] [rbp-68h]
  unsigned __int64 v21; // [rsp+48h] [rbp-60h]
  __int64 v22; // [rsp+50h] [rbp-58h]
  __int64 v23; // [rsp+58h] [rbp-50h]

  n0x900 = 0x900;
  v18 = 0;
  v19 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v20 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D80018,
    "CDamageMap::MT_DetachJoints",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0xD8A);
  v4 = (volatile signed __int32 *)(a1 + 0xF8);
  HIWORD(n0x900) = word_149D80018;
  v5 = *(_DWORD *)(NtCurrentTeb_w() + 0x18);
  if ( *(_DWORD *)(a1 + 0x108) == v5 )
  {
    ++*(_DWORD *)(a1 + 0x10C);
  }
  else
  {
    v6 = _InterlockedCompareExchange(v4, 1, 0);
    if ( v6 )
      sub_1403C6E80(a1 + 0xF8, v6, (__int64)"CDamageMap::MT_DetachJoints", 1);
    else
      *(_QWORD *)(a1 + 0x100) = *(_QWORD *)(NtCurrentTeb_w() + 0x20);
    *(_DWORD *)(a1 + 0x108) = v5;
  }
  sub_140575060((_BYTE *)(a1 + 0xF0), a2);
  v7 = *(_QWORD *)(a1 + 0x110);
  v8 = (volatile signed __int64 *)(v7 + 0x48);
  v9 = *(_DWORD *)(NtCurrentTeb_w() + 0x18);
  if ( *(_DWORD *)(v7 + 0x58) == v9 )
  {
    ++*(_DWORD *)(v7 + 0x5C);
  }
  else
  {
    v10 = *(_QWORD *)(NtCurrentTeb_w() + 0x20);
    v11 = _InterlockedCompareExchange64(v8, 0x200000, 0);
    if ( v11 )
      sub_1403E1120(v7 + 0x48, v11, v10, (const char *)&p_Src, (const char *)&p_Src, 1);
    else
      *(_QWORD *)(v7 + 0x50) = v10;
    *(_DWORD *)(v7 + 0x58) = v9;
  }
  sub_140573F90((_BYTE *)(v7 + 0x38), (__int64)a2);
  if ( v7 != 0xFFFFFFFFFFFFFFB8uLL )
  {
    v12 = *(_DWORD *)(v7 + 0x5C);
    if ( v12 )
    {
      *(_DWORD *)(v7 + 0x5C) = v12 - 1;
    }
    else
    {
      *(_DWORD *)(v7 + 0x58) = 0xFFFFFFFF;
      n0x200000 = _InterlockedCompareExchange64(v8, 0, 0x200000);
      if ( n0x200000 == 0x200000 )
        *(_QWORD *)(v7 + 0x50) = &p_Src;
      else
        rw_lock_handle_write_release_contention(v7 + 0x48, n0x200000);
    }
  }
  v14 = *(_DWORD *)(a1 + 0x10C);
  if ( v14 )
  {
    *(_DWORD *)(a1 + 0x10C) = v14 - 1;
  }
  else
  {
    *(_DWORD *)(a1 + 0x108) = 0xFFFFFFFF;
    v15 = _InterlockedCompareExchange(v4, 0, 1);
    if ( v15 == 1 )
      *(_QWORD *)(a1 + 0x100) = &p_Src;
    else
      sub_1403DF590(a1 + 0xF8, v15);
  }
  v21 = __rdtsc();
  return qword_149C89AA8(&n0x900);
}

// --- End Function: sub_140853BE0 (0x140853BE0) ---

// --- Function: sub_140854340 (0x140854340) ---
__int64 __fastcall sub_140854340(__int64 a1, __int64 a2, __m256 *a3, float a4, unsigned int a5)
{
  __int128 v5; // xmm6
  __int128 v6; // xmm7
  __int128 v7; // xmm8
  __int128 v8; // xmm9
  __int128 v9; // xmm10
  __int128 v10; // xmm11
  __int128 v11; // xmm12
  __int128 v12; // xmm13
  __int128 v13; // xmm14
  __int128 v14; // xmm15
  __m256 v18; // ymm1
  __int64 v20; // rax
  __int128 n0x3F800000_1; // xmm3
  __int128 n0x3F800000; // kr00_16
  __int128 n0x3F800000_2; // xmm4
  unsigned int v27; // xmm7_4
  unsigned int v28; // xmm5_4
  __int128 n0x3F800000_4; // xmm15
  __int128 n0x3F800000_3; // kr00_16
  float v31; // xmm11_4
  float v32; // xmm12_4
  float v33; // xmm13_4
  float v34; // xmm14_4
  __m256i v40; // ymm1
  __int128 v41; // xmm3
  __int128 v42; // kr00_16
  __m256i v43; // ymm0
  __int128 v47; // kr00_16
  __int128 v50; // kr00_16
  __int128 v53; // kr00_16
  _DWORD v74[4]; // [rsp+30h] [rbp-D0h] BYREF
  __m256 v75; // [rsp+40h] [rbp-C0h] BYREF
  __m256 v76; // [rsp+60h] [rbp-A0h] BYREF
  __m256 v77; // [rsp+80h] [rbp-80h]
  __m256 v78; // [rsp+A0h] [rbp-60h] BYREF
  int n0x900; // [rsp+C0h] [rbp-40h] BYREF
  __int64 v80; // [rsp+C4h] [rbp-3Ch]
  int v81; // [rsp+CCh] [rbp-34h]
  unsigned __int64 v82; // [rsp+D0h] [rbp-30h]
  unsigned __int64 v83; // [rsp+D8h] [rbp-28h]
  __int64 v84; // [rsp+E0h] [rbp-20h]
  __int64 v85; // [rsp+E8h] [rbp-18h]
  _BYTE v86[64]; // [rsp+110h] [rbp+10h] BYREF
  __int128 v87; // [rsp+150h] [rbp+50h]
  __int128 v88; // [rsp+160h] [rbp+60h]
  __int128 v89; // [rsp+170h] [rbp+70h]
  __int128 v90; // [rsp+180h] [rbp+80h]
  __int128 v91; // [rsp+190h] [rbp+90h]
  __int128 v92; // [rsp+1A0h] [rbp+A0h]
  __int128 v93; // [rsp+1B0h] [rbp+B0h]
  __int128 v94; // [rsp+1C0h] [rbp+C0h]
  __int128 v95; // [rsp+1D0h] [rbp+D0h]
  __int128 v96; // [rsp+1E0h] [rbp+E0h]

  v96 = v5;
  v95 = v6;
  v94 = v7;
  v93 = v8;
  v92 = v9;
  v91 = v10;
  v90 = v11;
  v89 = v12;
  v88 = v13;
  v87 = v14;
  n0x900 = 0x900;
  v80 = 0;
  v81 = 0;
  v83 = 0;
  v84 = 0;
  v85 = 0;
  v82 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFA4,
    "CDamageMap::MT_ExpandImpactToMinimumRadius",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0xAF);
  v18 = a3[1];
  v75 = *a3;
  v78 = a3[2];
  v77 = v78;
  HIWORD(n0x900) = word_149D7FFA4;
  v76 = v18;
  __asm { vzeroupper }
  if ( is_entity_descriptor_valid_or_accessible((unsigned __int64 *)(a1 + 0x140)) )
    _XMM0 = *(unsigned __int64 *)((*(__int64 (__fastcall **)(__int64, _BYTE *, __int64))(*(_QWORD *)(*(_QWORD *)(a1 + 0x140) & 0xFFFFFFFFFFFFLL)
                                                                                       + 0x1E8LL))(
                                    *(_QWORD *)(a1 + 0x140) & 0xFFFFFFFFFFFFLL,
                                    v86,
                                    2)
                                + 0x38);
  else
    _XMM0 = 0x3FF0000000000000uLL;
  v20 = *(_QWORD *)(a1 + 0x120);
  __asm
  {
    vcvtsd2ss xmm0, xmm0, xmm0
    vmaxss  xmm2, xmm0, cs:dword_1482BB398
  }
  _XMM0 = (unsigned int)dword_149A71268;
  n0x3F800000 = 0x3F800000u;
  *(float *)&n0x3F800000 = 1.0 / *(float *)&_XMM2;
  n0x3F800000_1 = n0x3F800000;
  *(float *)&n0x3F800000 = (float)(1.0 / *(float *)&_XMM2) * v75.m256_f32[7];
  n0x3F800000_2 = n0x3F800000;
  n0x3F800000_3 = n0x3F800000_1;
  *(float *)&n0x3F800000_3 = *(float *)&n0x3F800000_1 * v76.m256_f32[0];
  n0x3F800000_4 = n0x3F800000_3;
  _XMM2 = a5;
  v75.m256_f32[5] = *(float *)&n0x3F800000_1 * v75.m256_f32[5];
  v27 = LODWORD(v75.m256_f32[5]);
  v75.m256_f32[6] = *(float *)&n0x3F800000_1 * v75.m256_f32[6];
  v28 = LODWORD(v75.m256_f32[6]);
  v75.m256_f32[7] = *(float *)&n0x3F800000_2;
  v76.m256_f32[0] = *(float *)&n0x3F800000_1 * v76.m256_f32[0];
  v76.m256_f32[1] = *(float *)&n0x3F800000_1 * v76.m256_f32[1];
  v31 = v76.m256_f32[1];
  v76.m256_f32[2] = *(float *)&n0x3F800000_1 * v76.m256_f32[2];
  v32 = v76.m256_f32[2];
  v76.m256_f32[3] = *(float *)&n0x3F800000_1 * v76.m256_f32[3];
  v33 = v76.m256_f32[3];
  v76.m256_f32[4] = *(float *)&n0x3F800000_1 * v76.m256_f32[4];
  v34 = v76.m256_f32[4];
  __asm
  {
    vcmpneqss xmm1, xmm2, xmm10
    vblendvps xmm2, xmm0, xmm2, xmm1
  }
  _XMM1 = *(unsigned int *)(v20 + 0x70);
  __asm { vmaxss  xmm0, xmm1, cs:dword_1482BB398 }
  v40 = (__m256i)v76;
  v42 = _XMM2;
  *(float *)&v42 = *(float *)&_XMM2 * *(float *)&_XMM0;
  v41 = v42;
  *(__m256 *)a2 = v75;
  v43 = (__m256i)v78;
  *(__m256i *)(a2 + 0x20) = v40;
  *(__m256i *)(a2 + 0x40) = v43;
  *(float *)&v42 = (float)(*(float *)&_XMM2 * *(float *)&_XMM0) - (float)(v34 - *(float *)&n0x3F800000_4);
  _XMM1 = v42;
  __asm { vmaxss  xmm9, xmm1, xmm10 }
  v47 = v41;
  *(float *)&v47 = *(float *)&v41 - (float)(v33 - *(float *)&n0x3F800000_2);
  _XMM2 = v47;
  __asm { vmaxss  xmm8, xmm2, xmm10 }
  v50 = v41;
  *(float *)&v50 = *(float *)&v41 - (float)(v32 - *(float *)&v28);
  _XMM1 = v50;
  __asm { vmaxss  xmm6, xmm1, xmm10 }
  v53 = v41;
  *(float *)&v53 = *(float *)&v41 - (float)(v31 - *(float *)&v27);
  _XMM2 = v53;
  __asm { vmaxss  xmm3, xmm2, xmm10 }
  _XMM0 = v27;
  __asm { vminss  xmm2, xmm0, xmm3 }
  *(float *)(a2 + 0x14) = *(float *)&v27 - *(float *)&_XMM2;
  _XMM1 = v28;
  __asm { vminss  xmm5, xmm4, xmm8 }
  LODWORD(_XMM0) = n0x3F800000_2;
  __asm { vminss  xmm4, xmm1, xmm6 }
  *(float *)(a2 + 0x18) = *(float *)&_XMM1 - *(float *)&_XMM4;
  *(float *)(a2 + 0x1C) = *(float *)&_XMM0 - *(float *)&_XMM5;
  __asm { vminss  xmm7, xmm15, xmm9 }
  *(float *)(a2 + 0x20) = *(float *)&n0x3F800000_4 - *(float *)&_XMM7;
  *(float *)(a2 + 0x24) = (float)(*(float *)&_XMM3 - *(float *)&_XMM2) + v31;
  *(float *)(a2 + 0x28) = (float)(*(float *)&_XMM6 - *(float *)&_XMM4) + v32;
  *(float *)(a2 + 0x2C) = (float)(*(float *)&_XMM8 - *(float *)&_XMM5) + v33;
  *(float *)(a2 + 0x30) = (float)(*(float *)&_XMM9 - *(float *)&_XMM7) + v34;
  _XMM2 = LODWORD(a4);
  _XMM0 = (unsigned int)dword_149A71264;
  __asm
  {
    vcmpneqss xmm1, xmm2, xmm10
    vblendvps xmm6, xmm0, xmm2, xmm1
  }
  __asm { vzeroupper }
  sub_14084B650(
    (unsigned int)&v78,
    (unsigned int)&v75.m256_f32[5],
    (unsigned int)&v76.m256_f32[1],
    (unsigned int)&v75.m256_f32[1],
    _XMM6);
  sub_14084B650((unsigned int)v74, a2 + 0x14, a2 + 0x24, a2 + 4, _XMM6);
  _XMM0 = v74[1];
  __asm { vmaxss  xmm2, xmm0, xmm9 }
  _XMM0 = v74[2];
  *(float *)&_XMM8 = v78.m256_f32[1] / *(float *)&_XMM2;
  __asm { vmaxss  xmm3, xmm0, xmm9 }
  _XMM0 = v74[3];
  *(float *)&v53 = v78.m256_f32[2] / *(float *)&_XMM3;
  __asm { vmaxss  xmm2, xmm0, xmm9 }
  _XMM0 = v74[0];
  *(float *)&_XMM6 = v78.m256_f32[3] / *(float *)&_XMM2;
  __asm { vmaxss  xmm2, xmm0, xmm9 }
  *(float *)(a2 + 4) = (float)(v78.m256_f32[0] / *(float *)&_XMM2) * *(float *)(a2 + 4);
  *(float *)(a2 + 8) = *(float *)&_XMM8 * *(float *)(a2 + 8);
  *(float *)(a2 + 0xC) = *(float *)&v53 * *(float *)(a2 + 0xC);
  *(float *)(a2 + 0x10) = *(float *)&_XMM6 * *(float *)(a2 + 0x10);
  v83 = __rdtsc();
  qword_149C89AA8(&n0x900);
  return a2;
}

// --- End Function: sub_140854340 (0x140854340) ---

// --- Function: sub_140854F30 (0x140854F30) ---
void __fastcall sub_140854F30(__int64 a1, __int64 a2, double *a3, double *a4)
{
  __int64 v4; // rcx
  __int64 v7; // rax

  v4 = *(_QWORD *)(a1 + 0x128);
  if ( v4 )
  {
    v7 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v4 + 0x5C0LL))(v4);
    if ( v7 )
    {
      *a3 = *(double *)(v7 + 0x20);
      *a4 = *(double *)(v7 + 0x28);
    }
  }
}

// --- End Function: sub_140854F30 (0x140854F30) ---

// --- Function: sub_140854F90 (0x140854F90) ---
_QWORD *__fastcall sub_140854F90(__int64 a1, _QWORD *a2)
{
  *a2 = *(_QWORD *)(a1 + 0x140);
  return a2;
}

// --- End Function: sub_140854F90 (0x140854F90) ---

// --- Function: sub_140855250 (0x140855250) ---
__m128 __fastcall sub_140855250(__int64 a1, __int64 a2)
{
  __int128 v3; // xmm6
  bool v6; // cf
  int v8; // ecx
  __int128 v9; // kr00_16
  float v10; // xmm0_4
  int n0x900; // [rsp+30h] [rbp-68h] BYREF
  __int64 v14; // [rsp+34h] [rbp-64h]
  int v15; // [rsp+3Ch] [rbp-5Ch]
  unsigned __int64 v16; // [rsp+40h] [rbp-58h]
  unsigned __int64 v17; // [rsp+48h] [rbp-50h]
  __int64 v18; // [rsp+50h] [rbp-48h]
  __int64 v19; // [rsp+58h] [rbp-40h]
  __int128 v20; // [rsp+80h] [rbp-18h]

  v20 = v3;
  n0x900 = 0x900;
  v14 = 0;
  v15 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v16 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFD8,
    "CDamageMap::MT_GetOverallPercentageThicknessDamage",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0x7E5);
  v6 = *(_BYTE *)(a2 + 7) < 2u;
  HIWORD(n0x900) = word_149D7FFD8;
  if ( v6 && (*(_BYTE *)(a2 + 6) & 1) != 0 )
  {
    _XMM6 = 0;
    v8 = *(_DWORD *)(*(_QWORD *)(a1 + 0x120) + 0x54LL);
    if ( v8 )
    {
      v9 = 0;
      v10 = (float)(unsigned int)(0xFF * v8);
      *(float *)&v9 = (float)*(int *)(a1 + 0x74) / v10;
      _XMM2 = v9;
      if ( *(float *)&v9 >= 0.0 )
        __asm { vminss  xmm6, xmm2, cs:Y }
    }
  }
  else
  {
    *(double *)&_XMM0 = sub_14084B4D0((_QWORD *)a1, 0, a2);
    _XMM6 = 0;
    if ( *(float *)&_XMM0 >= 0.0 )
      __asm { vminss  xmm6, xmm0, cs:Y }
  }
  v17 = __rdtsc();
  qword_149C89AA8(&n0x900);
  return (__m128)_XMM6;
}

// --- End Function: sub_140855250 (0x140855250) ---

// --- Function: sub_1408560D0 (0x1408560D0) ---
__m128 __fastcall sub_1408560D0(__int64 a1, __int64 a2)
{
  __int128 v2; // xmm6
  bool v5; // cf
  __int128 v6; // xmm6
  __int64 v7; // rax
  __int128 v8; // kr00_16
  int n0x900; // [rsp+38h] [rbp-69h] BYREF
  __int64 v11; // [rsp+3Ch] [rbp-65h]
  int v12; // [rsp+44h] [rbp-5Dh]
  unsigned __int64 v13; // [rsp+48h] [rbp-59h]
  unsigned __int64 v14; // [rsp+50h] [rbp-51h]
  __int64 v15; // [rsp+58h] [rbp-49h]
  __int64 v16; // [rsp+60h] [rbp-41h]
  __m256i v17; // [rsp+88h] [rbp-19h] BYREF
  unsigned int v18[4]; // [rsp+A8h] [rbp+7h] BYREF
  __int64 v19; // [rsp+B8h] [rbp+17h]
  char v20; // [rsp+C1h] [rbp+20h]
  __m256i v21; // [rsp+C8h] [rbp+27h] BYREF
  __int128 v22; // [rsp+E8h] [rbp+47h]

  v22 = v2;
  n0x900 = 0x900;
  v11 = 0;
  v12 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v13 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFD4,
    "CDamageMap::MT_GetSurfaceArea",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0x7CC);
  v5 = *(_BYTE *)(a2 + 7) < 2u;
  HIWORD(n0x900) = word_149D7FFD4;
  if ( v5 && (*(_BYTE *)(a2 + 6) & 1) != 0 || sub_140574260(a2, (unsigned __int8 *)(a1 + 0xF0)) )
  {
    v6 = *(unsigned int *)(a1 + 0xB8);
  }
  else
  {
    v6 = 0;
    if ( *(_QWORD *)(a1 + 0x120) )
    {
      sub_140573E20((__int64)v18, a2, 0x20 * ((unsigned __int64)*(unsigned __int8 *)(a2 + 6) >> 1));
      sub_140573E20((__int64)&v17, a2, 0x20 * ((unsigned __int64)*(unsigned __int8 *)(a2 + 6) >> 1));
      v7 = sub_140574E40(a2);
      sub_140573F30(&v17, &v21, v7);
      while ( v19 != v21.m256i_i64[2] || v20 != v21.m256i_i8[0x19] )
      {
        sub_140573EB0(v18, (__int64)&v17);
        if ( v17.m256i_i8[8] && (unsigned __int64)*(unsigned int *)(*(_QWORD *)(a1 + 0x120) + 0x4CLL) > v17.m256i_i64[0] )
        {
          if ( sub_140574720(a1 + 0xF0, v17.m256i_u64[0]) )
          {
            v8 = v6;
            *(float *)&v8 = *(float *)&v6
                          + *(float *)(*(_QWORD *)(*(_QWORD *)(a1 + 0x120) + 0x30LL) + 8 * v17.m256i_i64[0]);
            v6 = v8;
          }
        }
        sub_140573F60((__int64)v18, 1);
      }
    }
  }
  v14 = __rdtsc();
  qword_149C89AA8(&n0x900);
  return (__m128)v6;
}

// --- End Function: sub_1408560D0 (0x1408560D0) ---

// --- Function: sub_140857430 (0x140857430) ---
_BOOL8 __fastcall sub_140857430(__int64 a1)
{
  _DWORD *v2; // rdx
  _DWORD *v3; // rcx
  __int64 v4; // r14
  __int64 v5; // rdi
  ULONG_PTR *p_p_Src; // rsi
  int v7; // r15d
  __int64 v8; // r8
  unsigned __int64 v9; // rax
  __int64 v10; // rdx
  __int64 v11; // rcx
  __int64 v12; // rax
  unsigned int v13; // r8d
  unsigned __int64 v14; // rax
  unsigned __int64 v15; // rcx
  __int64 v16; // rcx
  unsigned int v17; // r12d
  int v18; // eax
  unsigned __int64 n0x200000; // rax
  __int16 *v20; // r14
  __int64 v21; // r15
  signed __int64 v22; // rdx
  signed __int64 v23; // rdx
  __int16 v24; // dx
  char *p_true_28; // r14
  char *p_true; // rax
  char *p_true_10; // rcx
  char *p_true_2; // rax
  char *p_true_4; // rax
  char *p_true_6; // rax
  char *p_true_8; // rax
  bool v32; // zf
  signed __int64 v33; // rdx
  char *p_true_12; // rax
  __int64 v35; // rcx
  __int64 v36; // rdx
  char *p_true_14; // rax
  __int64 v38; // rax
  bool v39; // cl
  char *p_true_16; // rax
  __int64 v41; // rcx
  __int64 v42; // rax
  __int64 v43; // rcx
  char *p_true_18; // rax
  __int64 v45; // rcx
  char *p_true_20; // rax
  __int64 v47; // rax
  ULONG_PTR *p_p_Src_1; // rax
  __int64 v49; // rcx
  char *p_true_22; // rax
  ULONG_PTR *p_p_Src_3; // rax
  unsigned __int64 v52; // r9
  __int16 n0xFFF; // r11
  char *p_true_24; // rax
  __int64 v55; // r10
  unsigned __int64 v56; // r9
  __int64 v57; // rax
  __int64 v58; // r10
  __int64 v59; // rdi
  bool v60; // al
  __int64 v61; // rcx
  unsigned __int64 v62; // r9
  bool v63; // cl
  __int64 v64; // r10
  unsigned __int64 v65; // r9
  __int64 v66; // rax
  __int64 v67; // r10
  __int64 v68; // rdi
  bool v69; // al
  char *p_true_26; // rax
  int *ThreadLogContextSlot_1; // rax
  bool v72; // bl
  const char *v74; // [rsp+20h] [rbp-1F0h]
  const char *v75; // [rsp+28h] [rbp-1E8h]
  const char *v76; // [rsp+30h] [rbp-1E0h]
  __int64 *v77; // [rsp+38h] [rbp-1D8h]
  int *ThreadLogContextSlot; // [rsp+40h] [rbp-1D0h]
  char **p_p_true; // [rsp+48h] [rbp-1C8h]
  char **v80; // [rsp+50h] [rbp-1C0h]
  ULONG_PTR **p_p_p_Src; // [rsp+58h] [rbp-1B8h]
  int v82; // [rsp+60h] [rbp-1B0h]
  int v83; // [rsp+68h] [rbp-1A8h]
  int v84; // [rsp+70h] [rbp-1A0h]
  int v85; // [rsp+78h] [rbp-198h]
  char **v86; // [rsp+80h] [rbp-190h]
  int v87; // [rsp+88h] [rbp-188h]
  const char *v88; // [rsp+90h] [rbp-180h]
  int v89; // [rsp+98h] [rbp-178h]
  int v90; // [rsp+A0h] [rbp-170h]
  const char *v91; // [rsp+A8h] [rbp-168h]
  int v92; // [rsp+B0h] [rbp-160h]
  int v93; // [rsp+B8h] [rbp-158h]
  const char *v94; // [rsp+C0h] [rbp-150h]
  int v95; // [rsp+C8h] [rbp-148h]
  char **p_p_false; // [rsp+D0h] [rbp-140h]
  int v97; // [rsp+D8h] [rbp-138h]
  const char *v98; // [rsp+E0h] [rbp-130h]
  char **v99; // [rsp+E8h] [rbp-128h]
  int v100; // [rsp+F0h] [rbp-120h]
  int v101; // [rsp+F8h] [rbp-118h]
  int v102; // [rsp+100h] [rbp-110h]
  int v103; // [rsp+108h] [rbp-108h]
  int v104; // [rsp+110h] [rbp-100h]
  const char *v105; // [rsp+118h] [rbp-F8h]
  int v106; // [rsp+120h] [rbp-F0h]
  int v107; // [rsp+128h] [rbp-E8h]
  const char *v108; // [rsp+130h] [rbp-E0h]
  const char *v109; // [rsp+138h] [rbp-D8h]
  char **v110; // [rsp+140h] [rbp-D0h]
  const char *v111; // [rsp+148h] [rbp-C8h]
  const char *v112; // [rsp+150h] [rbp-C0h]
  int v113; // [rsp+158h] [rbp-B8h]
  __int64 v114; // [rsp+190h] [rbp-80h] BYREF
  int v115; // [rsp+198h] [rbp-78h] BYREF
  unsigned int v116; // [rsp+19Ch] [rbp-74h] BYREF
  int v117; // [rsp+1A0h] [rbp-70h]
  _DWORD v118[2]; // [rsp+1A8h] [rbp-68h] BYREF
  _DWORD v119[2]; // [rsp+1B0h] [rbp-60h] BYREF
  char *p_false_1; // [rsp+1B8h] [rbp-58h] BYREF
  __int64 v121; // [rsp+1C0h] [rbp-50h] BYREF
  __int64 v122; // [rsp+1C8h] [rbp-48h] BYREF
  __int64 v123; // [rsp+1D0h] [rbp-40h] BYREF
  __int64 v124; // [rsp+1D8h] [rbp-38h]
  char v125; // [rsp+1E0h] [rbp-30h]
  char *p_true_3; // [rsp+1E8h] [rbp-28h] BYREF
  char *p_true_5; // [rsp+1F0h] [rbp-20h] BYREF
  char *p_true_7; // [rsp+1F8h] [rbp-18h] BYREF
  char *p_true_9; // [rsp+200h] [rbp-10h] BYREF
  char *p_true_11; // [rsp+208h] [rbp-8h] BYREF
  __int64 v131; // [rsp+210h] [rbp+0h] BYREF
  char *p_true_13; // [rsp+218h] [rbp+8h] BYREF
  __int64 v133; // [rsp+220h] [rbp+10h] BYREF
  char *p_true_15; // [rsp+228h] [rbp+18h] BYREF
  char *p_true_17; // [rsp+230h] [rbp+20h] BYREF
  __int64 v136; // [rsp+238h] [rbp+28h] BYREF
  char *p_true_19; // [rsp+240h] [rbp+30h] BYREF
  char *p_true_21; // [rsp+248h] [rbp+38h] BYREF
  ULONG_PTR *p_p_Src_2; // [rsp+250h] [rbp+40h] BYREF
  char *p_true_23; // [rsp+258h] [rbp+48h] BYREF
  ULONG_PTR *p_p_Src_4; // [rsp+260h] [rbp+50h] BYREF
  char *p_true_25; // [rsp+268h] [rbp+58h] BYREF
  ULONG_PTR *p_p_Src_5; // [rsp+270h] [rbp+60h] BYREF
  char *p_true_27; // [rsp+278h] [rbp+68h] BYREF
  char *p_true_29; // [rsp+280h] [rbp+70h] BYREF
  char *p_true_1; // [rsp+288h] [rbp+78h] BYREF
  _QWORD *v147; // [rsp+290h] [rbp+80h]
  __int64 p_rw_lock_state; // [rsp+298h] [rbp+88h]
  int *v149; // [rsp+2A0h] [rbp+90h]
  int v150; // [rsp+2A8h] [rbp+98h] BYREF
  _QWORD *v151; // [rsp+2B0h] [rbp+A0h]
  __int64 p_rw_lock_state_1; // [rsp+2B8h] [rbp+A8h]
  int *v153; // [rsp+2C0h] [rbp+B0h]
  int v154; // [rsp+2C8h] [rbp+B8h] BYREF
  int n0x900; // [rsp+2D0h] [rbp+C0h] BYREF
  __int64 v156; // [rsp+2D4h] [rbp+C4h]
  int v157; // [rsp+2DCh] [rbp+CCh]
  unsigned __int64 v158; // [rsp+2E0h] [rbp+D0h]
  unsigned __int64 v159; // [rsp+2E8h] [rbp+D8h]
  __int64 v160; // [rsp+2F0h] [rbp+E0h]
  __int64 v161; // [rsp+2F8h] [rbp+E8h]
  _QWORD v162[2]; // [rsp+320h] [rbp+110h] BYREF
  __int64 v163[2]; // [rsp+330h] [rbp+120h] BYREF
  _OWORD v164[5]; // [rsp+340h] [rbp+130h] BYREF
  __int64 v165; // [rsp+3A0h] [rbp+190h] BYREF
  __int64 v166; // [rsp+3A8h] [rbp+198h] BYREF
  __int64 v167; // [rsp+3B0h] [rbp+1A0h] BYREF
  __int64 v168; // [rsp+3B8h] [rbp+1A8h] BYREF

  n0x900 = 0x900;
  v156 = 0;
  v157 = 0;
  v159 = 0;
  v160 = 0;
  v161 = 0;
  v158 = __rdtsc();
  qword_149C89AA0(
    &n0x900,
    &word_149D7FFEC,
    "CDamageMap::MT_ProcessDamageMap",
    "W:\\p4-src\\CryEngine\\Code\\CryEngine\\RenderDll\\XRenderD3D9\\../Common/DamageMap.cpp",
    0x8CA);
  v2 = *(_DWORD **)(a1 + 0x48);
  v3 = *(_DWORD **)(a1 + 0x40);
  for ( HIWORD(n0x900) = word_149D7FFEC; v3 != v2; v3 += 4 )
  {
    *v3 = v3[1];
    v3[2] = v3[3];
  }
  *(_DWORD *)(a1 + 0x70) = *(_DWORD *)(a1 + 0x74);
  *(_DWORD *)(a1 + 0x78) = *(_DWORD *)(a1 + 0x7C);
  *(_QWORD *)(a1 + 0x60) = *(_QWORD *)(a1 + 0x58);
  v4 = *(_QWORD *)(a1 + 0x110);
  v123 = v4;
  v125 = 1;
  v5 = v4 + 0x48;
  v124 = v4 + 0x48;
  p_p_Src = (ULONG_PTR *)&p_Src;
  v7 = *(_DWORD *)(NtCurrentTeb_w() + 0x18);
  if ( *(_DWORD *)(v4 + 0x58) == v7 )
  {
    ++*(_DWORD *)(v4 + 0x5C);
  }
  else
  {
    v8 = *(_QWORD *)(NtCurrentTeb_w() + 0x20);
    v9 = _InterlockedCompareExchange64((volatile signed __int64 *)v5, 0x200000, 0);
    if ( v9 )
      sub_1403E1120(v4 + 0x48, v9, v8, (const char *)&p_Src, (const char *)&p_Src, 1);
    else
      *(_QWORD *)(v4 + 0x50) = v8;
    *(_DWORD *)(v4 + 0x58) = v7;
    v5 = v124;
  }
  v10 = *(_QWORD *)(v4 + 8);
  v11 = *(_QWORD *)(v4 + 0x10);
  if ( v10 == v11 )
  {
    v12 = *(_QWORD *)(a1 + 0x120);
    if ( v12 )
      v13 = *(_DWORD *)(v12 + 0x50);
    else
      v13 = 0;
    v14 = v13 * (unsigned __int64)v13;
    v15 = (v11 - v10) >> 2;
    if ( v14 <= v15 )
      *(_QWORD *)(v4 + 0x10) = v10 + 4 * v14;
    else
      sub_14084DC50(v4 + 8, v14 - v15);
  }
  v16 = *(_QWORD *)(a1 + 0x120);
  if ( v16 && *(_QWORD *)(v16 + 0x18) != *(_QWORD *)(v16 + 0x20) && *(_QWORD *)(v4 + 8) != *(_QWORD *)(v4 + 0x10) )
  {
    sub_140854BE0(a1);
    if ( (unsigned __int8)sub_140851510(a1, &v123) )
      *(_WORD *)(a1 + 0x1DC) |= 8u;
    else
      *(_WORD *)(a1 + 0x1DC) &= ~8u;
  }
  v17 = 0xFFFFFFFF;
  if ( v5 )
  {
    v18 = *(_DWORD *)(v5 + 0x14);
    if ( v18 )
    {
      *(_DWORD *)(v5 + 0x14) = v18 - 1;
    }
    else
    {
      *(_DWORD *)(v5 + 0x10) = 0xFFFFFFFF;
      n0x200000 = _InterlockedCompareExchange64((volatile signed __int64 *)v5, 0, 0x200000);
      if ( n0x200000 == 0x200000 )
        *(_QWORD *)(v124 + 8) = &p_Src;
      else
        rw_lock_handle_write_release_contention(v124, n0x200000);
    }
  }
  if ( is_entity_descriptor_valid_or_accessible((unsigned __int64 *)(a1 + 0x140))
    && (*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)(*(_QWORD *)(a1 + 0x140) & 0xFFFFFFFFFFFFLL) + 0x720LL))(*(_QWORD *)(a1 + 0x140) & 0xFFFFFFFFFFFFLL)
    && n4_8 == 4 )
  {
    sub_140853A50(a1);
  }
  v20 = (__int16 *)(a1 + 0x1DC);
  *(_DWORD *)(a1 + 0x1C4) = dword_149C8E13C;
  if ( (*(_BYTE *)(a1 + 0x1DC) & 8) != 0 )
  {
    *(_DWORD *)(a1 + 0x1C8) = dword_149C8E13C;
    goto LABEL_134;
  }
  if ( !dword_149D7FE5C )
    goto LABEL_134;
  v21 = *(_QWORD *)(a1 + 0x110);
  if ( *(_DWORD *)(v21 + 0x58) == *(_DWORD *)(NtCurrentTeb_w() + 0x18) )
  {
    ++*(_DWORD *)(v21 + 0x5C);
  }
  else
  {
    v22 = _InterlockedIncrement64((volatile signed __int64 *)(v21 + 0x48));
    if ( (v22 & 0x200000) != 0 )
      rw_lock_acquire_read_lock_dispatch(v21 + 0x48, v22, (const char *)&p_Src, (const char *)&p_Src, 1);
  }
  v154 = 1;
  v151 = (_QWORD *)(a1 + 0x178);
  p_rw_lock_state_1 = a1 + 0x190;
  v153 = &v154;
  if ( *(_DWORD *)(a1 + 0x1A0) == *(_DWORD *)(NtCurrentTeb_w() + 0x18) )
  {
    ++*(_DWORD *)(a1 + 0x1A4);
  }
  else
  {
    v23 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 0x190));
    if ( (v23 & 0x200000) != 0 )
      rw_lock_acquire_read_lock_dispatch(a1 + 0x190, v23, (const char *)&p_Src, (const char *)&p_Src, 1);
  }
  v118[0] = 0xCA;
  v162[0] = v118;
  v118[1] = 0xBC;
  v162[1] = v119;
  v117 = invokeGlobalCallbackAndMaskStatusBits(
           3,
           (__int64)v162,
           (__int64)"Damage Map failed Process",
           "Failed to process the damage map this frame. Current Damage Map state:\n"
           "Manager:\n"
           " valid = %s\n"
           "Entity:\n"
           " valid = %s\n"
           " Name = %s\n"
           "StatObj:\n"
           " valid = %s\n"
           " Name = %s\n"
           "CharInst:\n"
           " valid = %s\n"
           " Name = %s\n"
           "SharedPbmTex:\n"
           " valid = %s\n"
           " Res  = %lu\n"
           " BuffSize = %lu\n"
           " geom hash = %lu\n"
           " totalPixels = %lu\n"
           " surfaceArea = %f\n"
           " last Access Frame = %lu\n"
           "SharedDmgTex:\n"
           " valid = %s\n"
           " Dmg Buff Size = %lu\n"
           " gpu Dmg Buff Size = %lu\n"
           " free bones = %s\n"
           " last gpu transfer = %lu\n"
           " last impact Process = %lu\n"
           "LookUpTree:\n"
           " valid = %s\n"
           " Total Leaf Nodes = %lu\n"
           "Skinning:\n"
           " empty = %s\n"
           " size = %lu\n"
           "Snapshot tree:\n"
           " empty = %s\n"
           "Data:\n"
           " surfArea = %f\n"
           " Ref Count = %d\n"
           " Impact Count = %lu\n"
           " LastUsed = %lu\n"
           " LastSuccess = %lu\n"
           " LastProcessed = %lu\n"
           " RenderData Empty = %s\n"
           " skinningdataBoneCount = %lu\n"
           " deletionCount = %lu\n"
           " bFreshSnapshot = %s\n"
           " bRebuildAABBTree = %s\n"
           " bHasInitialisedQuadTree = %s\n"
           " bHasInitializedDamageTracking = %s\n"
           " bRequestSkinningTreerebuild = %s\n"
           " merge Hash = %lu",
           v74,
           v75,
           v76,
           (const char *)v77,
           (const char *)ThreadLogContextSlot,
           (const char *)p_p_true,
           (const char *)v80,
           (const char *)p_p_p_Src,
           v82,
           v83,
           v84,
           v85,
           *(double *)&v86,
           v87,
           v88,
           v89,
           v90,
           v91,
           v92,
           v93,
           v94,
           v95,
           (const char *)p_p_false,
           v97,
           v98,
           *(double *)&v99,
           v100,
           v101,
           v102,
           v103,
           v104,
           v105,
           v106,
           v107,
           v108,
           v109,
           (const char *)v110,
           v111,
           v112,
           v113);
  if ( (v117 & 0xFFFFF) != 0 )
  {
    v24 = *v20;
    p_true_28 = "false";
    p_true = "false";
    p_true_10 = "false";
    if ( (v24 & 0x40) != 0 )
      p_true = "true";
    p_true_1 = p_true;
    p_true_2 = "false";
    if ( (v24 & 0x20) != 0 )
      p_true_2 = "true";
    p_true_3 = p_true_2;
    p_true_4 = "false";
    if ( (v24 & 0x10) != 0 )
      p_true_4 = "true";
    p_true_5 = p_true_4;
    p_true_6 = "false";
    if ( (v24 & 2) != 0 )
      p_true_6 = "true";
    p_true_7 = p_true_6;
    p_true_8 = "false";
    if ( (v24 & 1) != 0 )
      p_true_8 = "true";
    p_true_9 = p_true_8;
    v32 = *v151 == v151[1];
    v147 = (_QWORD *)(a1 + 0x148);
    p_rw_lock_state = a1 + 0x160;
    if ( v32 )
      p_true_10 = "true";
    v149 = &v150;
    p_true_11 = p_true_10;
    v150 = 1;
    if ( *(_DWORD *)(a1 + 0x170) == *(_DWORD *)(NtCurrentTeb_w() + 0x18) )
    {
      ++*(_DWORD *)(a1 + 0x174);
    }
    else
    {
      v33 = _InterlockedIncrement64((volatile signed __int64 *)(a1 + 0x160));
      if ( (v33 & 0x200000) != 0 )
        rw_lock_acquire_read_lock_dispatch(a1 + 0x160, v33, (const char *)&p_Src, (const char *)&p_Src, 1);
    }
    p_true_12 = "false";
    v35 = *(_QWORD *)(a1 + 0x1A8);
    if ( *(_QWORD *)(a1 + 0x20) == *(_QWORD *)(a1 + 0x28) )
      p_true_12 = "true";
    v131 = (v147[1] - *v147) / 0xF8LL;
    v36 = *(_QWORD *)(a1 + 0x1B0);
    p_true_13 = p_true_12;
    v133 = (v36 - v35) >> 5;
    p_true_14 = "false";
    if ( v35 == v36 )
      p_true_14 = "true";
    p_true_15 = p_true_14;
    v115 = *(_DWORD *)(a1 + 0xE0) - *(_DWORD *)(a1 + 0xE4);
    v38 = *(_QWORD *)(a1 + 0xC8);
    v39 = v38 != *(_QWORD *)(a1 + 0xD0) && *(_BYTE *)(v38 + 0x48);
    v32 = !v39;
    p_true_16 = "false";
    v41 = *(_QWORD *)(a1 + 0x110);
    if ( !v32 )
      p_true_16 = "true";
    p_true_17 = p_true_16;
    if ( v41 )
    {
      LODWORD(v165) = *(_DWORD *)(v21 + 0x44);
      LODWORD(v166) = *(_DWORD *)(v21 + 0x40);
      if ( *(_BYTE *)(v21 + 0x3F) < 2u && (*(_BYTE *)(v21 + 0x3E) & 1) != 0 )
      {
        p_false_1 = "true";
        goto LABEL_76;
      }
    }
    else
    {
      LODWORD(v165) = 0xFFFFFFFF;
      LODWORD(v166) = 0xFFFFFFFF;
    }
    p_false_1 = "false";
    if ( !v41 )
    {
      v121 = 0xFFFFFFFFFFFFFFFFuLL;
      v42 = 0xFFFFFFFFFFFFFFFFuLL;
      goto LABEL_78;
    }
LABEL_76:
    v121 = (__int64)(*(_QWORD *)(v21 + 0x28) - *(_QWORD *)(v21 + 0x20)) >> 2;
    v42 = (__int64)(*(_QWORD *)(v21 + 0x10) - *(_QWORD *)(v21 + 8)) >> 2;
LABEL_78:
    v32 = v41 == 0;
    v136 = v42;
    v43 = *(_QWORD *)(a1 + 0x120);
    p_true_18 = "false";
    if ( !v32 )
      p_true_18 = "true";
    p_true_19 = p_true_18;
    if ( v43 )
    {
      LODWORD(v167) = *(_DWORD *)(v43 + 0x5C);
      LODWORD(v168) = *(_DWORD *)(v43 + 0x60);
      LODWORD(v114) = *(_DWORD *)(v43 + 0x54);
      HIDWORD(v114) = *(_DWORD *)(v43 + 0x48);
      v122 = (__int64)(*(_QWORD *)(v43 + 0x20) - *(_QWORD *)(v43 + 0x18)) >> 3;
      v17 = *(_DWORD *)(v43 + 0x50);
    }
    else
    {
      *(float *)&v168 = -1.0;
      LODWORD(v167) = 0xFFFFFFFF;
      v114 = 0xFFFFFFFFFFFFFFFFuLL;
      v122 = 0xFFFFFFFFFFFFFFFFuLL;
    }
    v32 = v43 == 0;
    v116 = v17;
    v45 = *(_QWORD *)(a1 + 0x130);
    p_true_20 = "false";
    if ( !v32 )
      p_true_20 = "true";
    p_true_21 = p_true_20;
    if ( v45 )
    {
      v47 = (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v45 + 0x2E8LL))(v45);
      p_p_Src_1 = (ULONG_PTR *)(*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v47 + 0x348LL))(v47);
    }
    else
    {
      p_p_Src_1 = (ULONG_PTR *)&p_Src;
    }
    v32 = *(_QWORD *)(a1 + 0x130) == 0;
    v49 = *(_QWORD *)(a1 + 0x128);
    p_p_Src_2 = p_p_Src_1;
    p_true_22 = "false";
    if ( !v32 )
      p_true_22 = "true";
    p_true_23 = p_true_22;
    if ( v49 )
      p_p_Src_3 = (ULONG_PTR *)(*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v49 + 0x358LL))(v49);
    else
      p_p_Src_3 = (ULONG_PTR *)&p_Src;
    v32 = *(_QWORD *)(a1 + 0x128) == 0;
    v52 = *(_QWORD *)(a1 + 0x140);
    n0xFFF = 0xFFF;
    p_p_Src_4 = p_p_Src_3;
    p_true_24 = "false";
    if ( !v32 )
      p_true_24 = "true";
    p_true_25 = p_true_24;
    if ( v52 )
    {
      v55 = v52 & 0xFFFFFFFFFFFFLL;
      v56 = HIWORD(v52);
      if ( (v56 & 0xF000) != 0 )
      {
        v57 = map_flag_to_mask(0x2000u);
        v59 = v58 & ~(v57 - 1);
      }
      else
      {
        v59 = v55 - 6;
      }
      if ( *(_WORD *)(v59 + 2) == ((unsigned __int16)n0xFFF & (unsigned __int16)v56) )
      {
        if ( *(_BYTE *)(NtCurrentTeb_w() + 0x12D) || (v60 = is_thread_privileged_or_bypass_mode()) )
          v60 = 1;
        if ( *(_WORD *)(v59 + 4) == 2 && v60 || sub_140395410((_QWORD *)(a1 + 0x140)) )
        {
          if ( is_entity_descriptor_valid_or_accessible((unsigned __int64 *)(a1 + 0x140)) )
            v61 = *(_QWORD *)(a1 + 0x140) & 0xFFFFFFFFFFFFLL;
          else
            v61 = 0;
          p_p_Src = (ULONG_PTR *)(*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v61 + 0x70LL))(v61);
        }
      }
    }
    v62 = *(_QWORD *)(a1 + 0x140);
    p_p_Src_5 = p_p_Src;
    if ( v62 )
    {
      v64 = v62 & 0xFFFFFFFFFFFFLL;
      v65 = HIWORD(v62);
      if ( (v65 & 0xF000) != 0 )
      {
        v66 = map_flag_to_mask(0x2000u);
        v68 = v67 & ~(v66 - 1);
      }
      else
      {
        v68 = v64 - 6;
      }
      if ( *(_WORD *)(v68 + 2) == (v65 & 0xFFF) )
      {
        if ( *(_BYTE *)(NtCurrentTeb_w() + 0x12D) || (v69 = is_thread_privileged_or_bypass_mode()) )
          v69 = 1;
        v63 = *(_WORD *)(v68 + 4) == 2 && v69 || sub_140395410((_QWORD *)(a1 + 0x140));
      }
      else
      {
        v63 = 0;
      }
    }
    else
    {
      v63 = 0;
    }
    p_true_26 = "false";
    if ( v63 )
      p_true_26 = "true";
    p_true_27 = p_true_26;
    if ( (*(__int64 (**)(void))(*(_QWORD *)qword_149C8E018 + 0x5A0LL))() )
      p_true_28 = "true";
    p_true_29 = p_true_28;
    ThreadLogContextSlot_1 = getThreadLogContextSlot();
    v119[0] = 0xCA;
    v163[0] = (__int64)v119;
    v163[1] = (__int64)&p_false_1;
    v164[0] = 0;
    v119[1] = 0xBC;
    sub_1408456C0(
      3,
      (__int64)v163,
      "Damage Map failed Process",
      "Failed to process the damage map this frame. Current Damage Map state:\n"
      "Manager:\n"
      " valid = %s\n"
      "Entity:\n"
      " valid = %s\n"
      " Name = %s\n"
      "StatObj:\n"
      " valid = %s\n"
      " Name = %s\n"
      "CharInst:\n"
      " valid = %s\n"
      " Name = %s\n"
      "SharedPbmTex:\n"
      " valid = %s\n"
      " Res  = %lu\n"
      " BuffSize = %lu\n"
      " geom hash = %lu\n"
      " totalPixels = %lu\n"
      " surfaceArea = %f\n"
      " last Access Frame = %lu\n"
      "SharedDmgTex:\n"
      " valid = %s\n"
      " Dmg Buff Size = %lu\n"
      " gpu Dmg Buff Size = %lu\n"
      " free bones = %s\n"
      " last gpu transfer = %lu\n"
      " last impact Process = %lu\n"
      "LookUpTree:\n"
      " valid = %s\n"
      " Total Leaf Nodes = %lu\n"
      "Skinning:\n"
      " empty = %s\n"
      " size = %lu\n"
      "Snapshot tree:\n"
      " empty = %s\n"
      "Data:\n"
      " surfArea = %f\n"
      " Ref Count = %d\n"
      " Impact Count = %lu\n"
      " LastUsed = %lu\n"
      " LastSuccess = %lu\n"
      " LastProcessed = %lu\n"
      " RenderData Empty = %s\n"
      " skinningdataBoneCount = %lu\n"
      " deletionCount = %lu\n"
      " bFreshSnapshot = %s\n"
      " bRebuildAABBTree = %s\n"
      " bHasInitialisedQuadTree = %s\n"
      " bHasInitializedDamageTracking = %s\n"
      " bRequestSkinningTreerebuild = %s\n"
      " merge Hash = %lu",
      1,
      v117,
      v164,
      0,
      ThreadLogContextSlot_1,
      (const char **)&p_true_29,
      (const char **)&p_true_27,
      (const ULONG_PTR **)&p_p_Src_5,
      (const char **)&p_true_25,
      (const ULONG_PTR **)&p_p_Src_4,
      (const char **)&p_true_23,
      (const ULONG_PTR **)&p_p_Src_2,
      (const char **)&p_true_21,
      (__int64)&v116,
      (__int64)&v122,
      (__int64)&v114 + 4,
      (__int64)&v114,
      (__int64)&v168,
      (__int64)&v167,
      (const char **)&p_true_19,
      (__int64)&v136,
      (__int64)&v121,
      (const char **)&p_false_1,
      (__int64)&v166,
      (__int64)&v165,
      (const char **)&p_true_17,
      (__int64)&v115,
      (const char **)&p_true_15,
      (__int64)&v133,
      (const char **)&p_true_13,
      a1 + 0xB8,
      a1 + 0xBC,
      (__int64)&v131,
      a1 + 0x1CC,
      a1 + 0x1C8,
      a1 + 0x1C4,
      (const char **)&p_true_11,
      a1 + 0x1C0,
      a1 + 0x1D0,
      (const char **)&p_true_9,
      (const char **)&p_true_7,
      (const char **)&p_true_5,
      (const char **)&p_true_3,
      (const char **)&p_true_1,
      a1 + 0x1D4);
    v32 = (*v149)-- == 1;
    if ( v32 )
      rw_lock_release_read_lock(p_rw_lock_state);
  }
  v32 = (*v153)-- == 1;
  if ( v32 )
    rw_lock_release_read_lock(p_rw_lock_state_1);
  rw_lock_release_read_lock(v21 + 0x48);
  v20 = (__int16 *)(a1 + 0x1DC);
LABEL_134:
  v72 = (*v20 & 8) == 0 || (*v20 & 2) != 0;
  v159 = __rdtsc();
  qword_149C89AA8(&n0x900);
  return v72;
}

// --- End Function: sub_140857430 (0x140857430) ---

// --- Function: sub_140860580 (0x140860580) ---
__int64 __fastcall sub_140860580(__int64 a1)
{
  signed __int32 v2; // eax
  bool v3; // cc
  __int64 result; // rax

  v2 = _InterlockedExchangeAdd((volatile signed __int32 *)(a1 + 0xBC), 0xFFFFFFFF);
  v3 = v2 <= 1;
  result = (unsigned int)(v2 - 1);
  if ( v3 )
  {
    if ( a1 )
    {
      sub_14084A700();
      return sub_1402A6590(a1);
    }
  }
  return result;
}

// --- End Function: sub_140860580 (0x140860580) ---

